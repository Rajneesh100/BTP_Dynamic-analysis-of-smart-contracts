<!DOCTYPE html>
<html class="writer-html5" lang="en" >

<!-- Mirrored from docs.soliditylang.org/en/v0.8.23/types.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 02 Jan 2024 20:36:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Types &mdash; Solidity 0.8.23 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/a4_railroad_diagram.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/fonts.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom-dark.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/toggle.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script async="async" src="https://docs.soliditylang.org/_/static/javascript/readthedocs-doc-embed.js"></script>
        <script src="_static/js/constants.js"></script>
        <script src="_static/js/initialize.js"></script>
        <script src="_static/js/toggle.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Units and Globally Available Variables" href="units-and-global-variables.html" />
    <link rel="prev" title="Structure of a Contract" href="structure-of-a-contract.html" /> 

<!-- RTD Extra Head -->

<link rel="stylesheet" href="https://docs.soliditylang.org/_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": true, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": null, "language": "en", "page": "types", "programming_language": "cpp", "project": "solidity", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_rtd_theme", "user_analytics_code": "", "version": "v0.8.23"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="https://docs.soliditylang.org/_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index-2.html">
            
          </a>
              <div class="version">
                v0.8.23
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://docs.soliditylang.org/en/v0.8.23/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-smart-contracts.html">Introduction to Smart Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidity-by-example.html">Solidity by Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing-solidity.html">Installing the Solidity Compiler</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language Description</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="layout-of-source-files.html">Layout of a Solidity Source File</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure-of-a-contract.html">Structure of a Contract</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#value-types">Value Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#booleans">Booleans</a></li>
<li class="toctree-l3"><a class="reference internal" href="#integers">Integers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#comparisons">Comparisons</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bit-operations">Bit operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shifts">Shifts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#addition-subtraction-and-multiplication">Addition, Subtraction and Multiplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#division">Division</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modulo">Modulo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exponentiation">Exponentiation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fixed-point-numbers">Fixed Point Numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#address">Address</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#members-of-addresses">Members of Addresses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#contract-types">Contract Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fixed-size-byte-arrays">Fixed-size byte arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dynamically-sized-byte-array">Dynamically-sized byte array</a></li>
<li class="toctree-l3"><a class="reference internal" href="#address-literals">Address Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rational-and-integer-literals">Rational and Integer Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#string-literals-and-types">String Literals and Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unicode-literals">Unicode Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hexadecimal-literals">Hexadecimal Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enums">Enums</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-defined-value-types">User-defined Value Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-types">Function Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reference-types">Reference Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-location">Data location</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#data-location-and-assignment-behavior">Data location and assignment behavior</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#arrays">Arrays</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bytes-and-string-as-arrays"><code class="docutils literal notranslate"><span class="pre">bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">string</span></code> as Arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-functions-bytes-concat-and-string-concat">The functions <code class="docutils literal notranslate"><span class="pre">bytes.concat</span></code> and <code class="docutils literal notranslate"><span class="pre">string.concat</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#allocating-memory-arrays">Allocating Memory Arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="#array-literals">Array Literals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#array-members">Array Members</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dangling-references-to-storage-array-elements">Dangling References to Storage Array Elements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#array-slices">Array Slices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structs">Structs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mapping-types">Mapping Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#iterable-mappings">Iterable Mappings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#operators">Operators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ternary-operator">Ternary Operator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compound-and-increment-decrement-operators">Compound and Increment/Decrement Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete">delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-of-precedence-of-operators">Order of Precedence of Operators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#conversions-between-elementary-types">Conversions between Elementary Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#implicit-conversions">Implicit Conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#explicit-conversions">Explicit Conversions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#conversions-between-literals-and-elementary-types">Conversions between Literals and Elementary Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#integer-types">Integer Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-34">Fixed-Size Byte Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#addresses">Addresses</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="units-and-global-variables.html">Units and Globally Available Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="control-structures.html">Expressions and Control Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="contracts.html">Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="assembly.html">Inline Assembly</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="grammar.html">Language Grammar</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compiler</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="using-the-compiler.html">Using the Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysing-compilation-output.html">Analysing the Compiler Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="ir-breaking-changes.html">Solidity IR-based Codegen Changes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Internals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="internals/layout_in_storage.html">Layout of State Variables in Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/layout_in_memory.html">Layout in Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/layout_in_calldata.html">Layout of Call Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/variable_cleanup.html">Cleaning Up Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/source_mappings.html">Source Mappings</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/optimizer.html">The Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Contract Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="abi-spec.html">Contract ABI Specification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advisory content</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="security-considerations.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html">List of Known Bugs</a></li>
<li class="toctree-l1"><a class="reference internal" href="050-breaking-changes.html">Solidity v0.5.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="060-breaking-changes.html">Solidity v0.6.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="070-breaking-changes.html">Solidity v0.7.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="080-breaking-changes.html">Solidity v0.8.0 Breaking Changes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Material</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="natspec-format.html">NatSpec Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="smtchecker.html">SMTChecker and Formal Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="yul.html">Yul</a></li>
<li class="toctree-l1"><a class="reference internal" href="path-resolution.html">Import Path Resolution</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="style-guide.html">Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-patterns.html">Common Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="language-influences.html">Language Influences</a></li>
<li class="toctree-l1"><a class="reference internal" href="brand-guide.html">Solidity Brand Guide</a></li>
</ul>

    <ul>
        <li>
            <a href="genindex.html">Keyword Index</a>
        </li>
    </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index-2.html">Solidity</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index-2.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Types</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ethereum/solidity/blob/v0.8.23/docs/types.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="types">
<span id="index-0"></span><span id="id1"></span><h1>Types<a class="headerlink" href="#types" title="Permalink to this heading"></a></h1>
<p>Solidity is a statically typed language, which means that the type of each
variable (state and local) needs to be specified.
Solidity provides several elementary types which can be combined to form complex types.</p>
<p>In addition, types can interact with each other in expressions containing
operators. For a quick reference of the various operators, see <a class="reference internal" href="#order"><span class="std std-ref">Order of Precedence of Operators</span></a>.</p>
<p>The concept of “undefined” or “null” values does not exist in Solidity, but newly
declared variables always have a <a class="reference internal" href="control-structures.html#default-value"><span class="std std-ref">default value</span></a> dependent
on its type. To handle any unexpected values, you should use the <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">revert function</span></a> to revert the whole transaction, or return a
tuple with a second <code class="docutils literal notranslate"><span class="pre">bool</span></code> value denoting success.</p>
<section id="value-types">
<span id="index-1"></span><span id="id2"></span><h2>Value Types<a class="headerlink" href="#value-types" title="Permalink to this heading"></a></h2>
<p>The following are called value types because their variables will always be passed by value, i.e. they are always copied when they
are used as function arguments or in assignments.</p>
<section id="booleans">
<span id="index-2"></span><h3>Booleans<a class="headerlink" href="#booleans" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">bool</span></code>: The possible values are constants <code class="docutils literal notranslate"><span class="pre">true</span></code> and <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>Operators:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">!</span></code> (logical negation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> (logical conjunction, “and”)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">||</span></code> (logical disjunction, “or”)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">==</span></code> (equality)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!=</span></code> (inequality)</p></li>
</ul>
<p>The operators <code class="docutils literal notranslate"><span class="pre">||</span></code> and <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> apply the common short-circuiting rules. This means that in the expression <code class="docutils literal notranslate"><span class="pre">f(x)</span> <span class="pre">||</span> <span class="pre">g(y)</span></code>, if <code class="docutils literal notranslate"><span class="pre">f(x)</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">g(y)</span></code> will not be evaluated even if it may have side-effects.</p>
</section>
<section id="integers">
<span id="index-3"></span><span id="id3"></span><h3>Integers<a class="headerlink" href="#integers" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">int</span></code> / <code class="docutils literal notranslate"><span class="pre">uint</span></code>: Signed and unsigned integers of various sizes. Keywords <code class="docutils literal notranslate"><span class="pre">uint8</span></code> to <code class="docutils literal notranslate"><span class="pre">uint256</span></code> in steps of <code class="docutils literal notranslate"><span class="pre">8</span></code> (unsigned of 8 up to 256 bits) and <code class="docutils literal notranslate"><span class="pre">int8</span></code> to <code class="docutils literal notranslate"><span class="pre">int256</span></code>. <code class="docutils literal notranslate"><span class="pre">uint</span></code> and <code class="docutils literal notranslate"><span class="pre">int</span></code> are aliases for <code class="docutils literal notranslate"><span class="pre">uint256</span></code> and <code class="docutils literal notranslate"><span class="pre">int256</span></code>, respectively.</p>
<p>Operators:</p>
<ul class="simple">
<li><p>Comparisons: <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> (evaluate to <code class="docutils literal notranslate"><span class="pre">bool</span></code>)</p></li>
<li><p>Bit operators: <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">|</span></code>, <code class="docutils literal notranslate"><span class="pre">^</span></code> (bitwise exclusive or), <code class="docutils literal notranslate"><span class="pre">~</span></code> (bitwise negation)</p></li>
<li><p>Shift operators: <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> (left shift), <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> (right shift)</p></li>
<li><p>Arithmetic operators: <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, unary <code class="docutils literal notranslate"><span class="pre">-</span></code> (only for signed integers), <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code> (modulo), <code class="docutils literal notranslate"><span class="pre">**</span></code> (exponentiation)</p></li>
</ul>
<p>For an integer type <code class="docutils literal notranslate"><span class="pre">X</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">type(X).min</span></code> and <code class="docutils literal notranslate"><span class="pre">type(X).max</span></code> to
access the minimum and maximum value representable by the type.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Integers in Solidity are restricted to a certain range. For example, with <code class="docutils literal notranslate"><span class="pre">uint32</span></code>, this is <code class="docutils literal notranslate"><span class="pre">0</span></code> up to <code class="docutils literal notranslate"><span class="pre">2**32</span> <span class="pre">-</span> <span class="pre">1</span></code>.
There are two modes in which arithmetic is performed on these types: The “wrapping” or “unchecked” mode and the “checked” mode.
By default, arithmetic is always “checked”, meaning that if an operation’s result falls outside the value range
of the type, the call is reverted through a <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">failing assertion</span></a>. You can switch to “unchecked” mode
using <code class="docutils literal notranslate"><span class="pre">unchecked</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code>. More details can be found in the section about <a class="reference internal" href="control-structures.html#unchecked"><span class="std std-ref">unchecked</span></a>.</p>
</div>
<section id="comparisons">
<h4>Comparisons<a class="headerlink" href="#comparisons" title="Permalink to this heading"></a></h4>
<p>The value of a comparison is the one obtained by comparing the integer value.</p>
</section>
<section id="bit-operations">
<h4>Bit operations<a class="headerlink" href="#bit-operations" title="Permalink to this heading"></a></h4>
<p>Bit operations are performed on the two’s complement representation of the number.
This means that, for example <code class="docutils literal notranslate"><span class="pre">~int256(0)</span> <span class="pre">==</span> <span class="pre">int256(-1)</span></code>.</p>
</section>
<section id="shifts">
<h4>Shifts<a class="headerlink" href="#shifts" title="Permalink to this heading"></a></h4>
<p>The result of a shift operation has the type of the left operand, truncating the result to match the type.
The right operand must be of unsigned type, trying to shift by a signed type will produce a compilation error.</p>
<p>Shifts can be “simulated” using multiplication by powers of two in the following way. Note that the truncation
to the type of the left operand is always performed at the end, but not mentioned explicitly.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;&lt;</span> <span class="pre">y</span></code> is equivalent to the mathematical expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">2**y</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;&gt;</span> <span class="pre">y</span></code> is equivalent to the mathematical expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">2**y</span></code>, rounded towards negative infinity.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before version <code class="docutils literal notranslate"><span class="pre">0.5.0</span></code> a right shift <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;&gt;</span> <span class="pre">y</span></code> for negative <code class="docutils literal notranslate"><span class="pre">x</span></code> was equivalent to
the mathematical expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">2**y</span></code> rounded towards zero,
i.e., right shifts used rounding up (towards zero) instead of rounding down (towards negative infinity).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Overflow checks are never performed for shift operations as they are done for arithmetic operations.
Instead, the result is always truncated.</p>
</div>
</section>
<section id="addition-subtraction-and-multiplication">
<h4>Addition, Subtraction and Multiplication<a class="headerlink" href="#addition-subtraction-and-multiplication" title="Permalink to this heading"></a></h4>
<p>Addition, subtraction and multiplication have the usual semantics, with two different
modes in regard to over- and underflow:</p>
<p>By default, all arithmetic is checked for under- or overflow, but this can be disabled
using the <a class="reference internal" href="control-structures.html#unchecked"><span class="std std-ref">unchecked block</span></a>, resulting in wrapping arithmetic. More details
can be found in that section.</p>
<p>The expression <code class="docutils literal notranslate"><span class="pre">-x</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">(T(0)</span> <span class="pre">-</span> <span class="pre">x)</span></code> where
<code class="docutils literal notranslate"><span class="pre">T</span></code> is the type of <code class="docutils literal notranslate"><span class="pre">x</span></code>. It can only be applied to signed types.
The value of <code class="docutils literal notranslate"><span class="pre">-x</span></code> can be
positive if <code class="docutils literal notranslate"><span class="pre">x</span></code> is negative. There is another caveat also resulting
from two’s complement representation:</p>
<p>If you have <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">type(int).min;</span></code>, then <code class="docutils literal notranslate"><span class="pre">-x</span></code> does not fit the positive range.
This means that <code class="docutils literal notranslate"><span class="pre">unchecked</span> <span class="pre">{</span> <span class="pre">assert(-x</span> <span class="pre">==</span> <span class="pre">x);</span> <span class="pre">}</span></code> works, and the expression <code class="docutils literal notranslate"><span class="pre">-x</span></code>
when used in checked mode will result in a failing assertion.</p>
</section>
<section id="division">
<h4>Division<a class="headerlink" href="#division" title="Permalink to this heading"></a></h4>
<p>Since the type of the result of an operation is always the type of one of
the operands, division on integers always results in an integer.
In Solidity, division rounds towards zero. This means that <code class="docutils literal notranslate"><span class="pre">int256(-5)</span> <span class="pre">/</span> <span class="pre">int256(2)</span> <span class="pre">==</span> <span class="pre">int256(-2)</span></code>.</p>
<p>Note that in contrast, division on <a class="reference internal" href="#rational-literals"><span class="std std-ref">literals</span></a> results in fractional values
of arbitrary precision.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Division by zero causes a <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">Panic error</span></a>. This check can <strong>not</strong> be disabled through <code class="docutils literal notranslate"><span class="pre">unchecked</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The expression <code class="docutils literal notranslate"><span class="pre">type(int).min</span> <span class="pre">/</span> <span class="pre">(-1)</span></code> is the only case where division causes an overflow.
In checked arithmetic mode, this will cause a failing assertion, while in wrapping
mode, the value will be <code class="docutils literal notranslate"><span class="pre">type(int).min</span></code>.</p>
</div>
</section>
<section id="modulo">
<h4>Modulo<a class="headerlink" href="#modulo" title="Permalink to this heading"></a></h4>
<p>The modulo operation <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">%</span> <span class="pre">n</span></code> yields the remainder <code class="docutils literal notranslate"><span class="pre">r</span></code> after the division of the operand <code class="docutils literal notranslate"><span class="pre">a</span></code>
by the operand <code class="docutils literal notranslate"><span class="pre">n</span></code>, where <code class="docutils literal notranslate"><span class="pre">q</span> <span class="pre">=</span> <span class="pre">int(a</span> <span class="pre">/</span> <span class="pre">n)</span></code> and <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">-</span> <span class="pre">(n</span> <span class="pre">*</span> <span class="pre">q)</span></code>. This means that modulo
results in the same sign as its left operand (or zero) and <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">%</span> <span class="pre">n</span> <span class="pre">==</span> <span class="pre">-(-a</span> <span class="pre">%</span> <span class="pre">n)</span></code> holds for negative <code class="docutils literal notranslate"><span class="pre">a</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">int256(5)</span> <span class="pre">%</span> <span class="pre">int256(2)</span> <span class="pre">==</span> <span class="pre">int256(1)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int256(5)</span> <span class="pre">%</span> <span class="pre">int256(-2)</span> <span class="pre">==</span> <span class="pre">int256(1)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int256(-5)</span> <span class="pre">%</span> <span class="pre">int256(2)</span> <span class="pre">==</span> <span class="pre">int256(-1)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int256(-5)</span> <span class="pre">%</span> <span class="pre">int256(-2)</span> <span class="pre">==</span> <span class="pre">int256(-1)</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Modulo with zero causes a <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">Panic error</span></a>. This check can <strong>not</strong> be disabled through <code class="docutils literal notranslate"><span class="pre">unchecked</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code>.</p>
</div>
</section>
<section id="exponentiation">
<h4>Exponentiation<a class="headerlink" href="#exponentiation" title="Permalink to this heading"></a></h4>
<p>Exponentiation is only available for unsigned types in the exponent. The resulting type
of an exponentiation is always equal to the type of the base. Please take care that it is
large enough to hold the result and prepare for potential assertion failures or wrapping behavior.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In checked mode, exponentiation only uses the comparatively cheap <code class="docutils literal notranslate"><span class="pre">exp</span></code> opcode for small bases.
For the cases of <code class="docutils literal notranslate"><span class="pre">x**3</span></code>, the expression <code class="docutils literal notranslate"><span class="pre">x*x*x</span></code> might be cheaper.
In any case, gas cost tests and the use of the optimizer are advisable.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">0**0</span></code> is defined by the EVM as <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</div>
</section>
</section>
<section id="fixed-point-numbers">
<span id="index-4"></span><h3>Fixed Point Numbers<a class="headerlink" href="#fixed-point-numbers" title="Permalink to this heading"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Fixed point numbers are not fully supported by Solidity yet. They can be declared, but
cannot be assigned to or from.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fixed</span></code> / <code class="docutils literal notranslate"><span class="pre">ufixed</span></code>: Signed and unsigned fixed point number of various sizes. Keywords <code class="docutils literal notranslate"><span class="pre">ufixedMxN</span></code> and <code class="docutils literal notranslate"><span class="pre">fixedMxN</span></code>, where <code class="docutils literal notranslate"><span class="pre">M</span></code> represents the number of bits taken by
the type and <code class="docutils literal notranslate"><span class="pre">N</span></code> represents how many decimal points are available. <code class="docutils literal notranslate"><span class="pre">M</span></code> must be divisible by 8 and goes from 8 to 256 bits. <code class="docutils literal notranslate"><span class="pre">N</span></code> must be between 0 and 80, inclusive.
<code class="docutils literal notranslate"><span class="pre">ufixed</span></code> and <code class="docutils literal notranslate"><span class="pre">fixed</span></code> are aliases for <code class="docutils literal notranslate"><span class="pre">ufixed128x18</span></code> and <code class="docutils literal notranslate"><span class="pre">fixed128x18</span></code>, respectively.</p>
<p>Operators:</p>
<ul class="simple">
<li><p>Comparisons: <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> (evaluate to <code class="docutils literal notranslate"><span class="pre">bool</span></code>)</p></li>
<li><p>Arithmetic operators: <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, unary <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code> (modulo)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The main difference between floating point (<code class="docutils literal notranslate"><span class="pre">float</span></code> and <code class="docutils literal notranslate"><span class="pre">double</span></code> in many languages, more precisely IEEE 754 numbers) and fixed point numbers is
that the number of bits used for the integer and the fractional part (the part after the decimal dot) is flexible in the former, while it is strictly
defined in the latter. Generally, in floating point almost the entire space is used to represent the number, while only a small number of bits define
where the decimal point is.</p>
</div>
</section>
<section id="address">
<span id="index-5"></span><span id="id4"></span><h3>Address<a class="headerlink" href="#address" title="Permalink to this heading"></a></h3>
<p>The address type comes in two largely identical flavors:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code>: Holds a 20 byte value (size of an Ethereum address).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code>: Same as <code class="docutils literal notranslate"><span class="pre">address</span></code>, but with the additional members <code class="docutils literal notranslate"><span class="pre">transfer</span></code> and <code class="docutils literal notranslate"><span class="pre">send</span></code>.</p></li>
</ul>
<p>The idea behind this distinction is that <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> is an address you can send Ether to,
while you are not supposed to send Ether to a plain <code class="docutils literal notranslate"><span class="pre">address</span></code>, for example because it might be a smart contract
that was not built to accept Ether.</p>
<p>Type conversions:</p>
<p>Implicit conversions from <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> to <code class="docutils literal notranslate"><span class="pre">address</span></code> are allowed, whereas conversions from <code class="docutils literal notranslate"><span class="pre">address</span></code> to <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code>
must be explicit via <code class="docutils literal notranslate"><span class="pre">payable(&lt;address&gt;)</span></code>.</p>
<p>Explicit conversions to and from <code class="docutils literal notranslate"><span class="pre">address</span></code> are allowed for <code class="docutils literal notranslate"><span class="pre">uint160</span></code>, integer literals,
<code class="docutils literal notranslate"><span class="pre">bytes20</span></code> and contract types.</p>
<p>Only expressions of type <code class="docutils literal notranslate"><span class="pre">address</span></code> and contract-type can be converted to the type <code class="docutils literal notranslate"><span class="pre">address</span>
<span class="pre">payable</span></code> via the explicit conversion <code class="docutils literal notranslate"><span class="pre">payable(...)</span></code>. For contract-type, this conversion is only
allowed if the contract can receive Ether, i.e., the contract either has a <a class="reference internal" href="contracts.html#receive-ether-function"><span class="std std-ref">receive</span></a> or a payable fallback function. Note that <code class="docutils literal notranslate"><span class="pre">payable(0)</span></code> is valid and is
an exception to this rule.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you need a variable of type <code class="docutils literal notranslate"><span class="pre">address</span></code> and plan to send Ether to it, then
declare its type as <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> to make this requirement visible. Also,
try to make this distinction or conversion as early as possible.</p>
<p>The distinction between <code class="docutils literal notranslate"><span class="pre">address</span></code> and <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> was introduced with version 0.5.0.
Also starting from that version, contracts are not implicitly convertible to the <code class="docutils literal notranslate"><span class="pre">address</span></code> type, but can still be explicitly converted to
<code class="docutils literal notranslate"><span class="pre">address</span></code> or to <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code>, if they have a receive or payable fallback function.</p>
</div>
<p>Operators:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you convert a type that uses a larger byte size to an <code class="docutils literal notranslate"><span class="pre">address</span></code>, for example <code class="docutils literal notranslate"><span class="pre">bytes32</span></code>, then the <code class="docutils literal notranslate"><span class="pre">address</span></code> is truncated.
To reduce conversion ambiguity, starting with version 0.4.24, the compiler will force you to make the truncation explicit in the conversion.
Take for example the 32-byte value <code class="docutils literal notranslate"><span class="pre">0x111122223333444455556666777788889999AAAABBBBCCCCDDDDEEEEFFFFCCCC</span></code>.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">address(uint160(bytes20(b)))</span></code>, which results in <code class="docutils literal notranslate"><span class="pre">0x111122223333444455556666777788889999aAaa</span></code>,
or you can use <code class="docutils literal notranslate"><span class="pre">address(uint160(uint256(b)))</span></code>, which results in <code class="docutils literal notranslate"><span class="pre">0x777788889999AaAAbBbbCcccddDdeeeEfFFfCcCc</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mixed-case hexadecimal numbers conforming to <a class="reference external" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md">EIP-55</a> are automatically treated as literals of the <code class="docutils literal notranslate"><span class="pre">address</span></code> type. See <a class="reference internal" href="#address-literals"><span class="std std-ref">Address Literals</span></a>.</p>
</div>
<section id="members-of-addresses">
<span id="id5"></span><h4>Members of Addresses<a class="headerlink" href="#members-of-addresses" title="Permalink to this heading"></a></h4>
<p>For a quick reference of all members of address, see <a class="reference internal" href="units-and-global-variables.html#address-related"><span class="std std-ref">Members of Address Types</span></a>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">balance</span></code> and <code class="docutils literal notranslate"><span class="pre">transfer</span></code></p></li>
</ul>
<p>It is possible to query the balance of an address using the property <code class="docutils literal notranslate"><span class="pre">balance</span></code>
and to send Ether (in units of wei) to a payable address using the <code class="docutils literal notranslate"><span class="pre">transfer</span></code> function:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=YWRkcmVzcyBwYXlhYmxlIHggPSBwYXlhYmxlKDB4MTIzKTsKYWRkcmVzcyBteUFkZHJlc3MgPSBhZGRyZXNzKHRoaXMpOwppZiAoeC5iYWxhbmNlIDwgMTAgJiYgbXlBZGRyZXNzLmJhbGFuY2UgPj0gMTApIHgudHJhbnNmZXIoMTApOw==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">payable</span><span class="p">(</span><span class="mh">0x123</span><span class="p">);</span>
<span class="kt">address</span><span class="w"> </span><span class="nv">myAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="kt">this</span><span class="p">);</span>
<span class="kt">if</span><span class="w"> </span><span class="p">(</span>x<span class="p">.</span>balance<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>myAddress<span class="p">.</span>balance<span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="p">)</span><span class="w"> </span>x<span class="p">.</span>transfer<span class="p">(</span><span class="m m-Decimal">10</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">transfer</span></code> function fails if the balance of the current contract is not large enough
or if the Ether transfer is rejected by the receiving account. The <code class="docutils literal notranslate"><span class="pre">transfer</span></code> function
reverts on failure.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> is a contract address, its code (more specifically: its <a class="reference internal" href="contracts.html#receive-ether-function"><span class="std std-ref">Receive Ether Function</span></a>, if present, or otherwise its <a class="reference internal" href="contracts.html#fallback-function"><span class="std std-ref">Fallback Function</span></a>, if present) will be executed together with the <code class="docutils literal notranslate"><span class="pre">transfer</span></code> call (this is a feature of the EVM and cannot be prevented). If that execution runs out of gas or fails in any way, the Ether transfer will be reverted and the current contract will stop with an exception.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">send</span></code></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">send</span></code> is the low-level counterpart of <code class="docutils literal notranslate"><span class="pre">transfer</span></code>. If the execution fails, the current contract will not stop with an exception, but <code class="docutils literal notranslate"><span class="pre">send</span></code> will return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There are some dangers in using <code class="docutils literal notranslate"><span class="pre">send</span></code>: The transfer fails if the call stack depth is at 1024
(this can always be forced by the caller) and it also fails if the recipient runs out of gas. So in order
to make safe Ether transfers, always check the return value of <code class="docutils literal notranslate"><span class="pre">send</span></code>, use <code class="docutils literal notranslate"><span class="pre">transfer</span></code> or even better:
use a pattern where the recipient withdraws the Ether.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">call</span></code>, <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> and <code class="docutils literal notranslate"><span class="pre">staticcall</span></code></p></li>
</ul>
<p>In order to interface with contracts that do not adhere to the ABI,
or to get more direct control over the encoding,
the functions <code class="docutils literal notranslate"><span class="pre">call</span></code>, <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> and <code class="docutils literal notranslate"><span class="pre">staticcall</span></code> are provided.
They all take a single <code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">memory</span></code> parameter and
return the success condition (as a <code class="docutils literal notranslate"><span class="pre">bool</span></code>) and the returned data
(<code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">memory</span></code>).
The functions <code class="docutils literal notranslate"><span class="pre">abi.encode</span></code>, <code class="docutils literal notranslate"><span class="pre">abi.encodePacked</span></code>, <code class="docutils literal notranslate"><span class="pre">abi.encodeWithSelector</span></code>
and <code class="docutils literal notranslate"><span class="pre">abi.encodeWithSignature</span></code> can be used to encode structured data.</p>
<p>Example:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ynl0ZXMgbWVtb3J5IHBheWxvYWQgPSBhYmkuZW5jb2RlV2l0aFNpZ25hdHVyZSgicmVnaXN0ZXIoc3RyaW5nKSIsICJNeU5hbWUiKTsKKGJvb2wgc3VjY2VzcywgYnl0ZXMgbWVtb3J5IHJldHVybkRhdGEpID0gYWRkcmVzcyhuYW1lUmVnKS5jYWxsKHBheWxvYWQpOwpyZXF1aXJlKHN1Y2Nlc3MpOw==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>payload<span class="w"> </span><span class="o">=</span><span class="w"> </span>abi<span class="p">.</span>encodeWithSignature<span class="p">(</span><span class="s2">&quot;register(string)&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;MyName&quot;</span><span class="p">);</span>
<span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">success</span><span class="p">,</span><span class="w"> </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>returnData<span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span>nameReg<span class="p">).</span>call<span class="p">(</span>payload<span class="p">);</span>
<span class="kt">require</span><span class="p">(</span>success<span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All these functions are low-level functions and should be used with care.
Specifically, any unknown contract might be malicious and if you call it, you
hand over control to that contract which could in turn call back into
your contract, so be prepared for changes to your state variables
when the call returns. The regular way to interact with other contracts
is to call a function on a contract object (<code class="docutils literal notranslate"><span class="pre">x.f()</span></code>).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Previous versions of Solidity allowed these functions to receive
arbitrary arguments and would also handle a first argument of type
<code class="docutils literal notranslate"><span class="pre">bytes4</span></code> differently. These edge cases were removed in version 0.5.0.</p>
</div>
<p>It is possible to adjust the supplied gas with the <code class="docutils literal notranslate"><span class="pre">gas</span></code> modifier:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=YWRkcmVzcyhuYW1lUmVnKS5jYWxse2dhczogMTAwMDAwMH0oYWJpLmVuY29kZVdpdGhTaWduYXR1cmUoInJlZ2lzdGVyKHN0cmluZykiLCAiTXlOYW1lIikpOw==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">address</span><span class="p">(</span>nameReg<span class="p">).</span>call<span class="p">{</span>gas<span class="o">:</span><span class="w"> </span><span class="m m-Decimal">1000000</span><span class="p">}(</span>abi<span class="p">.</span>encodeWithSignature<span class="p">(</span><span class="s2">&quot;register(string)&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;MyName&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>Similarly, the supplied Ether value can be controlled too:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=YWRkcmVzcyhuYW1lUmVnKS5jYWxse3ZhbHVlOiAxIGV0aGVyfShhYmkuZW5jb2RlV2l0aFNpZ25hdHVyZSgicmVnaXN0ZXIoc3RyaW5nKSIsICJNeU5hbWUiKSk7" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">address</span><span class="p">(</span>nameReg<span class="p">).</span>call<span class="p">{</span>value<span class="o">:</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="w"> </span>ether<span class="p">}(</span>abi<span class="p">.</span>encodeWithSignature<span class="p">(</span><span class="s2">&quot;register(string)&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;MyName&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>Lastly, these modifiers can be combined. Their order does not matter:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=YWRkcmVzcyhuYW1lUmVnKS5jYWxse2dhczogMTAwMDAwMCwgdmFsdWU6IDEgZXRoZXJ9KGFiaS5lbmNvZGVXaXRoU2lnbmF0dXJlKCJyZWdpc3RlcihzdHJpbmcpIiwgIk15TmFtZSIpKTs=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">address</span><span class="p">(</span>nameReg<span class="p">).</span>call<span class="p">{</span>gas<span class="o">:</span><span class="w"> </span><span class="m m-Decimal">1000000</span><span class="p">,</span><span class="w"> </span>value<span class="o">:</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="w"> </span>ether<span class="p">}(</span>abi<span class="p">.</span>encodeWithSignature<span class="p">(</span><span class="s2">&quot;register(string)&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;MyName&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>In a similar way, the function <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> can be used: the difference is that only the code of the given address is used, all other aspects (storage, balance, …) are taken from the current contract. The purpose of <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> is to use library code which is stored in another contract. The user has to ensure that the layout of storage in both contracts is suitable for delegatecall to be used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to homestead, only a limited variant called <code class="docutils literal notranslate"><span class="pre">callcode</span></code> was available that did not provide access to the original <code class="docutils literal notranslate"><span class="pre">msg.sender</span></code> and <code class="docutils literal notranslate"><span class="pre">msg.value</span></code> values. This function was removed in version 0.5.0.</p>
</div>
<p>Since byzantium <code class="docutils literal notranslate"><span class="pre">staticcall</span></code> can be used as well. This is basically the same as <code class="docutils literal notranslate"><span class="pre">call</span></code>, but will revert if the called function modifies the state in any way.</p>
<p>All three functions <code class="docutils literal notranslate"><span class="pre">call</span></code>, <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> and <code class="docutils literal notranslate"><span class="pre">staticcall</span></code> are very low-level functions and should only be used as a <em>last resort</em> as they break the type-safety of Solidity.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">gas</span></code> option is available on all three methods, while the <code class="docutils literal notranslate"><span class="pre">value</span></code> option is only available
on <code class="docutils literal notranslate"><span class="pre">call</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is best to avoid relying on hardcoded gas values in your smart contract code,
regardless of whether state is read from or written to, as this can have many pitfalls.
Also, access to gas might change in the future.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">code</span></code> and <code class="docutils literal notranslate"><span class="pre">codehash</span></code></p></li>
</ul>
<p>You can query the deployed code for any smart contract. Use <code class="docutils literal notranslate"><span class="pre">.code</span></code> to get the EVM bytecode as a
<code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">memory</span></code>, which might be empty. Use <code class="docutils literal notranslate"><span class="pre">.codehash</span></code> to get the Keccak-256 hash of that code
(as a <code class="docutils literal notranslate"><span class="pre">bytes32</span></code>). Note that <code class="docutils literal notranslate"><span class="pre">addr.codehash</span></code> is cheaper than using <code class="docutils literal notranslate"><span class="pre">keccak256(addr.code)</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All contracts can be converted to <code class="docutils literal notranslate"><span class="pre">address</span></code> type, so it is possible to query the balance of the
current contract using <code class="docutils literal notranslate"><span class="pre">address(this).balance</span></code>.</p>
</div>
</section>
</section>
<section id="contract-types">
<span id="index-6"></span><span id="id6"></span><h3>Contract Types<a class="headerlink" href="#contract-types" title="Permalink to this heading"></a></h3>
<p>Every <a class="reference internal" href="contracts.html#contracts"><span class="std std-ref">contract</span></a> defines its own type.
You can implicitly convert contracts to contracts they inherit from.
Contracts can be explicitly converted to and from the <code class="docutils literal notranslate"><span class="pre">address</span></code> type.</p>
<p>Explicit conversion to and from the <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> type is only possible
if the contract type has a receive or payable fallback function.  The conversion is still
performed using <code class="docutils literal notranslate"><span class="pre">address(x)</span></code>. If the contract type does not have a receive or payable
fallback function, the conversion to <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> can be done using
<code class="docutils literal notranslate"><span class="pre">payable(address(x))</span></code>.
You can find more information in the section about
the <a class="reference internal" href="#address"><span class="std std-ref">address type</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before version 0.5.0, contracts directly derived from the address type
and there was no distinction between <code class="docutils literal notranslate"><span class="pre">address</span></code> and <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code>.</p>
</div>
<p>If you declare a local variable of contract type (<code class="docutils literal notranslate"><span class="pre">MyContract</span> <span class="pre">c</span></code>), you can call
functions on that contract. Take care to assign it from somewhere that is the
same contract type.</p>
<p>You can also instantiate contracts (which means they are newly created). You
can find more details in the <a class="reference internal" href="control-structures.html#creating-contracts"><span class="std std-ref">‘Contracts via new’</span></a>
section.</p>
<p>The data representation of a contract is identical to that of the <code class="docutils literal notranslate"><span class="pre">address</span></code>
type and this type is also used in the <a class="reference internal" href="abi-spec.html#abi"><span class="std std-ref">ABI</span></a>.</p>
<p>Contracts do not support any operators.</p>
<p>The members of contract types are the external functions of the contract
including any state variables marked as <code class="docutils literal notranslate"><span class="pre">public</span></code>.</p>
<p>For a contract <code class="docutils literal notranslate"><span class="pre">C</span></code> you can use <code class="docutils literal notranslate"><span class="pre">type(C)</span></code> to access
<a class="reference internal" href="units-and-global-variables.html#meta-type"><span class="std std-ref">type information</span></a> about the contract.</p>
</section>
<section id="fixed-size-byte-arrays">
<span id="index-7"></span><h3>Fixed-size byte arrays<a class="headerlink" href="#fixed-size-byte-arrays" title="Permalink to this heading"></a></h3>
<p>The value types <code class="docutils literal notranslate"><span class="pre">bytes1</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes2</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes3</span></code>, …, <code class="docutils literal notranslate"><span class="pre">bytes32</span></code>
hold a sequence of bytes from one to up to 32.</p>
<p>Operators:</p>
<ul class="simple">
<li><p>Comparisons: <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> (evaluate to <code class="docutils literal notranslate"><span class="pre">bool</span></code>)</p></li>
<li><p>Bit operators: <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">|</span></code>, <code class="docutils literal notranslate"><span class="pre">^</span></code> (bitwise exclusive or), <code class="docutils literal notranslate"><span class="pre">~</span></code> (bitwise negation)</p></li>
<li><p>Shift operators: <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> (left shift), <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> (right shift)</p></li>
<li><p>Index access: If <code class="docutils literal notranslate"><span class="pre">x</span></code> is of type <code class="docutils literal notranslate"><span class="pre">bytesI</span></code>, then <code class="docutils literal notranslate"><span class="pre">x[k]</span></code> for <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">I</span></code> returns the <code class="docutils literal notranslate"><span class="pre">k</span></code> th byte (read-only).</p></li>
</ul>
<p>The shifting operator works with unsigned integer type as right operand (but
returns the type of the left operand), which denotes the number of bits to shift by.
Shifting by a signed type will produce a compilation error.</p>
<p>Members:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.length</span></code> yields the fixed length of the byte array (read-only).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The type <code class="docutils literal notranslate"><span class="pre">bytes1[]</span></code> is an array of bytes, but due to padding rules, it wastes
31 bytes of space for each element (except in storage). It is better to use the <code class="docutils literal notranslate"><span class="pre">bytes</span></code>
type instead.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to version 0.8.0, <code class="docutils literal notranslate"><span class="pre">byte</span></code> used to be an alias for <code class="docutils literal notranslate"><span class="pre">bytes1</span></code>.</p>
</div>
</section>
<section id="dynamically-sized-byte-array">
<h3>Dynamically-sized byte array<a class="headerlink" href="#dynamically-sized-byte-array" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bytes</span></code>:</dt><dd><p>Dynamically-sized byte array, see <a class="reference internal" href="#arrays"><span class="std std-ref">Arrays</span></a>. Not a value-type!</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">string</span></code>:</dt><dd><p>Dynamically-sized UTF-8-encoded string, see <a class="reference internal" href="#arrays"><span class="std std-ref">Arrays</span></a>. Not a value-type!</p>
</dd>
</dl>
</section>
<section id="address-literals">
<span id="index-8"></span><span id="id7"></span><h3>Address Literals<a class="headerlink" href="#address-literals" title="Permalink to this heading"></a></h3>
<p>Hexadecimal literals that pass the address checksum test, for example
<code class="docutils literal notranslate"><span class="pre">0xdCad3a6d3569DF655070DEd06cb7A1b2Ccd1D3AF</span></code> are of <code class="docutils literal notranslate"><span class="pre">address</span></code> type.
Hexadecimal literals that are between 39 and 41 digits
long and do not pass the checksum test produce
an error. You can prepend (for integer types) or append (for bytesNN types) zeros to remove the error.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The mixed-case address checksum format is defined in <a class="reference external" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md">EIP-55</a>.</p>
</div>
</section>
<section id="rational-and-integer-literals">
<span id="rational-literals"></span><span id="index-9"></span><h3>Rational and Integer Literals<a class="headerlink" href="#rational-and-integer-literals" title="Permalink to this heading"></a></h3>
<p>Integer literals are formed from a sequence of digits in the range 0-9.
They are interpreted as decimals. For example, <code class="docutils literal notranslate"><span class="pre">69</span></code> means sixty nine.
Octal literals do not exist in Solidity and leading zeros are invalid.</p>
<p>Decimal fractional literals are formed by a <code class="docutils literal notranslate"><span class="pre">.</span></code> with at least one number after the decimal point.
Examples include <code class="docutils literal notranslate"><span class="pre">.1</span></code> and <code class="docutils literal notranslate"><span class="pre">1.3</span></code> (but not <code class="docutils literal notranslate"><span class="pre">1.</span></code>).</p>
<p>Scientific notation in the form of <code class="docutils literal notranslate"><span class="pre">2e10</span></code> is also supported, where the
mantissa can be fractional but the exponent has to be an integer.
The literal <code class="docutils literal notranslate"><span class="pre">MeE</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">*</span> <span class="pre">10**E</span></code>.
Examples include <code class="docutils literal notranslate"><span class="pre">2e10</span></code>, <code class="docutils literal notranslate"><span class="pre">-2e10</span></code>, <code class="docutils literal notranslate"><span class="pre">2e-10</span></code>, <code class="docutils literal notranslate"><span class="pre">2.5e1</span></code>.</p>
<p>Underscores can be used to separate the digits of a numeric literal to aid readability.
For example, decimal <code class="docutils literal notranslate"><span class="pre">123_000</span></code>, hexadecimal <code class="docutils literal notranslate"><span class="pre">0x2eff_abde</span></code>, scientific decimal notation <code class="docutils literal notranslate"><span class="pre">1_2e345_678</span></code> are all valid.
Underscores are only allowed between two digits and only one consecutive underscore is allowed.
There is no additional semantic meaning added to a number literal containing underscores,
the underscores are ignored.</p>
<p>Number literal expressions retain arbitrary precision until they are converted to a non-literal type (i.e. by
using them together with anything other than a number literal expression (like boolean literals) or by explicit conversion).
This means that computations do not overflow and divisions do not truncate
in number literal expressions.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">(2**800</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">-</span> <span class="pre">2**800</span></code> results in the constant <code class="docutils literal notranslate"><span class="pre">1</span></code> (of type <code class="docutils literal notranslate"><span class="pre">uint8</span></code>)
although intermediate results would not even fit the machine word size. Furthermore, <code class="docutils literal notranslate"><span class="pre">.5</span> <span class="pre">*</span> <span class="pre">8</span></code> results
in the integer <code class="docutils literal notranslate"><span class="pre">4</span></code> (although non-integers were used in between).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While most operators produce a literal expression when applied to literals, there are certain operators that do not follow this pattern:</p>
<ul class="simple">
<li><p>Ternary operator (<code class="docutils literal notranslate"><span class="pre">...</span> <span class="pre">?</span> <span class="pre">...</span> <span class="pre">:</span> <span class="pre">...</span></code>),</p></li>
<li><p>Array subscript (<code class="docutils literal notranslate"><span class="pre">&lt;array&gt;[&lt;index&gt;]</span></code>).</p></li>
</ul>
<p>You might expect expressions like <code class="docutils literal notranslate"><span class="pre">255</span> <span class="pre">+</span> <span class="pre">(true</span> <span class="pre">?</span> <span class="pre">1</span> <span class="pre">:</span> <span class="pre">0)</span></code> or <code class="docutils literal notranslate"><span class="pre">255</span> <span class="pre">+</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3][0]</span></code> to be equivalent to using the literal 256
directly, but in fact they are computed within the type <code class="docutils literal notranslate"><span class="pre">uint8</span></code> and can overflow.</p>
</div>
<p>Any operator that can be applied to integers can also be applied to number literal expressions as
long as the operands are integers. If any of the two is fractional, bit operations are disallowed
and exponentiation is disallowed if the exponent is fractional (because that might result in
a non-rational number).</p>
<p>Shifts and exponentiation with literal numbers as left (or base) operand and integer types
as the right (exponent) operand are always performed
in the <code class="docutils literal notranslate"><span class="pre">uint256</span></code> (for non-negative literals) or <code class="docutils literal notranslate"><span class="pre">int256</span></code> (for a negative literals) type,
regardless of the type of the right (exponent) operand.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Division on integer literals used to truncate in Solidity prior to version 0.4.0, but it now converts into a rational number, i.e. <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">/</span> <span class="pre">2</span></code> is not equal to <code class="docutils literal notranslate"><span class="pre">2</span></code>, but to <code class="docutils literal notranslate"><span class="pre">2.5</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Solidity has a number literal type for each rational number.
Integer literals and rational number literals belong to number literal types.
Moreover, all number literal expressions (i.e. the expressions that
contain only number literals and operators) belong to number literal
types.  So the number literal expressions <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">2</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">+</span> <span class="pre">1</span></code> both
belong to the same number literal type for the rational number three.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Number literal expressions are converted into a non-literal type as soon as they are used with non-literal
expressions. Disregarding types, the value of the expression assigned to <code class="docutils literal notranslate"><span class="pre">b</span></code>
below evaluates to an integer. Because <code class="docutils literal notranslate"><span class="pre">a</span></code> is of type <code class="docutils literal notranslate"><span class="pre">uint128</span></code>, the
expression <code class="docutils literal notranslate"><span class="pre">2.5</span> <span class="pre">+</span> <span class="pre">a</span></code> has to have a proper type, though. Since there is no common type
for the type of <code class="docutils literal notranslate"><span class="pre">2.5</span></code> and <code class="docutils literal notranslate"><span class="pre">uint128</span></code>, the Solidity compiler does not accept
this code.</p>
</div>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=dWludDEyOCBhID0gMTsKdWludDEyOCBiID0gMi41ICsgYSArIDAuNTs=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">uint128</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="kt">uint128</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">.</span><span class="m m-Decimal">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span>a<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">.</span><span class="m m-Decimal">5</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="string-literals-and-types">
<span id="string-literals"></span><span id="index-10"></span><h3>String Literals and Types<a class="headerlink" href="#string-literals-and-types" title="Permalink to this heading"></a></h3>
<p>String literals are written with either double or single-quotes (<code class="docutils literal notranslate"><span class="pre">&quot;foo&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">'bar'</span></code>), and they can also be split into multiple consecutive parts (<code class="docutils literal notranslate"><span class="pre">&quot;foo&quot;</span> <span class="pre">&quot;bar&quot;</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">&quot;foobar&quot;</span></code>) which can be helpful when dealing with long strings.  They do not imply trailing zeroes as in C; <code class="docutils literal notranslate"><span class="pre">&quot;foo&quot;</span></code> represents three bytes, not four.  As with integer literals, their type can vary, but they are implicitly convertible to <code class="docutils literal notranslate"><span class="pre">bytes1</span></code>, …, <code class="docutils literal notranslate"><span class="pre">bytes32</span></code>, if they fit, to <code class="docutils literal notranslate"><span class="pre">bytes</span></code> and to <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
<p>For example, with <code class="docutils literal notranslate"><span class="pre">bytes32</span> <span class="pre">samevar</span> <span class="pre">=</span> <span class="pre">&quot;stringliteral&quot;</span></code> the string literal is interpreted in its raw byte form when assigned to a <code class="docutils literal notranslate"><span class="pre">bytes32</span></code> type.</p>
<p>String literals can only contain printable ASCII characters, which means the characters between and including 0x20 .. 0x7E.</p>
<p>Additionally, string literals also support the following escape characters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\&lt;newline&gt;</span></code> (escapes an actual newline)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\\</span></code> (backslash)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\'</span></code> (single quote)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\&quot;</span></code> (double quote)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\n</span></code> (newline)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\r</span></code> (carriage return)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\t</span></code> (tab)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\xNN</span></code> (hex escape, see below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\uNNNN</span></code> (unicode escape, see below)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">\xNN</span></code> takes a hex value and inserts the appropriate byte, while <code class="docutils literal notranslate"><span class="pre">\uNNNN</span></code> takes a Unicode codepoint and inserts an UTF-8 sequence.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Until version 0.8.0 there were three additional escape sequences: <code class="docutils literal notranslate"><span class="pre">\b</span></code>, <code class="docutils literal notranslate"><span class="pre">\f</span></code> and <code class="docutils literal notranslate"><span class="pre">\v</span></code>.
They are commonly available in other languages but rarely needed in practice.
If you do need them, they can still be inserted via hexadecimal escapes, i.e. <code class="docutils literal notranslate"><span class="pre">\x08</span></code>, <code class="docutils literal notranslate"><span class="pre">\x0c</span></code>
and <code class="docutils literal notranslate"><span class="pre">\x0b</span></code>, respectively, just as any other ASCII character.</p>
</div>
<p>The string in the following example has a length of ten bytes.
It starts with a newline byte, followed by a double quote, a single
quote a backslash character and then (without separator) the
character sequence <code class="docutils literal notranslate"><span class="pre">abcdef</span></code>.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=IlxuXCJcJ1xcYWJjXApkZWYi" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;\n\&quot;</span><span class="err">\&#39;\\</span>abc<span class="err">\</span>
def<span class="err">&quot;</span>
</pre></div>
</div>
<p>Any Unicode line terminator which is not a newline (i.e. LF, VF, FF, CR, NEL, LS, PS) is considered to
terminate the string literal. Newline only terminates the string literal if it is not preceded by a <code class="docutils literal notranslate"><span class="pre">\</span></code>.</p>
</section>
<section id="unicode-literals">
<span id="index-11"></span><h3>Unicode Literals<a class="headerlink" href="#unicode-literals" title="Permalink to this heading"></a></h3>
<p>While regular string literals can only contain ASCII, Unicode literals – prefixed with the keyword <code class="docutils literal notranslate"><span class="pre">unicode</span></code> – can contain any valid UTF-8 sequence.
They also support the very same escape sequences as regular string literals.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=c3RyaW5nIG1lbW9yeSBhID0gdW5pY29kZSJIZWxsbyDwn5iDIjs=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span>unicode<span class="s2">&quot;Hello 😃&quot;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="hexadecimal-literals">
<span id="index-12"></span><h3>Hexadecimal Literals<a class="headerlink" href="#hexadecimal-literals" title="Permalink to this heading"></a></h3>
<p>Hexadecimal literals are prefixed with the keyword <code class="docutils literal notranslate"><span class="pre">hex</span></code> and are enclosed in double
or single-quotes (<code class="docutils literal notranslate"><span class="pre">hex&quot;001122FF&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">hex'0011_22_FF'</span></code>). Their content must be
hexadecimal digits which can optionally use a single underscore as separator between
byte boundaries. The value of the literal will be the binary representation
of the hexadecimal sequence.</p>
<p>Multiple hexadecimal literals separated by whitespace are concatenated into a single literal:
<code class="docutils literal notranslate"><span class="pre">hex&quot;00112233&quot;</span> <span class="pre">hex&quot;44556677&quot;</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">hex&quot;0011223344556677&quot;</span></code></p>
<p>Hexadecimal literals in some ways behave like <a class="reference internal" href="#string-literals"><span class="std std-ref">string literals</span></a> but are not
implicitly convertible to the <code class="docutils literal notranslate"><span class="pre">string</span></code> type.</p>
</section>
<section id="enums">
<span id="index-13"></span><span id="id9"></span><h3>Enums<a class="headerlink" href="#enums" title="Permalink to this heading"></a></h3>
<p>Enums are one way to create a user-defined type in Solidity. They are explicitly convertible
to and from all integer types but implicit conversion is not allowed.  The explicit conversion
from integer checks at runtime that the value lies inside the range of the enum and causes a
<a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">Panic error</span></a> otherwise.
Enums require at least one member, and its default value when declared is the first member.
Enums cannot have more than 256 members.</p>
<p>The data representation is the same as for enums in C: The options are represented by
subsequent unsigned integer values starting from <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">type(NameOfEnum).min</span></code> and <code class="docutils literal notranslate"><span class="pre">type(NameOfEnum).max</span></code> you can get the
smallest and respectively largest value of the given enum.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguODsKCmNvbnRyYWN0IHRlc3QgewogICAgZW51bSBBY3Rpb25DaG9pY2VzIHsgR29MZWZ0LCBHb1JpZ2h0LCBHb1N0cmFpZ2h0LCBTaXRTdGlsbCB9CiAgICBBY3Rpb25DaG9pY2VzIGNob2ljZTsKICAgIEFjdGlvbkNob2ljZXMgY29uc3RhbnQgZGVmYXVsdENob2ljZSA9IEFjdGlvbkNob2ljZXMuR29TdHJhaWdodDsKCiAgICBmdW5jdGlvbiBzZXRHb1N0cmFpZ2h0KCkgcHVibGljIHsKICAgICAgICBjaG9pY2UgPSBBY3Rpb25DaG9pY2VzLkdvU3RyYWlnaHQ7CiAgICB9CgogICAgLy8gU2luY2UgZW51bSB0eXBlcyBhcmUgbm90IHBhcnQgb2YgdGhlIEFCSSwgdGhlIHNpZ25hdHVyZSBvZiAiZ2V0Q2hvaWNlIgogICAgLy8gd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGNoYW5nZWQgdG8gImdldENob2ljZSgpIHJldHVybnMgKHVpbnQ4KSIKICAgIC8vIGZvciBhbGwgbWF0dGVycyBleHRlcm5hbCB0byBTb2xpZGl0eS4KICAgIGZ1bmN0aW9uIGdldENob2ljZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKEFjdGlvbkNob2ljZXMpIHsKICAgICAgICByZXR1cm4gY2hvaWNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldERlZmF1bHRDaG9pY2UoKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHVpbnQoZGVmYXVsdENob2ljZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TGFyZ2VzdFZhbHVlKCkgcHVibGljIHB1cmUgcmV0dXJucyAoQWN0aW9uQ2hvaWNlcykgewogICAgICAgIHJldHVybiB0eXBlKEFjdGlvbkNob2ljZXMpLm1heDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTbWFsbGVzdFZhbHVlKCkgcHVibGljIHB1cmUgcmV0dXJucyAoQWN0aW9uQ2hvaWNlcykgewogICAgICAgIHJldHVybiB0eXBlKEFjdGlvbkNob2ljZXMpLm1pbjsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.8</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">test</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">enum</span><span class="w"> </span><span class="nv">ActionChoices</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>GoLeft<span class="p">,</span><span class="w"> </span>GoRight<span class="p">,</span><span class="w"> </span>GoStraight<span class="p">,</span><span class="w"> </span>SitStill<span class="w"> </span><span class="p">}</span>
<span class="w">    </span>ActionChoices<span class="w"> </span>choice<span class="p">;</span>
<span class="w">    </span>ActionChoices<span class="w"> </span><span class="kt">constant</span><span class="w"> </span>defaultChoice<span class="w"> </span><span class="o">=</span><span class="w"> </span>ActionChoices<span class="p">.</span>GoStraight<span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setGoStraight</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>choice<span class="w"> </span><span class="o">=</span><span class="w"> </span>ActionChoices<span class="p">.</span>GoStraight<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Since enum types are not part of the ABI, the signature of &quot;getChoice&quot;</span>
<span class="w">    </span><span class="c1">// will automatically be changed to &quot;getChoice() returns (uint8)&quot;</span>
<span class="w">    </span><span class="c1">// for all matters external to Solidity.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getChoice</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>ActionChoices<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>choice<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getDefaultChoice</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">uint</span><span class="p">(</span>defaultChoice<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getLargestValue</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>ActionChoices<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>type<span class="p">(</span>ActionChoices<span class="p">).</span>max<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getSmallestValue</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>ActionChoices<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>type<span class="p">(</span>ActionChoices<span class="p">).</span>min<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Enums can also be declared on the file level, outside of contract or library definitions.</p>
</div>
</section>
<section id="user-defined-value-types">
<span id="index-14"></span><span id="id10"></span><h3>User-defined Value Types<a class="headerlink" href="#user-defined-value-types" title="Permalink to this heading"></a></h3>
<p>A user-defined value type allows creating a zero cost abstraction over an elementary value type.
This is similar to an alias, but with stricter type requirements.</p>
<p>A user-defined value type is defined using <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">C</span> <span class="pre">is</span> <span class="pre">V</span></code>, where <code class="docutils literal notranslate"><span class="pre">C</span></code> is the name of the newly
introduced type and <code class="docutils literal notranslate"><span class="pre">V</span></code> has to be a built-in value type (the “underlying type”). The function
<code class="docutils literal notranslate"><span class="pre">C.wrap</span></code> is used to convert from the underlying type to the custom type. Similarly, the
function <code class="docutils literal notranslate"><span class="pre">C.unwrap</span></code> is used to convert from the custom type to the underlying type.</p>
<p>The type <code class="docutils literal notranslate"><span class="pre">C</span></code> does not have any operators or attached member functions. In particular, even the
operator <code class="docutils literal notranslate"><span class="pre">==</span></code> is not defined. Explicit and implicit conversions to and from other types are
disallowed.</p>
<p>The data-representation of values of such types are inherited from the underlying type
and the underlying type is also used in the ABI.</p>
<p>The following example illustrates a custom type <code class="docutils literal notranslate"><span class="pre">UFixed256x18</span></code> representing a decimal fixed point
type with 18 decimals and a minimal library to do arithmetic operations on the type.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguODsKCi8vIFJlcHJlc2VudCBhIDE4IGRlY2ltYWwsIDI1NiBiaXQgd2lkZSBmaXhlZCBwb2ludCB0eXBlIHVzaW5nIGEgdXNlci1kZWZpbmVkIHZhbHVlIHR5cGUuCnR5cGUgVUZpeGVkMjU2eDE4IGlzIHVpbnQyNTY7CgovLy8gQSBtaW5pbWFsIGxpYnJhcnkgdG8gZG8gZml4ZWQgcG9pbnQgb3BlcmF0aW9ucyBvbiBVRml4ZWQyNTZ4MTguCmxpYnJhcnkgRml4ZWRNYXRoIHsKICAgIHVpbnQgY29uc3RhbnQgbXVsdGlwbGllciA9IDEwKioxODsKCiAgICAvLy8gQWRkcyB0d28gVUZpeGVkMjU2eDE4IG51bWJlcnMuIFJldmVydHMgb24gb3ZlcmZsb3csIHJlbHlpbmcgb24gY2hlY2tlZAogICAgLy8vIGFyaXRobWV0aWMgb24gdWludDI1Ni4KICAgIGZ1bmN0aW9uIGFkZChVRml4ZWQyNTZ4MTggYSwgVUZpeGVkMjU2eDE4IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAoVUZpeGVkMjU2eDE4KSB7CiAgICAgICAgcmV0dXJuIFVGaXhlZDI1NngxOC53cmFwKFVGaXhlZDI1NngxOC51bndyYXAoYSkgKyBVRml4ZWQyNTZ4MTgudW53cmFwKGIpKTsKICAgIH0KICAgIC8vLyBNdWx0aXBsaWVzIFVGaXhlZDI1NngxOCBhbmQgdWludDI1Ni4gUmV2ZXJ0cyBvbiBvdmVyZmxvdywgcmVseWluZyBvbiBjaGVja2VkCiAgICAvLy8gYXJpdGhtZXRpYyBvbiB1aW50MjU2LgogICAgZnVuY3Rpb24gbXVsKFVGaXhlZDI1NngxOCBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAoVUZpeGVkMjU2eDE4KSB7CiAgICAgICAgcmV0dXJuIFVGaXhlZDI1NngxOC53cmFwKFVGaXhlZDI1NngxOC51bndyYXAoYSkgKiBiKTsKICAgIH0KICAgIC8vLyBUYWtlIHRoZSBmbG9vciBvZiBhIFVGaXhlZDI1NngxOCBudW1iZXIuCiAgICAvLy8gQHJldHVybiB0aGUgbGFyZ2VzdCBpbnRlZ2VyIHRoYXQgZG9lcyBub3QgZXhjZWVkIGBhYC4KICAgIGZ1bmN0aW9uIGZsb29yKFVGaXhlZDI1NngxOCBhKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gVUZpeGVkMjU2eDE4LnVud3JhcChhKSAvIG11bHRpcGxpZXI7CiAgICB9CiAgICAvLy8gVHVybnMgYSB1aW50MjU2IGludG8gYSBVRml4ZWQyNTZ4MTggb2YgdGhlIHNhbWUgdmFsdWUuCiAgICAvLy8gUmV2ZXJ0cyBpZiB0aGUgaW50ZWdlciBpcyB0b28gbGFyZ2UuCiAgICBmdW5jdGlvbiB0b1VGaXhlZDI1NngxOCh1aW50MjU2IGEpIGludGVybmFsIHB1cmUgcmV0dXJucyAoVUZpeGVkMjU2eDE4KSB7CiAgICAgICAgcmV0dXJuIFVGaXhlZDI1NngxOC53cmFwKGEgKiBtdWx0aXBsaWVyKTsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.8</span><span class="p">;</span>

<span class="c1">// Represent a 18 decimal, 256 bit wide fixed point type using a user-defined value type.</span>
type<span class="w"> </span>UFixed256x18<span class="w"> </span><span class="kt">is</span><span class="w"> </span><span class="kt">uint256</span><span class="p">;</span>

<span class="c1">/// A minimal library to do fixed point operations on UFixed256x18.</span>
<span class="kt">library</span><span class="w"> </span>FixedMath<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>multiplier<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="o">**</span><span class="m m-Decimal">18</span><span class="p">;</span>

<span class="w">    </span><span class="c1">/// Adds two UFixed256x18 numbers. Reverts on overflow, relying on checked</span>
<span class="w">    </span><span class="c1">/// arithmetic on uint256.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">add</span><span class="p">(</span>UFixed256x18<span class="w"> </span>a<span class="p">,</span><span class="w"> </span>UFixed256x18<span class="w"> </span>b<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>UFixed256x18<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>UFixed256x18<span class="p">.</span>wrap<span class="p">(</span>UFixed256x18<span class="p">.</span>unwrap<span class="p">(</span>a<span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span>UFixed256x18<span class="p">.</span>unwrap<span class="p">(</span>b<span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">/// Multiplies UFixed256x18 and uint256. Reverts on overflow, relying on checked</span>
<span class="w">    </span><span class="c1">/// arithmetic on uint256.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">mul</span><span class="p">(</span>UFixed256x18<span class="w"> </span>a<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>UFixed256x18<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>UFixed256x18<span class="p">.</span>wrap<span class="p">(</span>UFixed256x18<span class="p">.</span>unwrap<span class="p">(</span>a<span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span>b<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">/// Take the floor of a UFixed256x18 number.</span>
<span class="w">    </span><span class="c1">/// @return the largest integer that does not exceed `a`.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">floor</span><span class="p">(</span>UFixed256x18<span class="w"> </span>a<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>UFixed256x18<span class="p">.</span>unwrap<span class="p">(</span>a<span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span>multiplier<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">/// Turns a uint256 into a UFixed256x18 of the same value.</span>
<span class="w">    </span><span class="c1">/// Reverts if the integer is too large.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">toUFixed256x18</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">a</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>UFixed256x18<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>UFixed256x18<span class="p">.</span>wrap<span class="p">(</span>a<span class="w"> </span><span class="o">*</span><span class="w"> </span>multiplier<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notice how <code class="docutils literal notranslate"><span class="pre">UFixed256x18.wrap</span></code> and <code class="docutils literal notranslate"><span class="pre">FixedMath.toUFixed256x18</span></code> have the same signature but
perform two very different operations: The <code class="docutils literal notranslate"><span class="pre">UFixed256x18.wrap</span></code> function returns a <code class="docutils literal notranslate"><span class="pre">UFixed256x18</span></code>
that has the same data representation as the input, whereas <code class="docutils literal notranslate"><span class="pre">toUFixed256x18</span></code> returns a
<code class="docutils literal notranslate"><span class="pre">UFixed256x18</span></code> that has the same numerical value.</p>
</section>
<section id="function-types">
<span id="index-15"></span><span id="id11"></span><h3>Function Types<a class="headerlink" href="#function-types" title="Permalink to this heading"></a></h3>
<p>Function types are the types of functions. Variables of function type
can be assigned from functions and function parameters of function type
can be used to pass functions to and return functions from function calls.
Function types come in two flavours - <em>internal</em> and <em>external</em> functions:</p>
<p>Internal functions can only be called inside the current contract (more specifically,
inside the current code unit, which also includes internal library functions
and inherited functions) because they cannot be executed outside of the
context of the current contract. Calling an internal function is realized
by jumping to its entry label, just like when calling a function of the current
contract internally.</p>
<p>External functions consist of an address and a function signature and they can
be passed via and returned from external function calls.</p>
<p>Function types are notated as follows:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=ZnVuY3Rpb24gKDxwYXJhbWV0ZXIgdHlwZXM+KSB7aW50ZXJuYWx8ZXh0ZXJuYWx9IFtwdXJlfHZpZXd8cGF5YWJsZV0gW3JldHVybnMgKDxyZXR1cm4gdHlwZXM+KV0=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">function</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span>parameter<span class="w"> </span>types<span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="kt">internal</span><span class="o">|</span><span class="kt">external</span><span class="p">}</span><span class="w"> </span><span class="p">[</span>pure<span class="o">|</span>view<span class="o">|</span><span class="kt">payable</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="kt">return</span><span class="w"> </span>types<span class="o">&gt;</span><span class="p">)]</span>
</pre></div>
</div>
<p>In contrast to the parameter types, the return types cannot be empty - if the
function type should not return anything, the whole <code class="docutils literal notranslate"><span class="pre">returns</span> <span class="pre">(&lt;return</span> <span class="pre">types&gt;)</span></code>
part has to be omitted.</p>
<p>By default, function types are internal, so the <code class="docutils literal notranslate"><span class="pre">internal</span></code> keyword can be
omitted. Note that this only applies to function types. Visibility has
to be specified explicitly for functions defined in contracts, they
do not have a default.</p>
<p>Conversions:</p>
<p>A function type <code class="docutils literal notranslate"><span class="pre">A</span></code> is implicitly convertible to a function type <code class="docutils literal notranslate"><span class="pre">B</span></code> if and only if
their parameter types are identical, their return types are identical,
their internal/external property is identical and the state mutability of <code class="docutils literal notranslate"><span class="pre">A</span></code>
is more restrictive than the state mutability of <code class="docutils literal notranslate"><span class="pre">B</span></code>. In particular:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pure</span></code> functions can be converted to <code class="docutils literal notranslate"><span class="pre">view</span></code> and <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> functions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">view</span></code> functions can be converted to <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> functions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">payable</span></code> functions can be converted to <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> functions</p></li>
</ul>
<p>No other conversions between function types are possible.</p>
<p>The rule about <code class="docutils literal notranslate"><span class="pre">payable</span></code> and <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> might be a little
confusing, but in essence, if a function is <code class="docutils literal notranslate"><span class="pre">payable</span></code>, this means that it
also accepts a payment of zero Ether, so it also is <code class="docutils literal notranslate"><span class="pre">non-payable</span></code>.
On the other hand, a <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> function will reject Ether sent to it,
so <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> functions cannot be converted to <code class="docutils literal notranslate"><span class="pre">payable</span></code> functions.
To clarify, rejecting ether is more restrictive than not rejecting ether.
This means you can override a payable function with a non-payable but not the
other way around.</p>
<p>Additionally, When you define a <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> function pointer,
the compiler does not enforce that the pointed function will actually reject ether.
Instead, it enforces that the function pointer is never used to send ether.
Which makes it possible to assign a <code class="docutils literal notranslate"><span class="pre">payable</span></code> function pointer to a <code class="docutils literal notranslate"><span class="pre">non-payable</span></code>
function pointer ensuring both types behave the same way, i.e, both cannot be used
to send ether.</p>
<p>If a function type variable is not initialised, calling it results
in a <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">Panic error</span></a>. The same happens if you call a function after using <code class="docutils literal notranslate"><span class="pre">delete</span></code>
on it.</p>
<p>If external function types are used outside of the context of Solidity,
they are treated as the <code class="docutils literal notranslate"><span class="pre">function</span></code> type, which encodes the address
followed by the function identifier together in a single <code class="docutils literal notranslate"><span class="pre">bytes24</span></code> type.</p>
<p>Note that public functions of the current contract can be used both as an
internal and as an external function. To use <code class="docutils literal notranslate"><span class="pre">f</span></code> as an internal function,
just use <code class="docutils literal notranslate"><span class="pre">f</span></code>, if you want to use its external form, use <code class="docutils literal notranslate"><span class="pre">this.f</span></code>.</p>
<p>A function of an internal type can be assigned to a variable of an internal function type regardless
of where it is defined.
This includes private, internal and public functions of both contracts and libraries as well as free
functions.
External function types, on the other hand, are only compatible with public and external contract
functions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>External functions with <code class="docutils literal notranslate"><span class="pre">calldata</span></code> parameters are incompatible with external function types with <code class="docutils literal notranslate"><span class="pre">calldata</span></code> parameters.
They are compatible with the corresponding types with <code class="docutils literal notranslate"><span class="pre">memory</span></code> parameters instead.
For example, there is no function that can be pointed at by a value of type <code class="docutils literal notranslate"><span class="pre">function</span> <span class="pre">(string</span> <span class="pre">calldata)</span> <span class="pre">external</span></code> while
<code class="docutils literal notranslate"><span class="pre">function</span> <span class="pre">(string</span> <span class="pre">memory)</span> <span class="pre">external</span></code> can point at both <code class="docutils literal notranslate"><span class="pre">function</span> <span class="pre">f(string</span> <span class="pre">memory)</span> <span class="pre">external</span> <span class="pre">{}</span></code> and
<code class="docutils literal notranslate"><span class="pre">function</span> <span class="pre">g(string</span> <span class="pre">calldata)</span> <span class="pre">external</span> <span class="pre">{}</span></code>.
This is because for both locations the arguments are passed to the function in the same way.
The caller cannot pass its calldata directly to an external function and always ABI-encodes the arguments into memory.
Marking the parameters as <code class="docutils literal notranslate"><span class="pre">calldata</span></code> only affects the implementation of the external function and is
meaningless in a function pointer on the caller’s side.</p>
</div>
<p>Libraries are excluded because they require a <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> and use <a class="reference internal" href="contracts.html#library-selectors"><span class="std std-ref">a different ABI
convention for their selectors</span></a>.
Functions declared in interfaces do not have definitions so pointing at them does not make sense either.</p>
<p>Members:</p>
<p>External (or public) functions have the following members:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.address</span></code> returns the address of the contract of the function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.selector</span></code> returns the <a class="reference internal" href="abi-spec.html#abi-function-selector"><span class="std std-ref">ABI function selector</span></a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>External (or public) functions used to have the additional members
<code class="docutils literal notranslate"><span class="pre">.gas(uint)</span></code> and <code class="docutils literal notranslate"><span class="pre">.value(uint)</span></code>. These were deprecated in Solidity 0.6.2
and removed in Solidity 0.7.0. Instead use <code class="docutils literal notranslate"><span class="pre">{gas:</span> <span class="pre">...}</span></code> and <code class="docutils literal notranslate"><span class="pre">{value:</span> <span class="pre">...}</span></code>
to specify the amount of gas or the amount of wei sent to a function,
respectively. See <a class="reference internal" href="control-structures.html#external-function-calls"><span class="std std-ref">External Function Calls</span></a> for
more information.</p>
</div>
<p>Example that shows how to use the members:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC42LjQgPDAuOS4wOwoKY29udHJhY3QgRXhhbXBsZSB7CiAgICBmdW5jdGlvbiBmKCkgcHVibGljIHBheWFibGUgcmV0dXJucyAoYnl0ZXM0KSB7CiAgICAgICAgYXNzZXJ0KHRoaXMuZi5hZGRyZXNzID09IGFkZHJlc3ModGhpcykpOwogICAgICAgIHJldHVybiB0aGlzLmYuc2VsZWN0b3I7CiAgICB9CgogICAgZnVuY3Rpb24gZygpIHB1YmxpYyB7CiAgICAgICAgdGhpcy5me2dhczogMTAsIHZhbHVlOiA4MDB9KCk7CiAgICB9Cn0=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.6.4</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">Example</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>bytes4<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>assert<span class="p">(</span><span class="kt">this</span><span class="p">.</span>f<span class="p">.</span><span class="kt">address</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="kt">this</span><span class="p">));</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">this</span><span class="p">.</span>f<span class="p">.</span>selector<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">g</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">this</span><span class="p">.</span>f<span class="p">{</span>gas<span class="o">:</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="p">,</span><span class="w"> </span>value<span class="o">:</span><span class="w"> </span><span class="m m-Decimal">800</span><span class="p">}();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example that shows how to use internal function types:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmxpYnJhcnkgQXJyYXlVdGlscyB7CiAgICAvLyBpbnRlcm5hbCBmdW5jdGlvbnMgY2FuIGJlIHVzZWQgaW4gaW50ZXJuYWwgbGlicmFyeSBmdW5jdGlvbnMgYmVjYXVzZQogICAgLy8gdGhleSB3aWxsIGJlIHBhcnQgb2YgdGhlIHNhbWUgY29kZSBjb250ZXh0CiAgICBmdW5jdGlvbiBtYXAodWludFtdIG1lbW9yeSBzZWxmLCBmdW5jdGlvbiAodWludCkgcHVyZSByZXR1cm5zICh1aW50KSBmKQogICAgICAgIGludGVybmFsCiAgICAgICAgcHVyZQogICAgICAgIHJldHVybnMgKHVpbnRbXSBtZW1vcnkgcikKICAgIHsKICAgICAgICByID0gbmV3IHVpbnRbXShzZWxmLmxlbmd0aCk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgc2VsZi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByW2ldID0gZihzZWxmW2ldKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVkdWNlKAogICAgICAgIHVpbnRbXSBtZW1vcnkgc2VsZiwKICAgICAgICBmdW5jdGlvbiAodWludCwgdWludCkgcHVyZSByZXR1cm5zICh1aW50KSBmCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBwdXJlCiAgICAgICAgcmV0dXJucyAodWludCByKQogICAgewogICAgICAgIHIgPSBzZWxmWzBdOwogICAgICAgIGZvciAodWludCBpID0gMTsgaSA8IHNlbGYubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgciA9IGYociwgc2VsZltpXSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJhbmdlKHVpbnQgbGVuZ3RoKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnRbXSBtZW1vcnkgcikgewogICAgICAgIHIgPSBuZXcgdWludFtdKGxlbmd0aCk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByW2ldID0gaTsKICAgICAgICB9CiAgICB9Cn0KCgpjb250cmFjdCBQeXJhbWlkIHsKICAgIHVzaW5nIEFycmF5VXRpbHMgZm9yICo7CgogICAgZnVuY3Rpb24gcHlyYW1pZCh1aW50IGwpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gQXJyYXlVdGlscy5yYW5nZShsKS5tYXAoc3F1YXJlKS5yZWR1Y2Uoc3VtKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzcXVhcmUodWludCB4KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4geCAqIHg7CiAgICB9CgogICAgZnVuY3Rpb24gc3VtKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4geCArIHk7CiAgICB9Cn0=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="kt">library</span><span class="w"> </span>ArrayUtils<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// internal functions can be used in internal library functions because</span>
<span class="w">    </span><span class="c1">// they will be part of the same code context</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">map</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">function</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span>f<span class="p">)</span>
<span class="w">        </span><span class="kt">internal</span>
<span class="w">        </span>pure
<span class="w">        </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>r<span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span>r<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span>self<span class="p">.</span>length<span class="p">);</span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>self<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>r<span class="p">[</span>i<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>f<span class="p">(</span>self<span class="p">[</span>i<span class="p">]);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">reduce</span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>self<span class="p">,</span>
<span class="w">        </span><span class="kt">function</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span>f
<span class="w">    </span><span class="p">)</span>
<span class="w">        </span><span class="kt">internal</span>
<span class="w">        </span>pure
<span class="w">        </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">r</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span>r<span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">];</span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>self<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>r<span class="w"> </span><span class="o">=</span><span class="w"> </span>f<span class="p">(</span>r<span class="p">,</span><span class="w"> </span>self<span class="p">[</span>i<span class="p">]);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">range</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">length</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>r<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>r<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span>length<span class="p">);</span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>r<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>r<span class="p">[</span>i<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>i<span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>


<span class="k">contract</span><span class="w"> </span><span class="ni">Pyramid</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>using<span class="w"> </span>ArrayUtils<span class="w"> </span><span class="kt">for</span><span class="w"> </span><span class="o">*</span><span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">pyramid</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">l</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>ArrayUtils<span class="p">.</span>range<span class="p">(</span>l<span class="p">).</span>map<span class="p">(</span>square<span class="p">).</span>reduce<span class="p">(</span>sum<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">square</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>x<span class="w"> </span><span class="o">*</span><span class="w"> </span>x<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">sum</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">y</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>x<span class="w"> </span><span class="o">+</span><span class="w"> </span>y<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Another example that uses external function types:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjIyIDwwLjkuMDsKCgpjb250cmFjdCBPcmFjbGUgewogICAgc3RydWN0IFJlcXVlc3QgewogICAgICAgIGJ5dGVzIGRhdGE7CiAgICAgICAgZnVuY3Rpb24odWludCkgZXh0ZXJuYWwgY2FsbGJhY2s7CiAgICB9CgogICAgUmVxdWVzdFtdIHByaXZhdGUgcmVxdWVzdHM7CiAgICBldmVudCBOZXdSZXF1ZXN0KHVpbnQpOwoKICAgIGZ1bmN0aW9uIHF1ZXJ5KGJ5dGVzIG1lbW9yeSBkYXRhLCBmdW5jdGlvbih1aW50KSBleHRlcm5hbCBjYWxsYmFjaykgcHVibGljIHsKICAgICAgICByZXF1ZXN0cy5wdXNoKFJlcXVlc3QoZGF0YSwgY2FsbGJhY2spKTsKICAgICAgICBlbWl0IE5ld1JlcXVlc3QocmVxdWVzdHMubGVuZ3RoIC0gMSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVwbHkodWludCByZXF1ZXN0SUQsIHVpbnQgcmVzcG9uc2UpIHB1YmxpYyB7CiAgICAgICAgLy8gSGVyZSBnb2VzIHRoZSBjaGVjayB0aGF0IHRoZSByZXBseSBjb21lcyBmcm9tIGEgdHJ1c3RlZCBzb3VyY2UKICAgICAgICByZXF1ZXN0c1tyZXF1ZXN0SURdLmNhbGxiYWNrKHJlc3BvbnNlKTsKICAgIH0KfQoKCmNvbnRyYWN0IE9yYWNsZVVzZXIgewogICAgT3JhY2xlIGNvbnN0YW50IHByaXZhdGUgT1JBQ0xFX0NPTlNUID0gT3JhY2xlKGFkZHJlc3MoMHgwMDAwMDAwMDIxOWFiNTQwMzU2Y0JCODM5Q2JlMDUzMDNkNzcwNUZhKSk7IC8vIGtub3duIGNvbnRyYWN0CiAgICB1aW50IHByaXZhdGUgZXhjaGFuZ2VSYXRlOwoKICAgIGZ1bmN0aW9uIGJ1eVNvbWV0aGluZygpIHB1YmxpYyB7CiAgICAgICAgT1JBQ0xFX0NPTlNULnF1ZXJ5KCJVU0QiLCB0aGlzLm9yYWNsZVJlc3BvbnNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvcmFjbGVSZXNwb25zZSh1aW50IHJlc3BvbnNlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhPUkFDTEVfQ09OU1QpLAogICAgICAgICAgICAiT25seSBvcmFjbGUgY2FuIGNhbGwgdGhpcy4iCiAgICAgICAgKTsKICAgICAgICBleGNoYW5nZVJhdGUgPSByZXNwb25zZTsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.22</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>


<span class="k">contract</span><span class="w"> </span><span class="ni">Oracle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">Request</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">data</span><span class="p">;</span>
<span class="w">        </span><span class="kt">function</span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>callback<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span>Request<span class="p">[]</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>requests<span class="p">;</span>
<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">NewRequest</span><span class="p">(</span><span class="kt">uint</span><span class="p">);</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">query</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>data<span class="p">,</span><span class="w"> </span><span class="kt">function</span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>callback<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>requests<span class="p">.</span>push<span class="p">(</span>Request<span class="p">(</span>data<span class="p">,</span><span class="w"> </span>callback<span class="p">));</span>
<span class="w">        </span>emit<span class="w"> </span>NewRequest<span class="p">(</span>requests<span class="p">.</span>length<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">reply</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">requestID</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">response</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Here goes the check that the reply comes from a trusted source</span>
<span class="w">        </span>requests<span class="p">[</span>requestID<span class="p">].</span>callback<span class="p">(</span>response<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>


<span class="k">contract</span><span class="w"> </span><span class="ni">OracleUser</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>Oracle<span class="w"> </span><span class="kt">constant</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>ORACLE_CONST<span class="w"> </span><span class="o">=</span><span class="w"> </span>Oracle<span class="p">(</span><span class="kt">address</span><span class="p">(</span><span class="mh">0x00000000219ab540356cBB839Cbe05303d7705Fa</span><span class="p">));</span><span class="w"> </span><span class="c1">// known contract</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="k">private </span><span class="nv">exchangeRate</span><span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">buySomething</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>ORACLE_CONST<span class="p">.</span>query<span class="p">(</span><span class="s2">&quot;USD&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">this</span><span class="p">.</span>oracleResponse<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">oracleResponse</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">response</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>
<span class="w">            </span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span>ORACLE_CONST<span class="p">),</span>
<span class="w">            </span><span class="s2">&quot;Only oracle can call this.&quot;</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span>exchangeRate<span class="w"> </span><span class="o">=</span><span class="w"> </span>response<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lambda or inline functions are planned but not yet supported.</p>
</div>
</section>
</section>
<section id="reference-types">
<span id="index-16"></span><span id="id12"></span><h2>Reference Types<a class="headerlink" href="#reference-types" title="Permalink to this heading"></a></h2>
<p>Values of reference type can be modified through multiple different names.
Contrast this with value types where you get an independent copy whenever
a variable of value type is used. Because of that, reference types have to be handled
more carefully than value types. Currently, reference types comprise structs,
arrays and mappings. If you use a reference type, you always have to explicitly
provide the data area where the type is stored: <code class="docutils literal notranslate"><span class="pre">memory</span></code> (whose lifetime is limited
to an external function call), <code class="docutils literal notranslate"><span class="pre">storage</span></code> (the location where the state variables
are stored, where the lifetime is limited to the lifetime of a contract)
or <code class="docutils literal notranslate"><span class="pre">calldata</span></code> (special data location that contains the function arguments).</p>
<p>An assignment or type conversion that changes the data location will always incur an automatic copy operation,
while assignments inside the same data location only copy in some cases for storage types.</p>
<section id="data-location">
<span id="id13"></span><h3>Data location<a class="headerlink" href="#data-location" title="Permalink to this heading"></a></h3>
<p>Every reference type has an additional
annotation, the “data location”, about where it is stored. There are three data locations:
<code class="docutils literal notranslate"><span class="pre">memory</span></code>, <code class="docutils literal notranslate"><span class="pre">storage</span></code> and <code class="docutils literal notranslate"><span class="pre">calldata</span></code>. Calldata is a non-modifiable,
non-persistent area where function arguments are stored, and behaves mostly like memory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you can, try to use <code class="docutils literal notranslate"><span class="pre">calldata</span></code> as data location because it will avoid copies and
also makes sure that the data cannot be modified. Arrays and structs with <code class="docutils literal notranslate"><span class="pre">calldata</span></code>
data location can also be returned from functions, but it is not possible to
allocate such types.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to version 0.6.9 data location for reference-type arguments was limited to
<code class="docutils literal notranslate"><span class="pre">calldata</span></code> in external functions, <code class="docutils literal notranslate"><span class="pre">memory</span></code> in public functions and either
<code class="docutils literal notranslate"><span class="pre">memory</span></code> or <code class="docutils literal notranslate"><span class="pre">storage</span></code> in internal and private ones.
Now <code class="docutils literal notranslate"><span class="pre">memory</span></code> and <code class="docutils literal notranslate"><span class="pre">calldata</span></code> are allowed in all functions regardless of their visibility.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to version 0.5.0 the data location could be omitted, and would default to different locations
depending on the kind of variable, function type, etc., but all complex types must now give an explicit
data location.</p>
</div>
<section id="data-location-and-assignment-behavior">
<span id="data-location-assignment"></span><h4>Data location and assignment behavior<a class="headerlink" href="#data-location-and-assignment-behavior" title="Permalink to this heading"></a></h4>
<p>Data locations are not only relevant for persistency of data, but also for the semantics of assignments:</p>
<ul class="simple">
<li><p>Assignments between <code class="docutils literal notranslate"><span class="pre">storage</span></code> and <code class="docutils literal notranslate"><span class="pre">memory</span></code> (or from <code class="docutils literal notranslate"><span class="pre">calldata</span></code>)
always create an independent copy.</p></li>
<li><p>Assignments from <code class="docutils literal notranslate"><span class="pre">memory</span></code> to <code class="docutils literal notranslate"><span class="pre">memory</span></code> only create references. This means
that changes to one memory variable are also visible in all other memory
variables that refer to the same data.</p></li>
<li><p>Assignments from <code class="docutils literal notranslate"><span class="pre">storage</span></code> to a <strong>local</strong> storage variable also only
assign a reference.</p></li>
<li><p>All other assignments to <code class="docutils literal notranslate"><span class="pre">storage</span></code> always copy. Examples for this
case are assignments to state variables or to members of local
variables of storage struct type, even if the local variable
itself is just a reference.</p></li>
</ul>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC41LjAgPDAuOS4wOwoKY29udHJhY3QgQyB7CiAgICAvLyBUaGUgZGF0YSBsb2NhdGlvbiBvZiB4IGlzIHN0b3JhZ2UuCiAgICAvLyBUaGlzIGlzIHRoZSBvbmx5IHBsYWNlIHdoZXJlIHRoZQogICAgLy8gZGF0YSBsb2NhdGlvbiBjYW4gYmUgb21pdHRlZC4KICAgIHVpbnRbXSB4OwoKICAgIC8vIFRoZSBkYXRhIGxvY2F0aW9uIG9mIG1lbW9yeUFycmF5IGlzIG1lbW9yeS4KICAgIGZ1bmN0aW9uIGYodWludFtdIG1lbW9yeSBtZW1vcnlBcnJheSkgcHVibGljIHsKICAgICAgICB4ID0gbWVtb3J5QXJyYXk7IC8vIHdvcmtzLCBjb3BpZXMgdGhlIHdob2xlIGFycmF5IHRvIHN0b3JhZ2UKICAgICAgICB1aW50W10gc3RvcmFnZSB5ID0geDsgLy8gd29ya3MsIGFzc2lnbnMgYSBwb2ludGVyLCBkYXRhIGxvY2F0aW9uIG9mIHkgaXMgc3RvcmFnZQogICAgICAgIHlbN107IC8vIGZpbmUsIHJldHVybnMgdGhlIDh0aCBlbGVtZW50CiAgICAgICAgeS5wb3AoKTsgLy8gZmluZSwgbW9kaWZpZXMgeCB0aHJvdWdoIHkKICAgICAgICBkZWxldGUgeDsgLy8gZmluZSwgY2xlYXJzIHRoZSBhcnJheSwgYWxzbyBtb2RpZmllcyB5CiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBkb2VzIG5vdCB3b3JrOyBpdCB3b3VsZCBuZWVkIHRvIGNyZWF0ZSBhIG5ldyB0ZW1wb3JhcnkgLwogICAgICAgIC8vIHVubmFtZWQgYXJyYXkgaW4gc3RvcmFnZSwgYnV0IHN0b3JhZ2UgaXMgInN0YXRpY2FsbHkiIGFsbG9jYXRlZDoKICAgICAgICAvLyB5ID0gbWVtb3J5QXJyYXk7CiAgICAgICAgLy8gU2ltaWxhcmx5LCAiZGVsZXRlIHkiIGlzIG5vdCB2YWxpZCwgYXMgYXNzaWdubWVudHMgdG8gbG9jYWwgdmFyaWFibGVzCiAgICAgICAgLy8gcmVmZXJlbmNpbmcgc3RvcmFnZSBvYmplY3RzIGNhbiBvbmx5IGJlIG1hZGUgZnJvbSBleGlzdGluZyBzdG9yYWdlIG9iamVjdHMuCiAgICAgICAgLy8gSXQgd291bGQgInJlc2V0IiB0aGUgcG9pbnRlciwgYnV0IHRoZXJlIGlzIG5vIHNlbnNpYmxlIGxvY2F0aW9uIGl0IGNvdWxkIHBvaW50IHRvLgogICAgICAgIC8vIEZvciBtb3JlIGRldGFpbHMgc2VlIHRoZSBkb2N1bWVudGF0aW9uIG9mIHRoZSAiZGVsZXRlIiBvcGVyYXRvci4KICAgICAgICAvLyBkZWxldGUgeTsKICAgICAgICBnKHgpOyAvLyBjYWxscyBnLCBoYW5kaW5nIG92ZXIgYSByZWZlcmVuY2UgdG8geAogICAgICAgIGgoeCk7IC8vIGNhbGxzIGggYW5kIGNyZWF0ZXMgYW4gaW5kZXBlbmRlbnQsIHRlbXBvcmFyeSBjb3B5IGluIG1lbW9yeQogICAgfQoKICAgIGZ1bmN0aW9uIGcodWludFtdIHN0b3JhZ2UpIGludGVybmFsIHB1cmUge30KICAgIGZ1bmN0aW9uIGgodWludFtdIG1lbW9yeSkgcHVibGljIHB1cmUge30KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.5.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// The data location of x is storage.</span>
<span class="w">    </span><span class="c1">// This is the only place where the</span>
<span class="w">    </span><span class="c1">// data location can be omitted.</span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>x<span class="p">;</span>

<span class="w">    </span><span class="c1">// The data location of memoryArray is memory.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>memoryArray<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span>memoryArray<span class="p">;</span><span class="w"> </span><span class="c1">// works, copies the whole array to storage</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>storage<span class="w"> </span>y<span class="w"> </span><span class="o">=</span><span class="w"> </span>x<span class="p">;</span><span class="w"> </span><span class="c1">// works, assigns a pointer, data location of y is storage</span>
<span class="w">        </span>y<span class="p">[</span><span class="m m-Decimal">7</span><span class="p">];</span><span class="w"> </span><span class="c1">// fine, returns the 8th element</span>
<span class="w">        </span>y<span class="p">.</span>pop<span class="p">();</span><span class="w"> </span><span class="c1">// fine, modifies x through y</span>
<span class="w">        </span>delete<span class="w"> </span>x<span class="p">;</span><span class="w"> </span><span class="c1">// fine, clears the array, also modifies y</span>
<span class="w">        </span><span class="c1">// The following does not work; it would need to create a new temporary /</span>
<span class="w">        </span><span class="c1">// unnamed array in storage, but storage is &quot;statically&quot; allocated:</span>
<span class="w">        </span><span class="c1">// y = memoryArray;</span>
<span class="w">        </span><span class="c1">// Similarly, &quot;delete y&quot; is not valid, as assignments to local variables</span>
<span class="w">        </span><span class="c1">// referencing storage objects can only be made from existing storage objects.</span>
<span class="w">        </span><span class="c1">// It would &quot;reset&quot; the pointer, but there is no sensible location it could point to.</span>
<span class="w">        </span><span class="c1">// For more details see the documentation of the &quot;delete&quot; operator.</span>
<span class="w">        </span><span class="c1">// delete y;</span>
<span class="w">        </span>g<span class="p">(</span>x<span class="p">);</span><span class="w"> </span><span class="c1">// calls g, handing over a reference to x</span>
<span class="w">        </span>h<span class="p">(</span>x<span class="p">);</span><span class="w"> </span><span class="c1">// calls h and creates an independent, temporary copy in memory</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">g</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>storage<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">h</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="arrays">
<span id="index-17"></span><span id="id14"></span><h3>Arrays<a class="headerlink" href="#arrays" title="Permalink to this heading"></a></h3>
<p>Arrays can have a compile-time fixed size, or they can have a dynamic size.</p>
<p>The type of an array of fixed size <code class="docutils literal notranslate"><span class="pre">k</span></code> and element type <code class="docutils literal notranslate"><span class="pre">T</span></code> is written as <code class="docutils literal notranslate"><span class="pre">T[k]</span></code>,
and an array of dynamic size as <code class="docutils literal notranslate"><span class="pre">T[]</span></code>.</p>
<p>For example, an array of 5 dynamic arrays of <code class="docutils literal notranslate"><span class="pre">uint</span></code> is written as
<code class="docutils literal notranslate"><span class="pre">uint[][5]</span></code>. The notation is reversed compared to some other languages. In
Solidity, <code class="docutils literal notranslate"><span class="pre">X[3]</span></code> is always an array containing three elements of type <code class="docutils literal notranslate"><span class="pre">X</span></code>,
even if <code class="docutils literal notranslate"><span class="pre">X</span></code> is itself an array. This is not the case in other languages such
as C.</p>
<p>Indices are zero-based, and access is in the opposite direction of the
declaration.</p>
<p>For example, if you have a variable <code class="docutils literal notranslate"><span class="pre">uint[][5]</span> <span class="pre">memory</span> <span class="pre">x</span></code>, you access the
seventh <code class="docutils literal notranslate"><span class="pre">uint</span></code> in the third dynamic array using <code class="docutils literal notranslate"><span class="pre">x[2][6]</span></code>, and to access the
third dynamic array, use <code class="docutils literal notranslate"><span class="pre">x[2]</span></code>. Again,
if you have an array <code class="docutils literal notranslate"><span class="pre">T[5]</span> <span class="pre">a</span></code> for a type <code class="docutils literal notranslate"><span class="pre">T</span></code> that can also be an array,
then <code class="docutils literal notranslate"><span class="pre">a[2]</span></code> always has type <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p>
<p>Array elements can be of any type, including mapping or struct. The general
restrictions for types apply, in that mappings can only be stored in the
<code class="docutils literal notranslate"><span class="pre">storage</span></code> data location and publicly-visible functions need parameters that are <a class="reference internal" href="abi-spec.html#abi"><span class="std std-ref">ABI types</span></a>.</p>
<p>It is possible to mark state variable arrays <code class="docutils literal notranslate"><span class="pre">public</span></code> and have Solidity create a <a class="reference internal" href="contracts.html#visibility-and-getters"><span class="std std-ref">getter</span></a>.
The numeric index becomes a required parameter for the getter.</p>
<p>Accessing an array past its end causes a failing assertion. Methods <code class="docutils literal notranslate"><span class="pre">.push()</span></code> and <code class="docutils literal notranslate"><span class="pre">.push(value)</span></code> can be used
to append a new element at the end of a dynamically-sized array, where <code class="docutils literal notranslate"><span class="pre">.push()</span></code> appends a zero-initialized element and returns
a reference to it.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dynamically-sized arrays can only be resized in storage.
In memory, such arrays can be of arbitrary size but the size cannot be changed once an array is allocated.</p>
</div>
<section id="bytes-and-string-as-arrays">
<span id="bytes"></span><span id="strings"></span><span id="index-18"></span><h4><code class="docutils literal notranslate"><span class="pre">bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">string</span></code> as Arrays<a class="headerlink" href="#bytes-and-string-as-arrays" title="Permalink to this heading"></a></h4>
<p>Variables of type <code class="docutils literal notranslate"><span class="pre">bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">string</span></code> are special arrays. The <code class="docutils literal notranslate"><span class="pre">bytes</span></code> type is similar to <code class="docutils literal notranslate"><span class="pre">bytes1[]</span></code>,
but it is packed tightly in calldata and memory. <code class="docutils literal notranslate"><span class="pre">string</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">bytes</span></code> but does not allow
length or index access.</p>
<p>Solidity does not have string manipulation functions, but there are
third-party string libraries. You can also compare two strings by their keccak256-hash using
<code class="docutils literal notranslate"><span class="pre">keccak256(abi.encodePacked(s1))</span> <span class="pre">==</span> <span class="pre">keccak256(abi.encodePacked(s2))</span></code> and
concatenate two strings using <code class="docutils literal notranslate"><span class="pre">string.concat(s1,</span> <span class="pre">s2)</span></code>.</p>
<p>You should use <code class="docutils literal notranslate"><span class="pre">bytes</span></code> over <code class="docutils literal notranslate"><span class="pre">bytes1[]</span></code> because it is cheaper,
since using <code class="docutils literal notranslate"><span class="pre">bytes1[]</span></code> in <code class="docutils literal notranslate"><span class="pre">memory</span></code> adds 31 padding bytes between the elements. Note that in <code class="docutils literal notranslate"><span class="pre">storage</span></code>, the
padding is absent due to tight packing, see <a class="reference internal" href="internals/layout_in_storage.html#bytes-and-string"><span class="std std-ref">bytes and string</span></a>. As a general rule,
use <code class="docutils literal notranslate"><span class="pre">bytes</span></code> for arbitrary-length raw byte data and <code class="docutils literal notranslate"><span class="pre">string</span></code> for arbitrary-length
string (UTF-8) data. If you can limit the length to a certain number of bytes,
always use one of the value types <code class="docutils literal notranslate"><span class="pre">bytes1</span></code> to <code class="docutils literal notranslate"><span class="pre">bytes32</span></code> because they are much cheaper.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to access the byte-representation of a string <code class="docutils literal notranslate"><span class="pre">s</span></code>, use
<code class="docutils literal notranslate"><span class="pre">bytes(s).length</span></code> / <code class="docutils literal notranslate"><span class="pre">bytes(s)[7]</span> <span class="pre">=</span> <span class="pre">'x';</span></code>. Keep in mind
that you are accessing the low-level bytes of the UTF-8 representation,
and not the individual characters.</p>
</div>
</section>
<section id="the-functions-bytes-concat-and-string-concat">
<span id="string-concat"></span><span id="bytes-concat"></span><span id="index-19"></span><h4>The functions <code class="docutils literal notranslate"><span class="pre">bytes.concat</span></code> and <code class="docutils literal notranslate"><span class="pre">string.concat</span></code><a class="headerlink" href="#the-functions-bytes-concat-and-string-concat" title="Permalink to this heading"></a></h4>
<p>You can concatenate an arbitrary number of <code class="docutils literal notranslate"><span class="pre">string</span></code> values using <code class="docutils literal notranslate"><span class="pre">string.concat</span></code>.
The function returns a single <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">memory</span></code> array that contains the contents of the arguments without padding.
If you want to use parameters of other types that are not implicitly convertible to <code class="docutils literal notranslate"><span class="pre">string</span></code>, you need to convert them to <code class="docutils literal notranslate"><span class="pre">string</span></code> first.</p>
<p>Analogously, the <code class="docutils literal notranslate"><span class="pre">bytes.concat</span></code> function can concatenate an arbitrary number of <code class="docutils literal notranslate"><span class="pre">bytes</span></code> or <code class="docutils literal notranslate"><span class="pre">bytes1</span> <span class="pre">...</span> <span class="pre">bytes32</span></code> values.
The function returns a single <code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">memory</span></code> array that contains the contents of the arguments without padding.
If you want to use string parameters or other types that are not implicitly convertible to <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, you need to convert them to <code class="docutils literal notranslate"><span class="pre">bytes</span></code> or <code class="docutils literal notranslate"><span class="pre">bytes1</span></code>/…/<code class="docutils literal notranslate"><span class="pre">bytes32</span></code> first.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguMTI7Cgpjb250cmFjdCBDIHsKICAgIHN0cmluZyBzID0gIlN0b3JhZ2UiOwogICAgZnVuY3Rpb24gZihieXRlcyBjYWxsZGF0YSBiYywgc3RyaW5nIG1lbW9yeSBzbSwgYnl0ZXMxNiBiKSBwdWJsaWMgdmlldyB7CiAgICAgICAgc3RyaW5nIG1lbW9yeSBjb25jYXRTdHJpbmcgPSBzdHJpbmcuY29uY2F0KHMsIHN0cmluZyhiYyksICJMaXRlcmFsIiwgc20pOwogICAgICAgIGFzc2VydCgoYnl0ZXMocykubGVuZ3RoICsgYmMubGVuZ3RoICsgNyArIGJ5dGVzKHNtKS5sZW5ndGgpID09IGJ5dGVzKGNvbmNhdFN0cmluZykubGVuZ3RoKTsKCiAgICAgICAgYnl0ZXMgbWVtb3J5IGNvbmNhdEJ5dGVzID0gYnl0ZXMuY29uY2F0KGJ5dGVzKHMpLCBiYywgYmNbOjJdLCAiTGl0ZXJhbCIsIGJ5dGVzKHNtKSwgYik7CiAgICAgICAgYXNzZXJ0KChieXRlcyhzKS5sZW5ndGggKyBiYy5sZW5ndGggKyAyICsgNyArIGJ5dGVzKHNtKS5sZW5ndGggKyBiLmxlbmd0aCkgPT0gY29uY2F0Qnl0ZXMubGVuZ3RoKTsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.12</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Storage&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">calldata</span><span class="w"> </span>bc<span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>sm<span class="p">,</span><span class="w"> </span><span class="kt">bytes16</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>concatString<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="p">.</span>concat<span class="p">(</span>s<span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="p">(</span>bc<span class="p">),</span><span class="w"> </span><span class="s2">&quot;Literal&quot;</span><span class="p">,</span><span class="w"> </span>sm<span class="p">);</span>
<span class="w">        </span>assert<span class="p">((</span><span class="kt">bytes</span><span class="p">(</span>s<span class="p">).</span>length<span class="w"> </span><span class="o">+</span><span class="w"> </span>bc<span class="p">.</span>length<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">7</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span>sm<span class="p">).</span>length<span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span>concatString<span class="p">).</span>length<span class="p">);</span>

<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>concatBytes<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">bytes</span><span class="p">.</span>concat<span class="p">(</span><span class="kt">bytes</span><span class="p">(</span>s<span class="p">),</span><span class="w"> </span>bc<span class="p">,</span><span class="w"> </span>bc<span class="p">[</span><span class="o">:</span><span class="m m-Decimal">2</span><span class="p">],</span><span class="w"> </span><span class="s2">&quot;Literal&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span>sm<span class="p">),</span><span class="w"> </span>b<span class="p">);</span>
<span class="w">        </span>assert<span class="p">((</span><span class="kt">bytes</span><span class="p">(</span>s<span class="p">).</span>length<span class="w"> </span><span class="o">+</span><span class="w"> </span>bc<span class="p">.</span>length<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">7</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span>sm<span class="p">).</span>length<span class="w"> </span><span class="o">+</span><span class="w"> </span>b<span class="p">.</span>length<span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>concatBytes<span class="p">.</span>length<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you call <code class="docutils literal notranslate"><span class="pre">string.concat</span></code> or <code class="docutils literal notranslate"><span class="pre">bytes.concat</span></code> without arguments they return an empty array.</p>
</section>
<section id="allocating-memory-arrays">
<span id="index-20"></span><h4>Allocating Memory Arrays<a class="headerlink" href="#allocating-memory-arrays" title="Permalink to this heading"></a></h4>
<p>Memory arrays with dynamic length can be created using the <code class="docutils literal notranslate"><span class="pre">new</span></code> operator.
As opposed to storage arrays, it is <strong>not</strong> possible to resize memory arrays (e.g.
the <code class="docutils literal notranslate"><span class="pre">.push</span></code> member functions are not available).
You either have to calculate the required size in advance
or create a new memory array and copy every element.</p>
<p>As all variables in Solidity, the elements of newly allocated arrays are always initialized
with the <a class="reference internal" href="control-structures.html#default-value"><span class="std std-ref">default value</span></a>.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmNvbnRyYWN0IEMgewogICAgZnVuY3Rpb24gZih1aW50IGxlbikgcHVibGljIHB1cmUgewogICAgICAgIHVpbnRbXSBtZW1vcnkgYSA9IG5ldyB1aW50W10oNyk7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGIgPSBuZXcgYnl0ZXMobGVuKTsKICAgICAgICBhc3NlcnQoYS5sZW5ndGggPT0gNyk7CiAgICAgICAgYXNzZXJ0KGIubGVuZ3RoID09IGxlbik7CiAgICAgICAgYVs2XSA9IDg7CiAgICB9Cn0=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">len</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span><span class="m m-Decimal">7</span><span class="p">);</span>
<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span>len<span class="p">);</span>
<span class="w">        </span>assert<span class="p">(</span>a<span class="p">.</span>length<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">7</span><span class="p">);</span>
<span class="w">        </span>assert<span class="p">(</span>b<span class="p">.</span>length<span class="w"> </span><span class="o">==</span><span class="w"> </span>len<span class="p">);</span>
<span class="w">        </span>a<span class="p">[</span><span class="m m-Decimal">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">8</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="array-literals">
<span id="index-21"></span><h4>Array Literals<a class="headerlink" href="#array-literals" title="Permalink to this heading"></a></h4>
<p>An array literal is a comma-separated list of one or more expressions, enclosed
in square brackets (<code class="docutils literal notranslate"><span class="pre">[...]</span></code>). For example <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">a,</span> <span class="pre">f(3)]</span></code>. The type of the
array literal is determined as follows:</p>
<p>It is always a statically-sized memory array whose length is the
number of expressions.</p>
<p>The base type of the array is the type of the first expression on the list such that all
other expressions can be implicitly converted to it. It is a type error
if this is not possible.</p>
<p>It is not enough that there is a type all the elements can be converted to. One of the elements
has to be of that type.</p>
<p>In the example below, the type of <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> is
<code class="docutils literal notranslate"><span class="pre">uint8[3]</span> <span class="pre">memory</span></code>, because the type of each of these constants is <code class="docutils literal notranslate"><span class="pre">uint8</span></code>. If
you want the result to be a <code class="docutils literal notranslate"><span class="pre">uint[3]</span> <span class="pre">memory</span></code> type, you need to convert
the first element to <code class="docutils literal notranslate"><span class="pre">uint</span></code>.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmNvbnRyYWN0IEMgewogICAgZnVuY3Rpb24gZigpIHB1YmxpYyBwdXJlIHsKICAgICAgICBnKFt1aW50KDEpLCAyLCAzXSk7CiAgICB9CiAgICBmdW5jdGlvbiBnKHVpbnRbM10gbWVtb3J5KSBwdWJsaWMgcHVyZSB7CiAgICAgICAgLy8gLi4uCiAgICB9Cn0=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{</span>
<span class="w">        </span>g<span class="p">([</span><span class="kt">uint</span><span class="p">(</span><span class="m m-Decimal">1</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">,</span><span class="w"> </span><span class="m m-Decimal">3</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">g</span><span class="p">(</span><span class="kt">uint</span><span class="p">[</span><span class="m m-Decimal">3</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The array literal <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">-1]</span></code> is invalid because the type of the first expression
is <code class="docutils literal notranslate"><span class="pre">uint8</span></code> while the type of the second is <code class="docutils literal notranslate"><span class="pre">int8</span></code> and they cannot be implicitly
converted to each other. To make it work, you can use <code class="docutils literal notranslate"><span class="pre">[int8(1),</span> <span class="pre">-1]</span></code>, for example.</p>
<p>Since fixed-size memory arrays of different type cannot be converted into each other
(even if the base types can), you always have to specify a common base type explicitly
if you want to use two-dimensional array literals:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmNvbnRyYWN0IEMgewogICAgZnVuY3Rpb24gZigpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQyNFsyXVs0XSBtZW1vcnkpIHsKICAgICAgICB1aW50MjRbMl1bNF0gbWVtb3J5IHggPSBbW3VpbnQyNCgweDEpLCAxXSwgWzB4ZmZmZmZmLCAyXSwgW3VpbnQyNCgweGZmKSwgM10sIFt1aW50MjQoMHhmZmZmKSwgNF1dOwogICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgZG9lcyBub3Qgd29yaywgYmVjYXVzZSBzb21lIG9mIHRoZSBpbm5lciBhcnJheXMgYXJlIG5vdCBvZiB0aGUgcmlnaHQgdHlwZS4KICAgICAgICAvLyB1aW50WzJdWzRdIG1lbW9yeSB4ID0gW1sweDEsIDFdLCBbMHhmZmZmZmYsIDJdLCBbMHhmZiwgM10sIFsweGZmZmYsIDRdXTsKICAgICAgICByZXR1cm4geDsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint24</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][</span><span class="m m-Decimal">4</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint24</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][</span><span class="m m-Decimal">4</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="kt">uint24</span><span class="p">(</span><span class="mh">0x1</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mh">0xffffff</span><span class="p">,</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="kt">uint24</span><span class="p">(</span><span class="mh">0xff</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">3</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="kt">uint24</span><span class="p">(</span><span class="mh">0xffff</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">4</span><span class="p">]];</span>
<span class="w">        </span><span class="c1">// The following does not work, because some of the inner arrays are not of the right type.</span>
<span class="w">        </span><span class="c1">// uint[2][4] memory x = [[0x1, 1], [0xffffff, 2], [0xff, 3], [0xffff, 4]];</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>x<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Fixed size memory arrays cannot be assigned to dynamically-sized
memory arrays, i.e. the following is not possible:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjAgPDAuOS4wOwoKLy8gVGhpcyB3aWxsIG5vdCBjb21waWxlLgpjb250cmFjdCBDIHsKICAgIGZ1bmN0aW9uIGYoKSBwdWJsaWMgewogICAgICAgIC8vIFRoZSBuZXh0IGxpbmUgY3JlYXRlcyBhIHR5cGUgZXJyb3IgYmVjYXVzZSB1aW50WzNdIG1lbW9yeQogICAgICAgIC8vIGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gdWludFtdIG1lbW9yeS4KICAgICAgICB1aW50W10gbWVtb3J5IHggPSBbdWludCgxKSwgMywgNF07CiAgICB9Cn0=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="c1">// This will not compile.</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// The next line creates a type error because uint[3] memory</span>
<span class="w">        </span><span class="c1">// cannot be converted to uint[] memory.</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="kt">uint</span><span class="p">(</span><span class="m m-Decimal">1</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">3</span><span class="p">,</span><span class="w"> </span><span class="m m-Decimal">4</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It is planned to remove this restriction in the future, but it creates some
complications because of how arrays are passed in the ABI.</p>
<p>If you want to initialize dynamically-sized arrays, you have to assign the
individual elements:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmNvbnRyYWN0IEMgewogICAgZnVuY3Rpb24gZigpIHB1YmxpYyBwdXJlIHsKICAgICAgICB1aW50W10gbWVtb3J5IHggPSBuZXcgdWludFtdKDMpOwogICAgICAgIHhbMF0gPSAxOwogICAgICAgIHhbMV0gPSAzOwogICAgICAgIHhbMl0gPSA0OwogICAgfQp9" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span><span class="m m-Decimal">3</span><span class="p">);</span>
<span class="w">        </span>x<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="w">        </span>x<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">3</span><span class="p">;</span>
<span class="w">        </span>x<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">4</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="array-members">
<span id="index-22"></span><span id="id15"></span><h4>Array Members<a class="headerlink" href="#array-members" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt><strong>length</strong>:</dt><dd><p>Arrays have a <code class="docutils literal notranslate"><span class="pre">length</span></code> member that contains their number of elements.
The length of memory arrays is fixed (but dynamic, i.e. it can depend on
runtime parameters) once they are created.</p>
</dd>
<dt><strong>push()</strong>:</dt><dd><p>Dynamic storage arrays and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> (not <code class="docutils literal notranslate"><span class="pre">string</span></code>) have a member function
called <code class="docutils literal notranslate"><span class="pre">push()</span></code> that you can use to append a zero-initialised element at the end of the array.
It returns a reference to the element, so that it can be used like
<code class="docutils literal notranslate"><span class="pre">x.push().t</span> <span class="pre">=</span> <span class="pre">2</span></code> or <code class="docutils literal notranslate"><span class="pre">x.push()</span> <span class="pre">=</span> <span class="pre">b</span></code>.</p>
</dd>
<dt><strong>push(x)</strong>:</dt><dd><p>Dynamic storage arrays and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> (not <code class="docutils literal notranslate"><span class="pre">string</span></code>) have a member function
called <code class="docutils literal notranslate"><span class="pre">push(x)</span></code> that you can use to append a given element at the end of the array.
The function returns nothing.</p>
</dd>
<dt><strong>pop()</strong>:</dt><dd><p>Dynamic storage arrays and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> (not <code class="docutils literal notranslate"><span class="pre">string</span></code>) have a member
function called <code class="docutils literal notranslate"><span class="pre">pop()</span></code> that you can use to remove an element from the
end of the array. This also implicitly calls <a class="reference internal" href="#delete"><span class="std std-ref">delete</span></a> on the removed element. The function returns nothing.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Increasing the length of a storage array by calling <code class="docutils literal notranslate"><span class="pre">push()</span></code>
has constant gas costs because storage is zero-initialised,
while decreasing the length by calling <code class="docutils literal notranslate"><span class="pre">pop()</span></code> has a
cost that depends on the “size” of the element being removed.
If that element is an array, it can be very costly, because
it includes explicitly clearing the removed
elements similar to calling <a class="reference internal" href="#delete"><span class="std std-ref">delete</span></a> on them.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To use arrays of arrays in external (instead of public) functions, you need to
activate ABI coder v2.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In EVM versions before Byzantium, it was not possible to access
dynamic arrays returned from function calls. If you call functions
that return dynamic arrays, make sure to use an EVM that is set to
Byzantium mode.</p>
</div>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC42LjAgPDAuOS4wOwoKY29udHJhY3QgQXJyYXlDb250cmFjdCB7CiAgICB1aW50WzIqKjIwXSBhTG90T2ZJbnRlZ2VyczsKICAgIC8vIE5vdGUgdGhhdCB0aGUgZm9sbG93aW5nIGlzIG5vdCBhIHBhaXIgb2YgZHluYW1pYyBhcnJheXMgYnV0IGEKICAgIC8vIGR5bmFtaWMgYXJyYXkgb2YgcGFpcnMgKGkuZS4gb2YgZml4ZWQgc2l6ZSBhcnJheXMgb2YgbGVuZ3RoIHR3bykuCiAgICAvLyBJbiBTb2xpZGl0eSwgVFtrXSBhbmQgVFtdIGFyZSBhbHdheXMgYXJyYXlzIHdpdGggZWxlbWVudHMgb2YgdHlwZSBULAogICAgLy8gZXZlbiBpZiBUIGl0c2VsZiBpcyBhbiBhcnJheS4KICAgIC8vIEJlY2F1c2Ugb2YgdGhhdCwgYm9vbFsyXVtdIGlzIGEgZHluYW1pYyBhcnJheSBvZiBlbGVtZW50cwogICAgLy8gdGhhdCBhcmUgYm9vbFsyXS4gVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBvdGhlciBsYW5ndWFnZXMsIGxpa2UgQy4KICAgIC8vIERhdGEgbG9jYXRpb24gZm9yIGFsbCBzdGF0ZSB2YXJpYWJsZXMgaXMgc3RvcmFnZS4KICAgIGJvb2xbMl1bXSBwYWlyc09mRmxhZ3M7CgogICAgLy8gbmV3UGFpcnMgaXMgc3RvcmVkIGluIG1lbW9yeSAtIHRoZSBvbmx5IHBvc3NpYmlsaXR5CiAgICAvLyBmb3IgcHVibGljIGNvbnRyYWN0IGZ1bmN0aW9uIGFyZ3VtZW50cwogICAgZnVuY3Rpb24gc2V0QWxsRmxhZ1BhaXJzKGJvb2xbMl1bXSBtZW1vcnkgbmV3UGFpcnMpIHB1YmxpYyB7CiAgICAgICAgLy8gYXNzaWdubWVudCB0byBhIHN0b3JhZ2UgYXJyYXkgcGVyZm9ybXMgYSBjb3B5IG9mIGBgbmV3UGFpcnNgYCBhbmQKICAgICAgICAvLyByZXBsYWNlcyB0aGUgY29tcGxldGUgYXJyYXkgYGBwYWlyc09mRmxhZ3NgYC4KICAgICAgICBwYWlyc09mRmxhZ3MgPSBuZXdQYWlyczsKICAgIH0KCiAgICBzdHJ1Y3QgU3RydWN0VHlwZSB7CiAgICAgICAgdWludFtdIGNvbnRlbnRzOwogICAgICAgIHVpbnQgbW9yZUluZm87CiAgICB9CiAgICBTdHJ1Y3RUeXBlIHM7CgogICAgZnVuY3Rpb24gZih1aW50W10gbWVtb3J5IGMpIHB1YmxpYyB7CiAgICAgICAgLy8gc3RvcmVzIGEgcmVmZXJlbmNlIHRvIGBgc2BgIGluIGBgZ2BgCiAgICAgICAgU3RydWN0VHlwZSBzdG9yYWdlIGcgPSBzOwogICAgICAgIC8vIGFsc28gY2hhbmdlcyBgYHMubW9yZUluZm9gYC4KICAgICAgICBnLm1vcmVJbmZvID0gMjsKICAgICAgICAvLyBhc3NpZ25zIGEgY29weSBiZWNhdXNlIGBgZy5jb250ZW50c2BgCiAgICAgICAgLy8gaXMgbm90IGEgbG9jYWwgdmFyaWFibGUsIGJ1dCBhIG1lbWJlciBvZgogICAgICAgIC8vIGEgbG9jYWwgdmFyaWFibGUuCiAgICAgICAgZy5jb250ZW50cyA9IGM7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0RmxhZ1BhaXIodWludCBpbmRleCwgYm9vbCBmbGFnQSwgYm9vbCBmbGFnQikgcHVibGljIHsKICAgICAgICAvLyBhY2Nlc3MgdG8gYSBub24tZXhpc3RpbmcgaW5kZXggd2lsbCB0aHJvdyBhbiBleGNlcHRpb24KICAgICAgICBwYWlyc09mRmxhZ3NbaW5kZXhdWzBdID0gZmxhZ0E7CiAgICAgICAgcGFpcnNPZkZsYWdzW2luZGV4XVsxXSA9IGZsYWdCOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUZsYWdBcnJheVNpemUodWludCBuZXdTaXplKSBwdWJsaWMgewogICAgICAgIC8vIHVzaW5nIHB1c2ggYW5kIHBvcCBpcyB0aGUgb25seSB3YXkgdG8gY2hhbmdlIHRoZQogICAgICAgIC8vIGxlbmd0aCBvZiBhbiBhcnJheQogICAgICAgIGlmIChuZXdTaXplIDwgcGFpcnNPZkZsYWdzLmxlbmd0aCkgewogICAgICAgICAgICB3aGlsZSAocGFpcnNPZkZsYWdzLmxlbmd0aCA+IG5ld1NpemUpCiAgICAgICAgICAgICAgICBwYWlyc09mRmxhZ3MucG9wKCk7CiAgICAgICAgfSBlbHNlIGlmIChuZXdTaXplID4gcGFpcnNPZkZsYWdzLmxlbmd0aCkgewogICAgICAgICAgICB3aGlsZSAocGFpcnNPZkZsYWdzLmxlbmd0aCA8IG5ld1NpemUpCiAgICAgICAgICAgICAgICBwYWlyc09mRmxhZ3MucHVzaCgpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjbGVhcigpIHB1YmxpYyB7CiAgICAgICAgLy8gdGhlc2UgY2xlYXIgdGhlIGFycmF5cyBjb21wbGV0ZWx5CiAgICAgICAgZGVsZXRlIHBhaXJzT2ZGbGFnczsKICAgICAgICBkZWxldGUgYUxvdE9mSW50ZWdlcnM7CiAgICAgICAgLy8gaWRlbnRpY2FsIGVmZmVjdCBoZXJlCiAgICAgICAgcGFpcnNPZkZsYWdzID0gbmV3IGJvb2xbMl1bXSgwKTsKICAgIH0KCiAgICBieXRlcyBieXRlRGF0YTsKCiAgICBmdW5jdGlvbiBieXRlQXJyYXlzKGJ5dGVzIG1lbW9yeSBkYXRhKSBwdWJsaWMgewogICAgICAgIC8vIGJ5dGUgYXJyYXlzICgiYnl0ZXMiKSBhcmUgZGlmZmVyZW50IGFzIHRoZXkgYXJlIHN0b3JlZCB3aXRob3V0IHBhZGRpbmcsCiAgICAgICAgLy8gYnV0IGNhbiBiZSB0cmVhdGVkIGlkZW50aWNhbCB0byAidWludDhbXSIKICAgICAgICBieXRlRGF0YSA9IGRhdGE7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgNzsgaSsrKQogICAgICAgICAgICBieXRlRGF0YS5wdXNoKCk7CiAgICAgICAgYnl0ZURhdGFbM10gPSAweDA4OwogICAgICAgIGRlbGV0ZSBieXRlRGF0YVsyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRGbGFnKGJvb2xbMl0gbWVtb3J5IGZsYWcpIHB1YmxpYyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcGFpcnNPZkZsYWdzLnB1c2goZmxhZyk7CiAgICAgICAgcmV0dXJuIHBhaXJzT2ZGbGFncy5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlTWVtb3J5QXJyYXkodWludCBzaXplKSBwdWJsaWMgcHVyZSByZXR1cm5zIChieXRlcyBtZW1vcnkpIHsKICAgICAgICAvLyBEeW5hbWljIG1lbW9yeSBhcnJheXMgYXJlIGNyZWF0ZWQgdXNpbmcgYG5ld2A6CiAgICAgICAgdWludFsyXVtdIG1lbW9yeSBhcnJheU9mUGFpcnMgPSBuZXcgdWludFsyXVtdKHNpemUpOwoKICAgICAgICAvLyBJbmxpbmUgYXJyYXlzIGFyZSBhbHdheXMgc3RhdGljYWxseS1zaXplZCBhbmQgaWYgeW91IG9ubHkKICAgICAgICAvLyB1c2UgbGl0ZXJhbHMsIHlvdSBoYXZlIHRvIHByb3ZpZGUgYXQgbGVhc3Qgb25lIHR5cGUuCiAgICAgICAgYXJyYXlPZlBhaXJzWzBdID0gW3VpbnQoMSksIDJdOwoKICAgICAgICAvLyBDcmVhdGUgYSBkeW5hbWljIGJ5dGUgYXJyYXk6CiAgICAgICAgYnl0ZXMgbWVtb3J5IGIgPSBuZXcgYnl0ZXMoMjAwKTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBiW2ldID0gYnl0ZXMxKHVpbnQ4KGkpKTsKICAgICAgICByZXR1cm4gYjsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.6.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">ArrayContract</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="o">**</span><span class="m m-Decimal">20</span><span class="p">]</span><span class="w"> </span>aLotOfIntegers<span class="p">;</span>
<span class="w">    </span><span class="c1">// Note that the following is not a pair of dynamic arrays but a</span>
<span class="w">    </span><span class="c1">// dynamic array of pairs (i.e. of fixed size arrays of length two).</span>
<span class="w">    </span><span class="c1">// In Solidity, T[k] and T[] are always arrays with elements of type T,</span>
<span class="w">    </span><span class="c1">// even if T itself is an array.</span>
<span class="w">    </span><span class="c1">// Because of that, bool[2][] is a dynamic array of elements</span>
<span class="w">    </span><span class="c1">// that are bool[2]. This is different from other languages, like C.</span>
<span class="w">    </span><span class="c1">// Data location for all state variables is storage.</span>
<span class="w">    </span><span class="kt">bool</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][]</span><span class="w"> </span>pairsOfFlags<span class="p">;</span>

<span class="w">    </span><span class="c1">// newPairs is stored in memory - the only possibility</span>
<span class="w">    </span><span class="c1">// for public contract function arguments</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setAllFlagPairs</span><span class="p">(</span><span class="kt">bool</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>newPairs<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// assignment to a storage array performs a copy of ``newPairs`` and</span>
<span class="w">        </span><span class="c1">// replaces the complete array ``pairsOfFlags``.</span>
<span class="w">        </span>pairsOfFlags<span class="w"> </span><span class="o">=</span><span class="w"> </span>newPairs<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">StructType</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>contents<span class="p">;</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">moreInfo</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>StructType<span class="w"> </span>s<span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>c<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// stores a reference to ``s`` in ``g``</span>
<span class="w">        </span>StructType<span class="w"> </span>storage<span class="w"> </span>g<span class="w"> </span><span class="o">=</span><span class="w"> </span>s<span class="p">;</span>
<span class="w">        </span><span class="c1">// also changes ``s.moreInfo``.</span>
<span class="w">        </span>g<span class="p">.</span>moreInfo<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// assigns a copy because ``g.contents``</span>
<span class="w">        </span><span class="c1">// is not a local variable, but a member of</span>
<span class="w">        </span><span class="c1">// a local variable.</span>
<span class="w">        </span>g<span class="p">.</span>contents<span class="w"> </span><span class="o">=</span><span class="w"> </span>c<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setFlagPair</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">index</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nv">flagA</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nv">flagB</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// access to a non-existing index will throw an exception</span>
<span class="w">        </span>pairsOfFlags<span class="p">[</span>index<span class="p">][</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>flagA<span class="p">;</span>
<span class="w">        </span>pairsOfFlags<span class="p">[</span>index<span class="p">][</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>flagB<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">changeFlagArraySize</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">newSize</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// using push and pop is the only way to change the</span>
<span class="w">        </span><span class="c1">// length of an array</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>newSize<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>pairsOfFlags<span class="p">.</span>length<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">while</span><span class="w"> </span><span class="p">(</span>pairsOfFlags<span class="p">.</span>length<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>newSize<span class="p">)</span>
<span class="w">                </span>pairsOfFlags<span class="p">.</span>pop<span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="kt">else</span><span class="w"> </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>newSize<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>pairsOfFlags<span class="p">.</span>length<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">while</span><span class="w"> </span><span class="p">(</span>pairsOfFlags<span class="p">.</span>length<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>newSize<span class="p">)</span>
<span class="w">                </span>pairsOfFlags<span class="p">.</span>push<span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">clear</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// these clear the arrays completely</span>
<span class="w">        </span>delete<span class="w"> </span>pairsOfFlags<span class="p">;</span>
<span class="w">        </span>delete<span class="w"> </span>aLotOfIntegers<span class="p">;</span>
<span class="w">        </span><span class="c1">// identical effect here</span>
<span class="w">        </span>pairsOfFlags<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">bool</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][](</span><span class="m m-Decimal">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">byteData</span><span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">byteArrays</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>data<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// byte arrays (&quot;bytes&quot;) are different as they are stored without padding,</span>
<span class="w">        </span><span class="c1">// but can be treated identical to &quot;uint8[]&quot;</span>
<span class="w">        </span>byteData<span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">;</span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m m-Decimal">7</span><span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span>
<span class="w">            </span>byteData<span class="p">.</span>push<span class="p">();</span>
<span class="w">        </span>byteData<span class="p">[</span><span class="m m-Decimal">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x08</span><span class="p">;</span>
<span class="w">        </span>delete<span class="w"> </span>byteData<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">addFlag</span><span class="p">(</span><span class="kt">bool</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>flag<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>pairsOfFlags<span class="p">.</span>push<span class="p">(</span>flag<span class="p">);</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>pairsOfFlags<span class="p">.</span>length<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">createMemoryArray</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">size</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Dynamic memory arrays are created using `new`:</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>arrayOfPairs<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][](</span>size<span class="p">);</span>

<span class="w">        </span><span class="c1">// Inline arrays are always statically-sized and if you only</span>
<span class="w">        </span><span class="c1">// use literals, you have to provide at least one type.</span>
<span class="w">        </span>arrayOfPairs<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="kt">uint</span><span class="p">(</span><span class="m m-Decimal">1</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">];</span>

<span class="w">        </span><span class="c1">// Create a dynamic byte array:</span>
<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span><span class="m m-Decimal">200</span><span class="p">);</span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>b<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span>
<span class="w">            </span>b<span class="p">[</span>i<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes1<span class="p">(</span><span class="kt">uint8</span><span class="p">(</span>i<span class="p">));</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>b<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="dangling-references-to-storage-array-elements">
<span id="index-23"></span><h4>Dangling References to Storage Array Elements<a class="headerlink" href="#dangling-references-to-storage-array-elements" title="Permalink to this heading"></a></h4>
<p>When working with storage arrays, you need to take care to avoid dangling references.
A dangling reference is a reference that points to something that no longer exists or has been
moved without updating the reference. A dangling reference can for example occur, if you store a
reference to an array element in a local variable and then <code class="docutils literal notranslate"><span class="pre">.pop()</span></code> from the containing array:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC44LjAgPDAuOS4wOwoKY29udHJhY3QgQyB7CiAgICB1aW50W11bXSBzOwoKICAgIGZ1bmN0aW9uIGYoKSBwdWJsaWMgewogICAgICAgIC8vIFN0b3JlcyBhIHBvaW50ZXIgdG8gdGhlIGxhc3QgYXJyYXkgZWxlbWVudCBvZiBzLgogICAgICAgIHVpbnRbXSBzdG9yYWdlIHB0ciA9IHNbcy5sZW5ndGggLSAxXTsKICAgICAgICAvLyBSZW1vdmVzIHRoZSBsYXN0IGFycmF5IGVsZW1lbnQgb2Ygcy4KICAgICAgICBzLnBvcCgpOwogICAgICAgIC8vIFdyaXRlcyB0byB0aGUgYXJyYXkgZWxlbWVudCB0aGF0IGlzIG5vIGxvbmdlciB3aXRoaW4gdGhlIGFycmF5LgogICAgICAgIHB0ci5wdXNoKDB4NDIpOwogICAgICAgIC8vIEFkZGluZyBhIG5ldyBlbGVtZW50IHRvIGBgc2BgIG5vdyB3aWxsIG5vdCBhZGQgYW4gZW1wdHkgYXJyYXksIGJ1dAogICAgICAgIC8vIHdpbGwgcmVzdWx0IGluIGFuIGFycmF5IG9mIGxlbmd0aCAxIHdpdGggYGAweDQyYGAgYXMgZWxlbWVudC4KICAgICAgICBzLnB1c2goKTsKICAgICAgICBhc3NlcnQoc1tzLmxlbmd0aCAtIDFdWzBdID09IDB4NDIpOwogICAgfQp9" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.8.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[][]</span><span class="w"> </span>s<span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Stores a pointer to the last array element of s.</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>storage<span class="w"> </span>ptr<span class="w"> </span><span class="o">=</span><span class="w"> </span>s<span class="p">[</span>s<span class="p">.</span>length<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">];</span>
<span class="w">        </span><span class="c1">// Removes the last array element of s.</span>
<span class="w">        </span>s<span class="p">.</span>pop<span class="p">();</span>
<span class="w">        </span><span class="c1">// Writes to the array element that is no longer within the array.</span>
<span class="w">        </span>ptr<span class="p">.</span>push<span class="p">(</span><span class="mh">0x42</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// Adding a new element to ``s`` now will not add an empty array, but</span>
<span class="w">        </span><span class="c1">// will result in an array of length 1 with ``0x42`` as element.</span>
<span class="w">        </span>s<span class="p">.</span>push<span class="p">();</span>
<span class="w">        </span>assert<span class="p">(</span>s<span class="p">[</span>s<span class="p">.</span>length<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">][</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">0x42</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The write in <code class="docutils literal notranslate"><span class="pre">ptr.push(0x42)</span></code> will <strong>not</strong> revert, despite the fact that <code class="docutils literal notranslate"><span class="pre">ptr</span></code> no
longer refers to a valid element of <code class="docutils literal notranslate"><span class="pre">s</span></code>. Since the compiler assumes that unused storage
is always zeroed, a subsequent <code class="docutils literal notranslate"><span class="pre">s.push()</span></code> will not explicitly write zeroes to storage,
so the last element of <code class="docutils literal notranslate"><span class="pre">s</span></code> after that <code class="docutils literal notranslate"><span class="pre">push()</span></code> will have length <code class="docutils literal notranslate"><span class="pre">1</span></code> and contain
<code class="docutils literal notranslate"><span class="pre">0x42</span></code> as its first element.</p>
<p>Note that Solidity does not allow to declare references to value types in storage. These kinds
of explicit dangling references are restricted to nested reference types. However, dangling references
can also occur temporarily when using complex expressions in tuple assignments:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC44LjAgPDAuOS4wOwoKY29udHJhY3QgQyB7CiAgICB1aW50W10gczsKICAgIHVpbnRbXSB0OwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgLy8gUHVzaCBzb21lIGluaXRpYWwgdmFsdWVzIHRvIHRoZSBzdG9yYWdlIGFycmF5cy4KICAgICAgICBzLnB1c2goMHgwNyk7CiAgICAgICAgdC5wdXNoKDB4MDMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGcoKSBpbnRlcm5hbCByZXR1cm5zICh1aW50W10gc3RvcmFnZSkgewogICAgICAgIHMucG9wKCk7CiAgICAgICAgcmV0dXJuIHQ7CiAgICB9CgogICAgZnVuY3Rpb24gZigpIHB1YmxpYyByZXR1cm5zICh1aW50W10gbWVtb3J5KSB7CiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyB3aWxsIGZpcnN0IGV2YWx1YXRlIGBgcy5wdXNoKClgYCB0byBhIHJlZmVyZW5jZSB0byBhIG5ldyBlbGVtZW50CiAgICAgICAgLy8gYXQgaW5kZXggMS4gQWZ0ZXJ3YXJkcywgdGhlIGNhbGwgdG8gYGBnYGAgcG9wcyB0aGlzIG5ldyBlbGVtZW50LCByZXN1bHRpbmcgaW4KICAgICAgICAvLyB0aGUgbGVmdC1tb3N0IHR1cGxlIGVsZW1lbnQgdG8gYmVjb21lIGEgZGFuZ2xpbmcgcmVmZXJlbmNlLiBUaGUgYXNzaWdubWVudCBzdGlsbAogICAgICAgIC8vIHRha2VzIHBsYWNlIGFuZCB3aWxsIHdyaXRlIG91dHNpZGUgdGhlIGRhdGEgYXJlYSBvZiBgYHNgYC4KICAgICAgICAocy5wdXNoKCksIGcoKVswXSkgPSAoMHg0MiwgMHgxNyk7CiAgICAgICAgLy8gQSBzdWJzZXF1ZW50IHB1c2ggdG8gYGBzYGAgd2lsbCByZXZlYWwgdGhlIHZhbHVlIHdyaXR0ZW4gYnkgdGhlIHByZXZpb3VzCiAgICAgICAgLy8gc3RhdGVtZW50LCBpLmUuIHRoZSBsYXN0IGVsZW1lbnQgb2YgYGBzYGAgYXQgdGhlIGVuZCBvZiB0aGlzIGZ1bmN0aW9uIHdpbGwgaGF2ZQogICAgICAgIC8vIHRoZSB2YWx1ZSBgYDB4NDJgYC4KICAgICAgICBzLnB1c2goKTsKICAgICAgICByZXR1cm4gczsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.8.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>s<span class="p">;</span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>t<span class="p">;</span>
<span class="w">    </span><span class="kt">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Push some initial values to the storage arrays.</span>
<span class="w">        </span>s<span class="p">.</span>push<span class="p">(</span><span class="mh">0x07</span><span class="p">);</span>
<span class="w">        </span>t<span class="p">.</span>push<span class="p">(</span><span class="mh">0x03</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">g</span><span class="p">()</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>storage<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>s<span class="p">.</span>pop<span class="p">();</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>t<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// The following will first evaluate ``s.push()`` to a reference to a new element</span>
<span class="w">        </span><span class="c1">// at index 1. Afterwards, the call to ``g`` pops this new element, resulting in</span>
<span class="w">        </span><span class="c1">// the left-most tuple element to become a dangling reference. The assignment still</span>
<span class="w">        </span><span class="c1">// takes place and will write outside the data area of ``s``.</span>
<span class="w">        </span><span class="p">(</span>s<span class="p">.</span>push<span class="p">(),</span><span class="w"> </span>g<span class="p">()[</span><span class="m m-Decimal">0</span><span class="p">])</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mh">0x42</span><span class="p">,</span><span class="w"> </span><span class="mh">0x17</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// A subsequent push to ``s`` will reveal the value written by the previous</span>
<span class="w">        </span><span class="c1">// statement, i.e. the last element of ``s`` at the end of this function will have</span>
<span class="w">        </span><span class="c1">// the value ``0x42``.</span>
<span class="w">        </span>s<span class="p">.</span>push<span class="p">();</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>s<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It is always safer to only assign to storage once per statement and to avoid
complex expressions on the left-hand-side of an assignment.</p>
<p>You need to take particular care when dealing with references to elements of
<code class="docutils literal notranslate"><span class="pre">bytes</span></code> arrays, since a <code class="docutils literal notranslate"><span class="pre">.push()</span></code> on a bytes array may switch <a class="reference internal" href="internals/layout_in_storage.html#bytes-and-string"><span class="std std-ref">from short
to long layout in storage</span></a>.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC44LjAgPDAuOS4wOwoKLy8gVGhpcyB3aWxsIHJlcG9ydCBhIHdhcm5pbmcKY29udHJhY3QgQyB7CiAgICBieXRlcyB4ID0gIjAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OSI7CgogICAgZnVuY3Rpb24gdGVzdCgpIGV4dGVybmFsIHJldHVybnModWludCkgewogICAgICAgICh4LnB1c2goKSwgeC5wdXNoKCkpID0gKDB4MDEsIDB4MDIpOwogICAgICAgIHJldHVybiB4Lmxlbmd0aDsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.8.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="c1">// This will report a warning</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;012345678901234567890123456789&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">test</span><span class="p">()</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="kt">returns</span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">(</span>x<span class="p">.</span>push<span class="p">(),</span><span class="w"> </span>x<span class="p">.</span>push<span class="p">())</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x02</span><span class="p">);</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>x<span class="p">.</span>length<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here, when the first <code class="docutils literal notranslate"><span class="pre">x.push()</span></code> is evaluated, <code class="docutils literal notranslate"><span class="pre">x</span></code> is still stored in short
layout, thereby <code class="docutils literal notranslate"><span class="pre">x.push()</span></code> returns a reference to an element in the first storage slot of
<code class="docutils literal notranslate"><span class="pre">x</span></code>. However, the second <code class="docutils literal notranslate"><span class="pre">x.push()</span></code> switches the bytes array to large layout.
Now the element that <code class="docutils literal notranslate"><span class="pre">x.push()</span></code> referred to is in the data area of the array while
the reference still points at its original location, which is now a part of the length field
and the assignment will effectively garble the length of <code class="docutils literal notranslate"><span class="pre">x</span></code>.
To be safe, only enlarge bytes arrays by at most one element during a single
assignment and do not simultaneously index-access the array in the same statement.</p>
<p>While the above describes the behavior of dangling storage references in the
current version of the compiler, any code with dangling references should be
considered to have <em>undefined behavior</em>. In particular, this means that
any future version of the compiler may change the behavior of code that
involves dangling references.</p>
<p>Be sure to avoid dangling references in your code!</p>
</section>
</section>
<section id="array-slices">
<span id="index-24"></span><span id="id16"></span><h3>Array Slices<a class="headerlink" href="#array-slices" title="Permalink to this heading"></a></h3>
<p>Array slices are a view on a contiguous portion of an array.
They are written as <code class="docutils literal notranslate"><span class="pre">x[start:end]</span></code>, where <code class="docutils literal notranslate"><span class="pre">start</span></code> and
<code class="docutils literal notranslate"><span class="pre">end</span></code> are expressions resulting in a uint256 type (or
implicitly convertible to it). The first element of the
slice is <code class="docutils literal notranslate"><span class="pre">x[start]</span></code> and the last element is <code class="docutils literal notranslate"><span class="pre">x[end</span> <span class="pre">-</span> <span class="pre">1]</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">start</span></code> is greater than <code class="docutils literal notranslate"><span class="pre">end</span></code> or if <code class="docutils literal notranslate"><span class="pre">end</span></code> is greater
than the length of the array, an exception is thrown.</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> are optional: <code class="docutils literal notranslate"><span class="pre">start</span></code> defaults
to <code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> defaults to the length of the array.</p>
<p>Array slices do not have any members. They are implicitly
convertible to arrays of their underlying type
and support index access. Index access is not absolute
in the underlying array, but relative to the start of
the slice.</p>
<p>Array slices do not have a type name which means
no variable can have an array slices as type,
they only exist in intermediate expressions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As of now, array slices are only implemented for calldata arrays.</p>
</div>
<p>Array slices are useful to ABI-decode secondary data passed in function parameters:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC44LjUgPDAuOS4wOwpjb250cmFjdCBQcm94eSB7CiAgICAvLy8gQGRldiBBZGRyZXNzIG9mIHRoZSBjbGllbnQgY29udHJhY3QgbWFuYWdlZCBieSBwcm94eSBpLmUuLCB0aGlzIGNvbnRyYWN0CiAgICBhZGRyZXNzIGNsaWVudDsKCiAgICBjb25zdHJ1Y3RvcihhZGRyZXNzIGNsaWVudF8pIHsKICAgICAgICBjbGllbnQgPSBjbGllbnRfOwogICAgfQoKICAgIC8vLyBGb3J3YXJkIGNhbGwgdG8gInNldE93bmVyKGFkZHJlc3MpIiB0aGF0IGlzIGltcGxlbWVudGVkIGJ5IGNsaWVudAogICAgLy8vIGFmdGVyIGRvaW5nIGJhc2ljIHZhbGlkYXRpb24gb24gdGhlIGFkZHJlc3MgYXJndW1lbnQuCiAgICBmdW5jdGlvbiBmb3J3YXJkKGJ5dGVzIGNhbGxkYXRhIHBheWxvYWQpIGV4dGVybmFsIHsKICAgICAgICBieXRlczQgc2lnID0gYnl0ZXM0KHBheWxvYWRbOjRdKTsKICAgICAgICAvLyBEdWUgdG8gdHJ1bmNhdGluZyBiZWhhdmlvciwgYnl0ZXM0KHBheWxvYWQpIHBlcmZvcm1zIGlkZW50aWNhbGx5LgogICAgICAgIC8vIGJ5dGVzNCBzaWcgPSBieXRlczQocGF5bG9hZCk7CiAgICAgICAgaWYgKHNpZyA9PSBieXRlczQoa2VjY2FrMjU2KCJzZXRPd25lcihhZGRyZXNzKSIpKSkgewogICAgICAgICAgICBhZGRyZXNzIG93bmVyID0gYWJpLmRlY29kZShwYXlsb2FkWzQ6XSwgKGFkZHJlc3MpKTsKICAgICAgICAgICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApLCAiQWRkcmVzcyBvZiBvd25lciBjYW5ub3QgYmUgemVyby4iKTsKICAgICAgICB9CiAgICAgICAgKGJvb2wgc3RhdHVzLCkgPSBjbGllbnQuZGVsZWdhdGVjYWxsKHBheWxvYWQpOwogICAgICAgIHJlcXVpcmUoc3RhdHVzLCAiRm9yd2FyZGVkIGNhbGwgZmFpbGVkLiIpOwogICAgfQp9" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.8.5</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">Proxy</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">/// @dev Address of the client contract managed by proxy i.e., this contract</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">client</span><span class="p">;</span>

<span class="w">    </span><span class="kt">constructor</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">client_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>client<span class="w"> </span><span class="o">=</span><span class="w"> </span>client_<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">/// Forward call to &quot;setOwner(address)&quot; that is implemented by client</span>
<span class="w">    </span><span class="c1">/// after doing basic validation on the address argument.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">forward</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">calldata</span><span class="w"> </span>payload<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>bytes4<span class="w"> </span>sig<span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes4<span class="p">(</span>payload<span class="p">[</span><span class="o">:</span><span class="m m-Decimal">4</span><span class="p">]);</span>
<span class="w">        </span><span class="c1">// Due to truncating behavior, bytes4(payload) performs identically.</span>
<span class="w">        </span><span class="c1">// bytes4 sig = bytes4(payload);</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>sig<span class="w"> </span><span class="o">==</span><span class="w"> </span>bytes4<span class="p">(</span><span class="nb">keccak256</span><span class="p">(</span><span class="s2">&quot;setOwner(address)&quot;</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">address</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>abi<span class="p">.</span>decode<span class="p">(</span>payload<span class="p">[</span><span class="m m-Decimal">4</span><span class="o">:</span><span class="p">],</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="p">));</span>
<span class="w">            </span><span class="kt">require</span><span class="p">(</span>owner<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;Address of owner cannot be zero.&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">status</span><span class="p">,)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>client<span class="p">.</span>delegatecall<span class="p">(</span>payload<span class="p">);</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>status<span class="p">,</span><span class="w"> </span><span class="s2">&quot;Forwarded call failed.&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="structs">
<span id="index-25"></span><span id="id17"></span><h3>Structs<a class="headerlink" href="#structs" title="Permalink to this heading"></a></h3>
<p>Solidity provides a way to define new types in the form of structs, which is
shown in the following example:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC42LjAgPDAuOS4wOwoKLy8gRGVmaW5lcyBhIG5ldyB0eXBlIHdpdGggdHdvIGZpZWxkcy4KLy8gRGVjbGFyaW5nIGEgc3RydWN0IG91dHNpZGUgb2YgYSBjb250cmFjdCBhbGxvd3MKLy8gaXQgdG8gYmUgc2hhcmVkIGJ5IG11bHRpcGxlIGNvbnRyYWN0cy4KLy8gSGVyZSwgdGhpcyBpcyBub3QgcmVhbGx5IG5lZWRlZC4Kc3RydWN0IEZ1bmRlciB7CiAgICBhZGRyZXNzIGFkZHI7CiAgICB1aW50IGFtb3VudDsKfQoKY29udHJhY3QgQ3Jvd2RGdW5kaW5nIHsKICAgIC8vIFN0cnVjdHMgY2FuIGFsc28gYmUgZGVmaW5lZCBpbnNpZGUgY29udHJhY3RzLCB3aGljaCBtYWtlcyB0aGVtCiAgICAvLyB2aXNpYmxlIG9ubHkgdGhlcmUgYW5kIGluIGRlcml2ZWQgY29udHJhY3RzLgogICAgc3RydWN0IENhbXBhaWduIHsKICAgICAgICBhZGRyZXNzIHBheWFibGUgYmVuZWZpY2lhcnk7CiAgICAgICAgdWludCBmdW5kaW5nR29hbDsKICAgICAgICB1aW50IG51bUZ1bmRlcnM7CiAgICAgICAgdWludCBhbW91bnQ7CiAgICAgICAgbWFwcGluZyh1aW50ID0+IEZ1bmRlcikgZnVuZGVyczsKICAgIH0KCiAgICB1aW50IG51bUNhbXBhaWduczsKICAgIG1hcHBpbmcodWludCA9PiBDYW1wYWlnbikgY2FtcGFpZ25zOwoKICAgIGZ1bmN0aW9uIG5ld0NhbXBhaWduKGFkZHJlc3MgcGF5YWJsZSBiZW5lZmljaWFyeSwgdWludCBnb2FsKSBwdWJsaWMgcmV0dXJucyAodWludCBjYW1wYWlnbklEKSB7CiAgICAgICAgY2FtcGFpZ25JRCA9IG51bUNhbXBhaWducysrOyAvLyBjYW1wYWlnbklEIGlzIHJldHVybiB2YXJpYWJsZQogICAgICAgIC8vIFdlIGNhbm5vdCB1c2UgImNhbXBhaWduc1tjYW1wYWlnbklEXSA9IENhbXBhaWduKGJlbmVmaWNpYXJ5LCBnb2FsLCAwLCAwKSIKICAgICAgICAvLyBiZWNhdXNlIHRoZSByaWdodCBoYW5kIHNpZGUgY3JlYXRlcyBhIG1lbW9yeS1zdHJ1Y3QgIkNhbXBhaWduIiB0aGF0IGNvbnRhaW5zIGEgbWFwcGluZy4KICAgICAgICBDYW1wYWlnbiBzdG9yYWdlIGMgPSBjYW1wYWlnbnNbY2FtcGFpZ25JRF07CiAgICAgICAgYy5iZW5lZmljaWFyeSA9IGJlbmVmaWNpYXJ5OwogICAgICAgIGMuZnVuZGluZ0dvYWwgPSBnb2FsOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnRyaWJ1dGUodWludCBjYW1wYWlnbklEKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgQ2FtcGFpZ24gc3RvcmFnZSBjID0gY2FtcGFpZ25zW2NhbXBhaWduSURdOwogICAgICAgIC8vIENyZWF0ZXMgYSBuZXcgdGVtcG9yYXJ5IG1lbW9yeSBzdHJ1Y3QsIGluaXRpYWxpc2VkIHdpdGggdGhlIGdpdmVuIHZhbHVlcwogICAgICAgIC8vIGFuZCBjb3BpZXMgaXQgb3ZlciB0byBzdG9yYWdlLgogICAgICAgIC8vIE5vdGUgdGhhdCB5b3UgY2FuIGFsc28gdXNlIEZ1bmRlcihtc2cuc2VuZGVyLCBtc2cudmFsdWUpIHRvIGluaXRpYWxpc2UuCiAgICAgICAgYy5mdW5kZXJzW2MubnVtRnVuZGVycysrXSA9IEZ1bmRlcih7YWRkcjogbXNnLnNlbmRlciwgYW1vdW50OiBtc2cudmFsdWV9KTsKICAgICAgICBjLmFtb3VudCArPSBtc2cudmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tHb2FsUmVhY2hlZCh1aW50IGNhbXBhaWduSUQpIHB1YmxpYyByZXR1cm5zIChib29sIHJlYWNoZWQpIHsKICAgICAgICBDYW1wYWlnbiBzdG9yYWdlIGMgPSBjYW1wYWlnbnNbY2FtcGFpZ25JRF07CiAgICAgICAgaWYgKGMuYW1vdW50IDwgYy5mdW5kaW5nR29hbCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHVpbnQgYW1vdW50ID0gYy5hbW91bnQ7CiAgICAgICAgYy5hbW91bnQgPSAwOwogICAgICAgIGMuYmVuZWZpY2lhcnkudHJhbnNmZXIoYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.6.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="c1">// Defines a new type with two fields.</span>
<span class="c1">// Declaring a struct outside of a contract allows</span>
<span class="c1">// it to be shared by multiple contracts.</span>
<span class="c1">// Here, this is not really needed.</span>
<span class="kt">struct</span><span class="w"> </span><span class="nv">Funder</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">addr</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">CrowdFunding</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Structs can also be defined inside contracts, which makes them</span>
<span class="w">    </span><span class="c1">// visible only there and in derived contracts.</span>
<span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">Campaign</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>beneficiary<span class="p">;</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">fundingGoal</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">numFunders</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="p">;</span>
<span class="w">        </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>Funder<span class="p">)</span><span class="w"> </span>funders<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">numCampaigns</span><span class="p">;</span>
<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>Campaign<span class="p">)</span><span class="w"> </span>campaigns<span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">newCampaign</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>beneficiary<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">goal</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">campaignID</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>campaignID<span class="w"> </span><span class="o">=</span><span class="w"> </span>numCampaigns<span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="c1">// campaignID is return variable</span>
<span class="w">        </span><span class="c1">// We cannot use &quot;campaigns[campaignID] = Campaign(beneficiary, goal, 0, 0)&quot;</span>
<span class="w">        </span><span class="c1">// because the right hand side creates a memory-struct &quot;Campaign&quot; that contains a mapping.</span>
<span class="w">        </span>Campaign<span class="w"> </span>storage<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span>campaigns<span class="p">[</span>campaignID<span class="p">];</span>
<span class="w">        </span>c<span class="p">.</span>beneficiary<span class="w"> </span><span class="o">=</span><span class="w"> </span>beneficiary<span class="p">;</span>
<span class="w">        </span>c<span class="p">.</span>fundingGoal<span class="w"> </span><span class="o">=</span><span class="w"> </span>goal<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">contribute</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">campaignID</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>Campaign<span class="w"> </span>storage<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span>campaigns<span class="p">[</span>campaignID<span class="p">];</span>
<span class="w">        </span><span class="c1">// Creates a new temporary memory struct, initialised with the given values</span>
<span class="w">        </span><span class="c1">// and copies it over to storage.</span>
<span class="w">        </span><span class="c1">// Note that you can also use Funder(msg.sender, msg.value) to initialise.</span>
<span class="w">        </span>c<span class="p">.</span>funders<span class="p">[</span>c<span class="p">.</span>numFunders<span class="o">++</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Funder<span class="p">({</span>addr<span class="o">:</span><span class="w"> </span><span class="k">msg.sender</span><span class="p">,</span><span class="w"> </span>amount<span class="o">:</span><span class="w"> </span><span class="k">msg.value</span><span class="p">});</span>
<span class="w">        </span>c<span class="p">.</span>amount<span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">msg.value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">checkGoalReached</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">campaignID</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">reached</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>Campaign<span class="w"> </span>storage<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span>campaigns<span class="p">[</span>campaignID<span class="p">];</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>c<span class="p">.</span>amount<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>c<span class="p">.</span>fundingGoal<span class="p">)</span>
<span class="w">            </span><span class="kt">return</span><span class="w"> </span><span class="kt">false</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>c<span class="p">.</span>amount<span class="p">;</span>
<span class="w">        </span>c<span class="p">.</span>amount<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span>
<span class="w">        </span>c<span class="p">.</span>beneficiary<span class="p">.</span>transfer<span class="p">(</span>amount<span class="p">);</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The contract does not provide the full functionality of a crowdfunding
contract, but it contains the basic concepts necessary to understand structs.
Struct types can be used inside mappings and arrays and they can themselves
contain mappings and arrays.</p>
<p>It is not possible for a struct to contain a member of its own type,
although the struct itself can be the value type of a mapping member
or it can contain a dynamically-sized array of its type.
This restriction is necessary, as the size of the struct has to be finite.</p>
<p>Note how in all the functions, a struct type is assigned to a local variable
with data location <code class="docutils literal notranslate"><span class="pre">storage</span></code>.
This does not copy the struct but only stores a reference so that assignments to
members of the local variable actually write to the state.</p>
<p>Of course, you can also directly access the members of the struct without
assigning it to a local variable, as in
<code class="docutils literal notranslate"><span class="pre">campaigns[campaignID].amount</span> <span class="pre">=</span> <span class="pre">0</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Until Solidity 0.7.0, memory-structs containing members of storage-only types (e.g. mappings)
were allowed and assignments like <code class="docutils literal notranslate"><span class="pre">campaigns[campaignID]</span> <span class="pre">=</span> <span class="pre">Campaign(beneficiary,</span> <span class="pre">goal,</span> <span class="pre">0,</span> <span class="pre">0)</span></code>
in the example above would work and just silently skip those members.</p>
</div>
</section>
</section>
<section id="mapping-types">
<span id="index-26"></span><span id="id18"></span><h2>Mapping Types<a class="headerlink" href="#mapping-types" title="Permalink to this heading"></a></h2>
<p>Mapping types use the syntax <code class="docutils literal notranslate"><span class="pre">mapping(KeyType</span> <span class="pre">KeyName?</span> <span class="pre">=&gt;</span> <span class="pre">ValueType</span> <span class="pre">ValueName?)</span></code> and variables of
mapping type are declared using the syntax <code class="docutils literal notranslate"><span class="pre">mapping(KeyType</span> <span class="pre">KeyName?</span> <span class="pre">=&gt;</span> <span class="pre">ValueType</span> <span class="pre">ValueName?)</span>
<span class="pre">VariableName</span></code>. The <code class="docutils literal notranslate"><span class="pre">KeyType</span></code> can be any built-in value type, <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, or any
contract or enum type. Other user-defined or complex types, such as mappings, structs or array types
are not allowed. <code class="docutils literal notranslate"><span class="pre">ValueType</span></code> can be any type, including mappings, arrays and structs. <code class="docutils literal notranslate"><span class="pre">KeyName</span></code>
and <code class="docutils literal notranslate"><span class="pre">ValueName</span></code> are optional (so <code class="docutils literal notranslate"><span class="pre">mapping(KeyType</span> <span class="pre">=&gt;</span> <span class="pre">ValueType)</span></code> works as well) and can be any
valid identifier that is not a type.</p>
<p>You can think of mappings as <a class="reference external" href="https://en.wikipedia.org/wiki/Hash_table">hash tables</a>, which are virtually initialised
such that every possible key exists and is mapped to a value whose
byte-representation is all zeros, a type’s <a class="reference internal" href="control-structures.html#default-value"><span class="std std-ref">default value</span></a>.
The similarity ends there, the key data is not stored in a
mapping, only its <code class="docutils literal notranslate"><span class="pre">keccak256</span></code> hash is used to look up the value.</p>
<p>Because of this, mappings do not have a length or a concept of a key or
value being set, and therefore cannot be erased without extra information
regarding the assigned keys (see <a class="reference internal" href="security-considerations.html#clearing-mappings"><span class="std std-ref">Clearing Mappings</span></a>).</p>
<p>Mappings can only have a data location of <code class="docutils literal notranslate"><span class="pre">storage</span></code> and thus
are allowed for state variables, as storage reference types
in functions, or as parameters for library functions.
They cannot be used as parameters or return parameters
of contract functions that are publicly visible.
These restrictions are also true for arrays and structs that contain mappings.</p>
<p>You can mark state variables of mapping type as <code class="docutils literal notranslate"><span class="pre">public</span></code> and Solidity creates a
<a class="reference internal" href="contracts.html#visibility-and-getters"><span class="std std-ref">getter</span></a> for you. The <code class="docutils literal notranslate"><span class="pre">KeyType</span></code> becomes a parameter
with name <code class="docutils literal notranslate"><span class="pre">KeyName</span></code> (if specified) for the getter.
If <code class="docutils literal notranslate"><span class="pre">ValueType</span></code> is a value type or a struct, the getter returns <code class="docutils literal notranslate"><span class="pre">ValueType</span></code> with
name <code class="docutils literal notranslate"><span class="pre">ValueName</span></code> (if specified).
If <code class="docutils literal notranslate"><span class="pre">ValueType</span></code> is an array or a mapping, the getter has one parameter for
each <code class="docutils literal notranslate"><span class="pre">KeyType</span></code>, recursively.</p>
<p>In the example below, the <code class="docutils literal notranslate"><span class="pre">MappingExample</span></code> contract defines a public <code class="docutils literal notranslate"><span class="pre">balances</span></code>
mapping, with the key type an <code class="docutils literal notranslate"><span class="pre">address</span></code>, and a value type a <code class="docutils literal notranslate"><span class="pre">uint</span></code>, mapping
an Ethereum address to an unsigned integer value. As <code class="docutils literal notranslate"><span class="pre">uint</span></code> is a value type, the getter
returns a value that matches the type, which you can see in the <code class="docutils literal notranslate"><span class="pre">MappingUser</span></code>
contract that returns the value at the specified address.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjAgPDAuOS4wOwoKY29udHJhY3QgTWFwcGluZ0V4YW1wbGUgewogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlczsKCiAgICBmdW5jdGlvbiB1cGRhdGUodWludCBuZXdCYWxhbmNlKSBwdWJsaWMgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gbmV3QmFsYW5jZTsKICAgIH0KfQoKY29udHJhY3QgTWFwcGluZ1VzZXIgewogICAgZnVuY3Rpb24gZigpIHB1YmxpYyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgTWFwcGluZ0V4YW1wbGUgbSA9IG5ldyBNYXBwaW5nRXhhbXBsZSgpOwogICAgICAgIG0udXBkYXRlKDEwMCk7CiAgICAgICAgcmV0dXJuIG0uYmFsYW5jZXMoYWRkcmVzcyh0aGlzKSk7CiAgICB9Cn0=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">MappingExample</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>balances<span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">update</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">newBalance</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>newBalance<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">MappingUser</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>MappingExample<span class="w"> </span>m<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span>MappingExample<span class="p">();</span>
<span class="w">        </span>m<span class="p">.</span>update<span class="p">(</span><span class="m m-Decimal">100</span><span class="p">);</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>m<span class="p">.</span>balances<span class="p">(</span><span class="kt">address</span><span class="p">(</span><span class="kt">this</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The example below is a simplified version of an
<a class="reference external" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol">ERC20 token</a>.
<code class="docutils literal notranslate"><span class="pre">_allowances</span></code> is an example of a mapping type inside another mapping type.</p>
<p>In the example below, the optional <code class="docutils literal notranslate"><span class="pre">KeyName</span></code> and <code class="docutils literal notranslate"><span class="pre">ValueName</span></code> are provided for the mapping.
It does not affect any contract functionality or bytecode, it only sets the <code class="docutils literal notranslate"><span class="pre">name</span></code> field
for the inputs and outputs in the ABI for the mapping’s getter.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguMTg7Cgpjb250cmFjdCBNYXBwaW5nRXhhbXBsZVdpdGhOYW1lcyB7CiAgICBtYXBwaW5nKGFkZHJlc3MgdXNlciA9PiB1aW50IGJhbGFuY2UpIHB1YmxpYyBiYWxhbmNlczsKCiAgICBmdW5jdGlvbiB1cGRhdGUodWludCBuZXdCYWxhbmNlKSBwdWJsaWMgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gbmV3QmFsYW5jZTsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.18</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">MappingExampleWithNames</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">balance</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>balances<span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">update</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">newBalance</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>newBalance<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The example below uses <code class="docutils literal notranslate"><span class="pre">_allowances</span></code> to record the amount someone else is allowed to withdraw from your account.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjIyIDwwLjkuMDsKCmNvbnRyYWN0IE1hcHBpbmdFeGFtcGxlIHsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBfYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpKSBwcml2YXRlIF9hbGxvd2FuY2VzOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBfYWxsb3dhbmNlc1tvd25lcl1bc3BlbmRlcl07CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3Mgc2VuZGVyLCBhZGRyZXNzIHJlY2lwaWVudCwgdWludDI1NiBhbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfYWxsb3dhbmNlc1tzZW5kZXJdW21zZy5zZW5kZXJdID49IGFtb3VudCwgIkVSQzIwOiBBbGxvd2FuY2Ugbm90IGhpZ2ggZW5vdWdoLiIpOwogICAgICAgIF9hbGxvd2FuY2VzW3NlbmRlcl1bbXNnLnNlbmRlcl0gLT0gYW1vdW50OwogICAgICAgIF90cmFuc2ZlcihzZW5kZXIsIHJlY2lwaWVudCwgYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiBhbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShzcGVuZGVyICE9IGFkZHJlc3MoMCksICJFUkMyMDogYXBwcm92ZSB0byB0aGUgemVybyBhZGRyZXNzIik7CgogICAgICAgIF9hbGxvd2FuY2VzW21zZy5zZW5kZXJdW3NwZW5kZXJdID0gYW1vdW50OwogICAgICAgIGVtaXQgQXBwcm92YWwobXNnLnNlbmRlciwgc3BlbmRlciwgYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBzZW5kZXIsIGFkZHJlc3MgcmVjaXBpZW50LCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoc2VuZGVyICE9IGFkZHJlc3MoMCksICJFUkMyMDogdHJhbnNmZXIgZnJvbSB0aGUgemVybyBhZGRyZXNzIik7CiAgICAgICAgcmVxdWlyZShyZWNpcGllbnQgIT0gYWRkcmVzcygwKSwgIkVSQzIwOiB0cmFuc2ZlciB0byB0aGUgemVybyBhZGRyZXNzIik7CiAgICAgICAgcmVxdWlyZShfYmFsYW5jZXNbc2VuZGVyXSA+PSBhbW91bnQsICJFUkMyMDogTm90IGVub3VnaCBmdW5kcy4iKTsKCiAgICAgICAgX2JhbGFuY2VzW3NlbmRlcl0gLT0gYW1vdW50OwogICAgICAgIF9iYWxhbmNlc1tyZWNpcGllbnRdICs9IGFtb3VudDsKICAgICAgICBlbWl0IFRyYW5zZmVyKHNlbmRlciwgcmVjaXBpZW50LCBhbW91bnQpOwogICAgfQp9" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.22</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">MappingExample</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint256</span><span class="p">)</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>_balances<span class="p">;</span>
<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint256</span><span class="p">))</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>_allowances<span class="p">;</span>

<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">Transfer</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>from<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>to<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">value</span><span class="p">);</span>
<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">Approval</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>owner<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>spender<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">value</span><span class="p">);</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">allowance</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">owner</span><span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">spender</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>_allowances<span class="p">[</span>owner<span class="p">][</span>spender<span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">transferFrom</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">sender</span><span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">recipient</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">amount</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>_allowances<span class="p">[</span>sender<span class="p">][</span><span class="k">msg.sender</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span>amount<span class="p">,</span><span class="w"> </span><span class="s2">&quot;ERC20: Allowance not high enough.&quot;</span><span class="p">);</span>
<span class="w">        </span>_allowances<span class="p">[</span>sender<span class="p">][</span><span class="k">msg.sender</span><span class="p">]</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span>amount<span class="p">;</span>
<span class="w">        </span>_transfer<span class="p">(</span>sender<span class="p">,</span><span class="w"> </span>recipient<span class="p">,</span><span class="w"> </span>amount<span class="p">);</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">approve</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">spender</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">amount</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>spender<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;ERC20: approve to the zero address&quot;</span><span class="p">);</span>

<span class="w">        </span>_allowances<span class="p">[</span><span class="k">msg.sender</span><span class="p">][</span>spender<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>amount<span class="p">;</span>
<span class="w">        </span>emit<span class="w"> </span>Approval<span class="p">(</span><span class="k">msg.sender</span><span class="p">,</span><span class="w"> </span>spender<span class="p">,</span><span class="w"> </span>amount<span class="p">);</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">_transfer</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">sender</span><span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">recipient</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">amount</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>sender<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;ERC20: transfer from the zero address&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>recipient<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;ERC20: transfer to the zero address&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>_balances<span class="p">[</span>sender<span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span>amount<span class="p">,</span><span class="w"> </span><span class="s2">&quot;ERC20: Not enough funds.&quot;</span><span class="p">);</span>

<span class="w">        </span>_balances<span class="p">[</span>sender<span class="p">]</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span>amount<span class="p">;</span>
<span class="w">        </span>_balances<span class="p">[</span>recipient<span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>amount<span class="p">;</span>
<span class="w">        </span>emit<span class="w"> </span>Transfer<span class="p">(</span>sender<span class="p">,</span><span class="w"> </span>recipient<span class="p">,</span><span class="w"> </span>amount<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="iterable-mappings">
<span id="index-27"></span><span id="id19"></span><h3>Iterable Mappings<a class="headerlink" href="#iterable-mappings" title="Permalink to this heading"></a></h3>
<p>You cannot iterate over mappings, i.e. you cannot enumerate their keys.
It is possible, though, to implement a data structure on
top of them and iterate over that. For example, the code below implements an
<code class="docutils literal notranslate"><span class="pre">IterableMapping</span></code> library that the <code class="docutils literal notranslate"><span class="pre">User</span></code> contract then adds data to, and
the <code class="docutils literal notranslate"><span class="pre">sum</span></code> function iterates over to sum all the values.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguODsKCnN0cnVjdCBJbmRleFZhbHVlIHsgdWludCBrZXlJbmRleDsgdWludCB2YWx1ZTsgfQpzdHJ1Y3QgS2V5RmxhZyB7IHVpbnQga2V5OyBib29sIGRlbGV0ZWQ7IH0KCnN0cnVjdCBpdG1hcCB7CiAgICBtYXBwaW5nKHVpbnQgPT4gSW5kZXhWYWx1ZSkgZGF0YTsKICAgIEtleUZsYWdbXSBrZXlzOwogICAgdWludCBzaXplOwp9Cgp0eXBlIEl0ZXJhdG9yIGlzIHVpbnQ7CgpsaWJyYXJ5IEl0ZXJhYmxlTWFwcGluZyB7CiAgICBmdW5jdGlvbiBpbnNlcnQoaXRtYXAgc3RvcmFnZSBzZWxmLCB1aW50IGtleSwgdWludCB2YWx1ZSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCByZXBsYWNlZCkgewogICAgICAgIHVpbnQga2V5SW5kZXggPSBzZWxmLmRhdGFba2V5XS5rZXlJbmRleDsKICAgICAgICBzZWxmLmRhdGFba2V5XS52YWx1ZSA9IHZhbHVlOwogICAgICAgIGlmIChrZXlJbmRleCA+IDApCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGVsc2UgewogICAgICAgICAgICBrZXlJbmRleCA9IHNlbGYua2V5cy5sZW5ndGg7CiAgICAgICAgICAgIHNlbGYua2V5cy5wdXNoKCk7CiAgICAgICAgICAgIHNlbGYuZGF0YVtrZXldLmtleUluZGV4ID0ga2V5SW5kZXggKyAxOwogICAgICAgICAgICBzZWxmLmtleXNba2V5SW5kZXhdLmtleSA9IGtleTsKICAgICAgICAgICAgc2VsZi5zaXplKys7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlKGl0bWFwIHN0b3JhZ2Ugc2VsZiwgdWludCBrZXkpIGludGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHVpbnQga2V5SW5kZXggPSBzZWxmLmRhdGFba2V5XS5rZXlJbmRleDsKICAgICAgICBpZiAoa2V5SW5kZXggPT0gMCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGRlbGV0ZSBzZWxmLmRhdGFba2V5XTsKICAgICAgICBzZWxmLmtleXNba2V5SW5kZXggLSAxXS5kZWxldGVkID0gdHJ1ZTsKICAgICAgICBzZWxmLnNpemUgLS07CiAgICB9CgogICAgZnVuY3Rpb24gY29udGFpbnMoaXRtYXAgc3RvcmFnZSBzZWxmLCB1aW50IGtleSkgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGYuZGF0YVtrZXldLmtleUluZGV4ID4gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBpdGVyYXRlU3RhcnQoaXRtYXAgc3RvcmFnZSBzZWxmKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKEl0ZXJhdG9yKSB7CiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yU2tpcERlbGV0ZWQoc2VsZiwgMCk7CiAgICB9CgogICAgZnVuY3Rpb24gaXRlcmF0ZVZhbGlkKGl0bWFwIHN0b3JhZ2Ugc2VsZiwgSXRlcmF0b3IgaXRlcmF0b3IpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBJdGVyYXRvci51bndyYXAoaXRlcmF0b3IpIDwgc2VsZi5rZXlzLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBpdGVyYXRlTmV4dChpdG1hcCBzdG9yYWdlIHNlbGYsIEl0ZXJhdG9yIGl0ZXJhdG9yKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKEl0ZXJhdG9yKSB7CiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yU2tpcERlbGV0ZWQoc2VsZiwgSXRlcmF0b3IudW53cmFwKGl0ZXJhdG9yKSArIDEpOwogICAgfQoKICAgIGZ1bmN0aW9uIGl0ZXJhdGVHZXQoaXRtYXAgc3RvcmFnZSBzZWxmLCBJdGVyYXRvciBpdGVyYXRvcikgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50IGtleSwgdWludCB2YWx1ZSkgewogICAgICAgIHVpbnQga2V5SW5kZXggPSBJdGVyYXRvci51bndyYXAoaXRlcmF0b3IpOwogICAgICAgIGtleSA9IHNlbGYua2V5c1trZXlJbmRleF0ua2V5OwogICAgICAgIHZhbHVlID0gc2VsZi5kYXRhW2tleV0udmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gaXRlcmF0b3JTa2lwRGVsZXRlZChpdG1hcCBzdG9yYWdlIHNlbGYsIHVpbnQga2V5SW5kZXgpIHByaXZhdGUgdmlldyByZXR1cm5zIChJdGVyYXRvcikgewogICAgICAgIHdoaWxlIChrZXlJbmRleCA8IHNlbGYua2V5cy5sZW5ndGggJiYgc2VsZi5rZXlzW2tleUluZGV4XS5kZWxldGVkKQogICAgICAgICAgICBrZXlJbmRleCsrOwogICAgICAgIHJldHVybiBJdGVyYXRvci53cmFwKGtleUluZGV4KTsKICAgIH0KfQoKLy8gSG93IHRvIHVzZSBpdApjb250cmFjdCBVc2VyIHsKICAgIC8vIEp1c3QgYSBzdHJ1Y3QgaG9sZGluZyBvdXIgZGF0YS4KICAgIGl0bWFwIGRhdGE7CiAgICAvLyBBcHBseSBsaWJyYXJ5IGZ1bmN0aW9ucyB0byB0aGUgZGF0YSB0eXBlLgogICAgdXNpbmcgSXRlcmFibGVNYXBwaW5nIGZvciBpdG1hcDsKCiAgICAvLyBJbnNlcnQgc29tZXRoaW5nCiAgICBmdW5jdGlvbiBpbnNlcnQodWludCBrLCB1aW50IHYpIHB1YmxpYyByZXR1cm5zICh1aW50IHNpemUpIHsKICAgICAgICAvLyBUaGlzIGNhbGxzIEl0ZXJhYmxlTWFwcGluZy5pbnNlcnQoZGF0YSwgaywgdikKICAgICAgICBkYXRhLmluc2VydChrLCB2KTsKICAgICAgICAvLyBXZSBjYW4gc3RpbGwgYWNjZXNzIG1lbWJlcnMgb2YgdGhlIHN0cnVjdCwKICAgICAgICAvLyBidXQgd2Ugc2hvdWxkIHRha2UgY2FyZSBub3QgdG8gbWVzcyB3aXRoIHRoZW0uCiAgICAgICAgcmV0dXJuIGRhdGEuc2l6ZTsKICAgIH0KCiAgICAvLyBDb21wdXRlcyB0aGUgc3VtIG9mIGFsbCBzdG9yZWQgZGF0YS4KICAgIGZ1bmN0aW9uIHN1bSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgcykgewogICAgICAgIGZvciAoCiAgICAgICAgICAgIEl0ZXJhdG9yIGkgPSBkYXRhLml0ZXJhdGVTdGFydCgpOwogICAgICAgICAgICBkYXRhLml0ZXJhdGVWYWxpZChpKTsKICAgICAgICAgICAgaSA9IGRhdGEuaXRlcmF0ZU5leHQoaSkKICAgICAgICApIHsKICAgICAgICAgICAgKCwgdWludCB2YWx1ZSkgPSBkYXRhLml0ZXJhdGVHZXQoaSk7CiAgICAgICAgICAgIHMgKz0gdmFsdWU7CiAgICAgICAgfQogICAgfQp9" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.8</span><span class="p">;</span>

<span class="kt">struct</span><span class="w"> </span><span class="nv">IndexValue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="p">;</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">value</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="kt">struct</span><span class="w"> </span><span class="nv">KeyFlag</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nv">deleted</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="kt">struct</span><span class="w"> </span><span class="nv">itmap</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>IndexValue<span class="p">)</span><span class="w"> </span>data<span class="p">;</span>
<span class="w">    </span>KeyFlag<span class="p">[]</span><span class="w"> </span>keys<span class="p">;</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">size</span><span class="p">;</span>
<span class="p">}</span>

type<span class="w"> </span>Iterator<span class="w"> </span><span class="kt">is</span><span class="w"> </span><span class="kt">uint</span><span class="p">;</span>

<span class="kt">library</span><span class="w"> </span>IterableMapping<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">insert</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">replaced</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>keyIndex<span class="p">;</span>
<span class="w">        </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>value<span class="w"> </span><span class="o">=</span><span class="w"> </span>value<span class="p">;</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>keyIndex<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">)</span>
<span class="w">            </span><span class="kt">return</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span>
<span class="w">        </span><span class="kt">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>keyIndex<span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">.</span>length<span class="p">;</span>
<span class="w">            </span>self<span class="p">.</span>keys<span class="p">.</span>push<span class="p">();</span>
<span class="w">            </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>keyIndex<span class="w"> </span><span class="o">=</span><span class="w"> </span>keyIndex<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="w">            </span>self<span class="p">.</span>keys<span class="p">[</span>keyIndex<span class="p">].</span>key<span class="w"> </span><span class="o">=</span><span class="w"> </span>key<span class="p">;</span>
<span class="w">            </span>self<span class="p">.</span>size<span class="o">++</span><span class="p">;</span>
<span class="w">            </span><span class="kt">return</span><span class="w"> </span><span class="kt">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">remove</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">success</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>keyIndex<span class="p">;</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>keyIndex<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">)</span>
<span class="w">            </span><span class="kt">return</span><span class="w"> </span><span class="kt">false</span><span class="p">;</span>
<span class="w">        </span>delete<span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">];</span>
<span class="w">        </span>self<span class="p">.</span>keys<span class="p">[</span>keyIndex<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">].</span>deleted<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span>
<span class="w">        </span>self<span class="p">.</span>size<span class="w"> </span><span class="o">--</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">contains</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>keyIndex<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">iterateStart</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>Iterator<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>iteratorSkipDeleted<span class="p">(</span>self<span class="p">,</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">iterateValid</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span>Iterator<span class="w"> </span>iterator<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>Iterator<span class="p">.</span>unwrap<span class="p">(</span>iterator<span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">.</span>length<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">iterateNext</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span>Iterator<span class="w"> </span>iterator<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>Iterator<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>iteratorSkipDeleted<span class="p">(</span>self<span class="p">,</span><span class="w"> </span>Iterator<span class="p">.</span>unwrap<span class="p">(</span>iterator<span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">iterateGet</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span>Iterator<span class="w"> </span>iterator<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Iterator<span class="p">.</span>unwrap<span class="p">(</span>iterator<span class="p">);</span>
<span class="w">        </span>key<span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">[</span>keyIndex<span class="p">].</span>key<span class="p">;</span>
<span class="w">        </span>value<span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>value<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">iteratorSkipDeleted</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="p">)</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>Iterator<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">while</span><span class="w"> </span><span class="p">(</span>keyIndex<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">.</span>length<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">[</span>keyIndex<span class="p">].</span>deleted<span class="p">)</span>
<span class="w">            </span>keyIndex<span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>Iterator<span class="p">.</span>wrap<span class="p">(</span>keyIndex<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// How to use it</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Just a struct holding our data.</span>
<span class="w">    </span>itmap<span class="w"> </span>data<span class="p">;</span>
<span class="w">    </span><span class="c1">// Apply library functions to the data type.</span>
<span class="w">    </span>using<span class="w"> </span>IterableMapping<span class="w"> </span><span class="kt">for</span><span class="w"> </span>itmap<span class="p">;</span>

<span class="w">    </span><span class="c1">// Insert something</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">insert</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">k</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">v</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This calls IterableMapping.insert(data, k, v)</span>
<span class="w">        </span>data<span class="p">.</span>insert<span class="p">(</span>k<span class="p">,</span><span class="w"> </span>v<span class="p">);</span>
<span class="w">        </span><span class="c1">// We can still access members of the struct,</span>
<span class="w">        </span><span class="c1">// but we should take care not to mess with them.</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>data<span class="p">.</span>size<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Computes the sum of all stored data.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">sum</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span>Iterator<span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">.</span>iterateStart<span class="p">();</span>
<span class="w">            </span>data<span class="p">.</span>iterateValid<span class="p">(</span>i<span class="p">);</span>
<span class="w">            </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">.</span>iterateNext<span class="p">(</span>i<span class="p">)</span>
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="p">(,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">.</span>iterateGet<span class="p">(</span>i<span class="p">);</span>
<span class="w">            </span>s<span class="w"> </span><span class="o">+=</span><span class="w"> </span>value<span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="operators">
<span id="index-28"></span><h2>Operators<a class="headerlink" href="#operators" title="Permalink to this heading"></a></h2>
<p>Arithmetic and bit operators can be applied even if the two operands do not have the same type.
For example, you can compute <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">z</span></code>, where <code class="docutils literal notranslate"><span class="pre">x</span></code> is a <code class="docutils literal notranslate"><span class="pre">uint8</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> has
the type <code class="docutils literal notranslate"><span class="pre">uint32</span></code>. In these cases, the following mechanism will be used to determine
the type in which the operation is computed (this is important in case of overflow)
and the type of the operator’s result:</p>
<ol class="arabic simple">
<li><p>If the type of the right operand can be implicitly converted to the type of the left
operand, use the type of the left operand,</p></li>
<li><p>if the type of the left operand can be implicitly converted to the type of the right
operand, use the type of the right operand,</p></li>
<li><p>otherwise, the operation is not allowed.</p></li>
</ol>
<p>In case one of the operands is a <a class="reference internal" href="#rational-literals"><span class="std std-ref">literal number</span></a> it is first converted to its
“mobile type”, which is the smallest type that can hold the value
(unsigned types of the same bit-width are considered “smaller” than the signed types).
If both are literal numbers, the operation is computed with effectively unlimited precision in
that the expression is evaluated to whatever precision is necessary so that none is lost
when the result is used with a non-literal type.</p>
<p>The operator’s result type is the same as the type the operation is performed in,
except for comparison operators where the result is always <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p>
<p>The operators <code class="docutils literal notranslate"><span class="pre">**</span></code> (exponentiation), <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code>  and <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> use the type of the
left operand for the operation and the result.</p>
<section id="ternary-operator">
<h3>Ternary Operator<a class="headerlink" href="#ternary-operator" title="Permalink to this heading"></a></h3>
<p>The ternary operator is used in expressions of the form <code class="docutils literal notranslate"><span class="pre">&lt;expression&gt;</span> <span class="pre">?</span> <span class="pre">&lt;trueExpression&gt;</span> <span class="pre">:</span> <span class="pre">&lt;falseExpression&gt;</span></code>.
It evaluates one of the latter two given expressions depending upon the result of the evaluation of the main <code class="docutils literal notranslate"><span class="pre">&lt;expression&gt;</span></code>.
If <code class="docutils literal notranslate"><span class="pre">&lt;expression&gt;</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">true</span></code>, then <code class="docutils literal notranslate"><span class="pre">&lt;trueExpression&gt;</span></code> will be evaluated, otherwise <code class="docutils literal notranslate"><span class="pre">&lt;falseExpression&gt;</span></code> is evaluated.</p>
<p>The result of the ternary operator does not have a rational number type, even if all of its operands are rational number literals.
The result type is determined from the types of the two operands in the same way as above, converting to their mobile type first if required.</p>
<p>As a consequence, <code class="docutils literal notranslate"><span class="pre">255</span> <span class="pre">+</span> <span class="pre">(true</span> <span class="pre">?</span> <span class="pre">1</span> <span class="pre">:</span> <span class="pre">0)</span></code> will revert due to arithmetic overflow.
The reason is that <code class="docutils literal notranslate"><span class="pre">(true</span> <span class="pre">?</span> <span class="pre">1</span> <span class="pre">:</span> <span class="pre">0)</span></code> is of <code class="docutils literal notranslate"><span class="pre">uint8</span></code> type, which forces the addition to be performed in <code class="docutils literal notranslate"><span class="pre">uint8</span></code> as well,
and 256 exceeds the range allowed for this type.</p>
<p>Another consequence is that an expression like <code class="docutils literal notranslate"><span class="pre">1.5</span> <span class="pre">+</span> <span class="pre">1.5</span></code> is valid but <code class="docutils literal notranslate"><span class="pre">1.5</span> <span class="pre">+</span> <span class="pre">(true</span> <span class="pre">?</span> <span class="pre">1.5</span> <span class="pre">:</span> <span class="pre">2.5)</span></code> is not.
This is because the former is a rational expression evaluated in unlimited precision and only its final value matters.
The latter involves a conversion of a fractional rational number to an integer, which is currently disallowed.</p>
</section>
<section id="compound-and-increment-decrement-operators">
<span id="index-29"></span><h3>Compound and Increment/Decrement Operators<a class="headerlink" href="#compound-and-increment-decrement-operators" title="Permalink to this heading"></a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">a</span></code> is an LValue (i.e. a variable or something that can be assigned to), the
following operators are available as shorthands:</p>
<p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+=</span> <span class="pre">e</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">e</span></code>. The operators <code class="docutils literal notranslate"><span class="pre">-=</span></code>, <code class="docutils literal notranslate"><span class="pre">*=</span></code>, <code class="docutils literal notranslate"><span class="pre">/=</span></code>, <code class="docutils literal notranslate"><span class="pre">%=</span></code>,
<code class="docutils literal notranslate"><span class="pre">|=</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;=</span></code>, <code class="docutils literal notranslate"><span class="pre">^=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;&lt;=</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;&gt;=</span></code> are defined accordingly. <code class="docutils literal notranslate"><span class="pre">a++</span></code> and <code class="docutils literal notranslate"><span class="pre">a--</span></code> are equivalent
to <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+=</span> <span class="pre">1</span></code> / <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-=</span> <span class="pre">1</span></code> but the expression itself still has the previous value
of <code class="docutils literal notranslate"><span class="pre">a</span></code>. In contrast, <code class="docutils literal notranslate"><span class="pre">--a</span></code> and <code class="docutils literal notranslate"><span class="pre">++a</span></code> have the same effect on <code class="docutils literal notranslate"><span class="pre">a</span></code> but
return the value after the change.</p>
</section>
<section id="delete">
<span id="index-30"></span><span id="id20"></span><h3>delete<a class="headerlink" href="#delete" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a</span></code> assigns the initial value for the type to <code class="docutils literal notranslate"><span class="pre">a</span></code>. I.e. for integers it is
equivalent to <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">0</span></code>, but it can also be used on arrays, where it assigns a dynamic
array of length zero or a static array of the same length with all elements set to their
initial value. <code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a[x]</span></code> deletes the item at index <code class="docutils literal notranslate"><span class="pre">x</span></code> of the array and leaves
all other elements and the length of the array untouched. This especially means that it leaves
a gap in the array. If you plan to remove items, a <a class="reference internal" href="#mapping-types"><span class="std std-ref">mapping</span></a> is probably a better choice.</p>
<p>For structs, it assigns a struct with all members reset. In other words,
the value of <code class="docutils literal notranslate"><span class="pre">a</span></code> after <code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a</span></code> is the same as if <code class="docutils literal notranslate"><span class="pre">a</span></code> would be declared
without assignment, with the following caveat:</p>
<p><code class="docutils literal notranslate"><span class="pre">delete</span></code> has no effect on mappings (as the keys of mappings may be arbitrary and
are generally unknown). So if you delete a struct, it will reset all members that
are not mappings and also recurse into the members unless they are mappings.
However, individual keys and what they map to can be deleted: If <code class="docutils literal notranslate"><span class="pre">a</span></code> is a
mapping, then <code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a[x]</span></code> will delete the value stored at <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>It is important to note that <code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a</span></code> really behaves like an
assignment to <code class="docutils literal notranslate"><span class="pre">a</span></code>, i.e. it stores a new object in <code class="docutils literal notranslate"><span class="pre">a</span></code>.
This distinction is visible when <code class="docutils literal notranslate"><span class="pre">a</span></code> is reference variable: It
will only reset <code class="docutils literal notranslate"><span class="pre">a</span></code> itself, not the
value it referred to previously.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjAgPDAuOS4wOwoKY29udHJhY3QgRGVsZXRlRXhhbXBsZSB7CiAgICB1aW50IGRhdGE7CiAgICB1aW50W10gZGF0YUFycmF5OwoKICAgIGZ1bmN0aW9uIGYoKSBwdWJsaWMgewogICAgICAgIHVpbnQgeCA9IGRhdGE7CiAgICAgICAgZGVsZXRlIHg7IC8vIHNldHMgeCB0byAwLCBkb2VzIG5vdCBhZmZlY3QgZGF0YQogICAgICAgIGRlbGV0ZSBkYXRhOyAvLyBzZXRzIGRhdGEgdG8gMCwgZG9lcyBub3QgYWZmZWN0IHgKICAgICAgICB1aW50W10gc3RvcmFnZSB5ID0gZGF0YUFycmF5OwogICAgICAgIGRlbGV0ZSBkYXRhQXJyYXk7IC8vIHRoaXMgc2V0cyBkYXRhQXJyYXkubGVuZ3RoIHRvIHplcm8sIGJ1dCBhcyB1aW50W10gaXMgYSBjb21wbGV4IG9iamVjdCwgYWxzbwogICAgICAgIC8vIHkgaXMgYWZmZWN0ZWQgd2hpY2ggaXMgYW4gYWxpYXMgdG8gdGhlIHN0b3JhZ2Ugb2JqZWN0CiAgICAgICAgLy8gT24gdGhlIG90aGVyIGhhbmQ6ICJkZWxldGUgeSIgaXMgbm90IHZhbGlkLCBhcyBhc3NpZ25tZW50cyB0byBsb2NhbCB2YXJpYWJsZXMKICAgICAgICAvLyByZWZlcmVuY2luZyBzdG9yYWdlIG9iamVjdHMgY2FuIG9ubHkgYmUgbWFkZSBmcm9tIGV4aXN0aW5nIHN0b3JhZ2Ugb2JqZWN0cy4KICAgICAgICBhc3NlcnQoeS5sZW5ndGggPT0gMCk7CiAgICB9Cn0=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">DeleteExample</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">data</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>dataArray<span class="p">;</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">;</span>
<span class="w">        </span>delete<span class="w"> </span>x<span class="p">;</span><span class="w"> </span><span class="c1">// sets x to 0, does not affect data</span>
<span class="w">        </span>delete<span class="w"> </span>data<span class="p">;</span><span class="w"> </span><span class="c1">// sets data to 0, does not affect x</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>storage<span class="w"> </span>y<span class="w"> </span><span class="o">=</span><span class="w"> </span>dataArray<span class="p">;</span>
<span class="w">        </span>delete<span class="w"> </span>dataArray<span class="p">;</span><span class="w"> </span><span class="c1">// this sets dataArray.length to zero, but as uint[] is a complex object, also</span>
<span class="w">        </span><span class="c1">// y is affected which is an alias to the storage object</span>
<span class="w">        </span><span class="c1">// On the other hand: &quot;delete y&quot; is not valid, as assignments to local variables</span>
<span class="w">        </span><span class="c1">// referencing storage objects can only be made from existing storage objects.</span>
<span class="w">        </span>assert<span class="p">(</span>y<span class="p">.</span>length<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="order-of-precedence-of-operators">
<span id="order"></span><span id="index-31"></span><h3>Order of Precedence of Operators<a class="headerlink" href="#order-of-precedence-of-operators" title="Permalink to this heading"></a></h3>
<p>The following is the order of precedence for operators, listed in order of evaluation.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Precedence</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Operator</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="6"><p><em>1</em></p></td>
<td><p>Postfix increment and decrement</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">++</span></code>, <code class="docutils literal notranslate"><span class="pre">--</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>New expression</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">&lt;typename&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Array subscripting</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;array&gt;[&lt;index&gt;]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Member access</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;object&gt;.&lt;member&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Function-like call</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;func&gt;(&lt;args...&gt;)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Parentheses</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(&lt;statement&gt;)</span></code></p></td>
</tr>
<tr class="row-even"><td rowspan="5"><p><em>2</em></p></td>
<td><p>Prefix increment and decrement</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">++</span></code>, <code class="docutils literal notranslate"><span class="pre">--</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Unary minus</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Unary operations</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">delete</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Logical NOT</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">!</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Bitwise NOT</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">~</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><em>3</em></p></td>
<td><p>Exponentiation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">**</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>4</em></p></td>
<td><p>Multiplication, division and modulo</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><em>5</em></p></td>
<td><p>Addition and subtraction</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>6</em></p></td>
<td><p>Bitwise shift operators</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><em>7</em></p></td>
<td><p>Bitwise AND</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&amp;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>8</em></p></td>
<td><p>Bitwise XOR</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><em>9</em></p></td>
<td><p>Bitwise OR</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">|</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>10</em></p></td>
<td><p>Inequality operators</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><em>11</em></p></td>
<td><p>Equality operators</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>12</em></p></td>
<td><p>Logical AND</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><em>13</em></p></td>
<td><p>Logical OR</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">||</span></code></p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p><em>14</em></p></td>
<td><p>Ternary operator</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;conditional&gt;</span> <span class="pre">?</span> <span class="pre">&lt;if-true&gt;</span> <span class="pre">:</span> <span class="pre">&lt;if-false&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Assignment operators</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">=</span></code>, <code class="docutils literal notranslate"><span class="pre">|=</span></code>, <code class="docutils literal notranslate"><span class="pre">^=</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;&lt;=</span></code>,
<code class="docutils literal notranslate"><span class="pre">&gt;&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">+=</span></code>, <code class="docutils literal notranslate"><span class="pre">-=</span></code>, <code class="docutils literal notranslate"><span class="pre">*=</span></code>, <code class="docutils literal notranslate"><span class="pre">/=</span></code>,
<code class="docutils literal notranslate"><span class="pre">%=</span></code></p></td>
</tr>
<tr class="row-even"><td><p><em>15</em></p></td>
<td><p>Comma operator</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">,</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="conversions-between-elementary-types">
<span id="types-conversion-elementary-types"></span><span id="index-32"></span><h2>Conversions between Elementary Types<a class="headerlink" href="#conversions-between-elementary-types" title="Permalink to this heading"></a></h2>
<section id="implicit-conversions">
<h3>Implicit Conversions<a class="headerlink" href="#implicit-conversions" title="Permalink to this heading"></a></h3>
<p>An implicit type conversion is automatically applied by the compiler in some cases
during assignments, when passing arguments to functions and when applying operators.
In general, an implicit conversion between value-types is possible if it makes
sense semantically and no information is lost.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">uint8</span></code> is convertible to
<code class="docutils literal notranslate"><span class="pre">uint16</span></code> and <code class="docutils literal notranslate"><span class="pre">int128</span></code> to <code class="docutils literal notranslate"><span class="pre">int256</span></code>, but <code class="docutils literal notranslate"><span class="pre">int8</span></code> is not convertible to <code class="docutils literal notranslate"><span class="pre">uint256</span></code>,
because <code class="docutils literal notranslate"><span class="pre">uint256</span></code> cannot hold values such as <code class="docutils literal notranslate"><span class="pre">-1</span></code>.</p>
<p>If an operator is applied to different types, the compiler tries to implicitly
convert one of the operands to the type of the other (the same is true for assignments).
This means that operations are always performed in the type of one of the operands.</p>
<p>For more details about which implicit conversions are possible,
please consult the sections about the types themselves.</p>
<p>In the example below, <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code>, the operands of the addition,
do not have the same type, but <code class="docutils literal notranslate"><span class="pre">uint8</span></code> can
be implicitly converted to <code class="docutils literal notranslate"><span class="pre">uint16</span></code> and not vice-versa. Because of that,
<code class="docutils literal notranslate"><span class="pre">y</span></code> is converted to the type of <code class="docutils literal notranslate"><span class="pre">z</span></code> before the addition is performed
in the <code class="docutils literal notranslate"><span class="pre">uint16</span></code> type. The resulting type of the expression <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">+</span> <span class="pre">z</span></code> is <code class="docutils literal notranslate"><span class="pre">uint16</span></code>.
Because it is assigned to a variable of type <code class="docutils literal notranslate"><span class="pre">uint32</span></code> another implicit conversion
is performed after the addition.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=dWludDggeTsKdWludDE2IHo7CnVpbnQzMiB4ID0geSArIHo7" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8</span><span class="w"> </span><span class="nv">y</span><span class="p">;</span>
<span class="kt">uint16</span><span class="w"> </span><span class="nv">z</span><span class="p">;</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>y<span class="w"> </span><span class="o">+</span><span class="w"> </span>z<span class="p">;</span>
</pre></div>
</div>
</section>
<section id="explicit-conversions">
<h3>Explicit Conversions<a class="headerlink" href="#explicit-conversions" title="Permalink to this heading"></a></h3>
<p>If the compiler does not allow implicit conversion but you are confident a conversion will work,
an explicit type conversion is sometimes possible. This may
result in unexpected behavior and allows you to bypass some security
features of the compiler, so be sure to test that the
result is what you want and expect!</p>
<p>Take the following example that converts a negative <code class="docutils literal notranslate"><span class="pre">int</span></code> to a <code class="docutils literal notranslate"><span class="pre">uint</span></code>:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=aW50ICB5ID0gLTM7CnVpbnQgeCA9IHVpbnQoeSk7" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w">  </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="m m-Decimal">3</span><span class="p">;</span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint</span><span class="p">(</span>y<span class="p">);</span>
</pre></div>
</div>
<p>At the end of this code snippet, <code class="docutils literal notranslate"><span class="pre">x</span></code> will have the value <code class="docutils literal notranslate"><span class="pre">0xfffff..fd</span></code> (64 hex
characters), which is -3 in the two’s complement representation of 256 bits.</p>
<p>If an integer is explicitly converted to a smaller type, higher-order bits are
cut off:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=dWludDMyIGEgPSAweDEyMzQ1Njc4Owp1aW50MTYgYiA9IHVpbnQxNihhKTsgLy8gYiB3aWxsIGJlIDB4NTY3OCBub3c=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12345678</span><span class="p">;</span>
<span class="kt">uint16</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint16</span><span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x5678 now</span>
</pre></div>
</div>
<p>If an integer is explicitly converted to a larger type, it is padded on the left (i.e., at the higher order end).
The result of the conversion will compare equal to the original integer:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=dWludDE2IGEgPSAweDEyMzQ7CnVpbnQzMiBiID0gdWludDMyKGEpOyAvLyBiIHdpbGwgYmUgMHgwMDAwMTIzNCBub3cKYXNzZXJ0KGEgPT0gYik7" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">uint16</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint32</span><span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x00001234 now</span>
assert<span class="p">(</span>a<span class="w"> </span><span class="o">==</span><span class="w"> </span>b<span class="p">);</span>
</pre></div>
</div>
<p>Fixed-size bytes types behave differently during conversions. They can be thought of as
sequences of individual bytes and converting to a smaller type will cut off the
sequence:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ynl0ZXMyIGEgPSAweDEyMzQ7CmJ5dGVzMSBiID0gYnl0ZXMxKGEpOyAvLyBiIHdpbGwgYmUgMHgxMg==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span>
bytes1<span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes1<span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x12</span>
</pre></div>
</div>
<p>If a fixed-size bytes type is explicitly converted to a larger type, it is padded on
the right. Accessing the byte at a fixed index will result in the same value before and
after the conversion (if the index is still in range):</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ynl0ZXMyIGEgPSAweDEyMzQ7CmJ5dGVzNCBiID0gYnl0ZXM0KGEpOyAvLyBiIHdpbGwgYmUgMHgxMjM0MDAwMAphc3NlcnQoYVswXSA9PSBiWzBdKTsKYXNzZXJ0KGFbMV0gPT0gYlsxXSk7" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span>
bytes4<span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes4<span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x12340000</span>
assert<span class="p">(</span>a<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>b<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]);</span>
assert<span class="p">(</span>a<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>b<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]);</span>
</pre></div>
</div>
<p>Since integers and fixed-size byte arrays behave differently when truncating or
padding, explicit conversions between integers and fixed-size byte arrays are only allowed,
if both have the same size. If you want to convert between integers and fixed-size byte arrays of
different size, you have to use intermediate conversions that make the desired truncation and padding
rules explicit:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ynl0ZXMyIGEgPSAweDEyMzQ7CnVpbnQzMiBiID0gdWludDE2KGEpOyAvLyBiIHdpbGwgYmUgMHgwMDAwMTIzNAp1aW50MzIgYyA9IHVpbnQzMihieXRlczQoYSkpOyAvLyBjIHdpbGwgYmUgMHgxMjM0MDAwMAp1aW50OCBkID0gdWludDgodWludDE2KGEpKTsgLy8gZCB3aWxsIGJlIDB4MzQKdWludDggZSA9IHVpbnQ4KGJ5dGVzMShhKSk7IC8vIGUgd2lsbCBiZSAweDEy" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint16</span><span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x00001234</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint32</span><span class="p">(</span>bytes4<span class="p">(</span>a<span class="p">));</span><span class="w"> </span><span class="c1">// c will be 0x12340000</span>
<span class="kt">uint8</span><span class="w"> </span><span class="nv">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint8</span><span class="p">(</span><span class="kt">uint16</span><span class="p">(</span>a<span class="p">));</span><span class="w"> </span><span class="c1">// d will be 0x34</span>
<span class="kt">uint8</span><span class="w"> </span><span class="nv">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint8</span><span class="p">(</span>bytes1<span class="p">(</span>a<span class="p">));</span><span class="w"> </span><span class="c1">// e will be 0x12</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bytes</span></code> arrays and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> calldata slices can be converted explicitly to fixed bytes types (<code class="docutils literal notranslate"><span class="pre">bytes1</span></code>/…/<code class="docutils literal notranslate"><span class="pre">bytes32</span></code>).
In case the array is longer than the target fixed bytes type, truncation at the end will happen.
If the array is shorter than the target type, it will be padded with zeros at the end.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguNTsKCmNvbnRyYWN0IEMgewogICAgYnl0ZXMgcyA9ICJhYmNkZWZnaCI7CiAgICBmdW5jdGlvbiBmKGJ5dGVzIGNhbGxkYXRhIGMsIGJ5dGVzIG1lbW9yeSBtKSBwdWJsaWMgdmlldyByZXR1cm5zIChieXRlczE2LCBieXRlczMpIHsKICAgICAgICByZXF1aXJlKGMubGVuZ3RoID09IDE2LCAiIik7CiAgICAgICAgYnl0ZXMxNiBiID0gYnl0ZXMxNihtKTsgIC8vIGlmIGxlbmd0aCBvZiBtIGlzIGdyZWF0ZXIgdGhhbiAxNiwgdHJ1bmNhdGlvbiB3aWxsIGhhcHBlbgogICAgICAgIGIgPSBieXRlczE2KHMpOyAgLy8gcGFkZGVkIG9uIHRoZSByaWdodCwgc28gcmVzdWx0IGlzICJhYmNkZWZnaFwwXDBcMFwwXDBcMFwwXDAiCiAgICAgICAgYnl0ZXMzIGIxID0gYnl0ZXMzKHMpOyAvLyB0cnVuY2F0ZWQsIGIxIGVxdWFscyB0byAiYWJjIgogICAgICAgIGIgPSBieXRlczE2KGNbOjhdKTsgIC8vIGFsc28gcGFkZGVkIHdpdGggemVyb3MKICAgICAgICByZXR1cm4gKGIsIGIxKTsKICAgIH0KfQ==" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.5</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;abcdefgh&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">calldata</span><span class="w"> </span>c<span class="p">,</span><span class="w"> </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>m<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bytes16</span><span class="p">,</span><span class="w"> </span>bytes3<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>c<span class="p">.</span>length<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">16</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="kt">bytes16</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">bytes16</span><span class="p">(</span>m<span class="p">);</span><span class="w">  </span><span class="c1">// if length of m is greater than 16, truncation will happen</span>
<span class="w">        </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">bytes16</span><span class="p">(</span>s<span class="p">);</span><span class="w">  </span><span class="c1">// padded on the right, so result is &quot;abcdefgh\0\0\0\0\0\0\0\0&quot;</span>
<span class="w">        </span>bytes3<span class="w"> </span>b1<span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes3<span class="p">(</span>s<span class="p">);</span><span class="w"> </span><span class="c1">// truncated, b1 equals to &quot;abc&quot;</span>
<span class="w">        </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">bytes16</span><span class="p">(</span>c<span class="p">[</span><span class="o">:</span><span class="m m-Decimal">8</span><span class="p">]);</span><span class="w">  </span><span class="c1">// also padded with zeros</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="p">(</span>b<span class="p">,</span><span class="w"> </span>b1<span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="conversions-between-literals-and-elementary-types">
<span id="types-conversion-literals"></span><span id="index-33"></span><h2>Conversions between Literals and Elementary Types<a class="headerlink" href="#conversions-between-literals-and-elementary-types" title="Permalink to this heading"></a></h2>
<section id="integer-types">
<h3>Integer Types<a class="headerlink" href="#integer-types" title="Permalink to this heading"></a></h3>
<p>Decimal and hexadecimal number literals can be implicitly converted to any integer type
that is large enough to represent it without truncation:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=dWludDggYSA9IDEyOyAvLyBmaW5lCnVpbnQzMiBiID0gMTIzNDsgLy8gZmluZQp1aW50MTYgYyA9IDB4MTIzNDU2OyAvLyBmYWlscywgc2luY2UgaXQgd291bGQgaGF2ZSB0byB0cnVuY2F0ZSB0byAweDM0NTY=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">12</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1234</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
<span class="kt">uint16</span><span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x123456</span><span class="p">;</span><span class="w"> </span><span class="c1">// fails, since it would have to truncate to 0x3456</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to version 0.8.0, any decimal or hexadecimal number literals could be explicitly
converted to an integer type. From 0.8.0, such explicit conversions are as strict as implicit
conversions, i.e., they are only allowed if the literal fits in the resulting range.</p>
</div>
</section>
<section id="index-34">
<span id="id21"></span><h3>Fixed-Size Byte Arrays<a class="headerlink" href="#index-34" title="Permalink to this heading"></a></h3>
<p>Decimal number literals cannot be implicitly converted to fixed-size byte arrays. Hexadecimal
number literals can be, but only if the number of hex digits exactly fits the size of the bytes
type. As an exception both decimal and hexadecimal literals which have a value of zero can be
converted to any fixed-size bytes type:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ynl0ZXMyIGEgPSA1NDMyMTsgLy8gbm90IGFsbG93ZWQKYnl0ZXMyIGIgPSAweDEyOyAvLyBub3QgYWxsb3dlZApieXRlczIgYyA9IDB4MTIzOyAvLyBub3QgYWxsb3dlZApieXRlczIgZCA9IDB4MTIzNDsgLy8gZmluZQpieXRlczIgZSA9IDB4MDAxMjsgLy8gZmluZQpieXRlczQgZiA9IDA7IC8vIGZpbmUKYnl0ZXM0IGcgPSAweDA7IC8vIGZpbmU=" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">54321</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x123</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>d<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes2<span class="w"> </span>e<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0012</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes4<span class="w"> </span>f<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes4<span class="w"> </span>g<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
</pre></div>
</div>
<p>String literals and hex string literals can be implicitly converted to fixed-size byte arrays,
if their number of characters matches the size of the bytes type:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?#language=solidity&amp;version=0.8.23&amp;code=Ynl0ZXMyIGEgPSBoZXgiMTIzNCI7IC8vIGZpbmUKYnl0ZXMyIGIgPSAieHkiOyAvLyBmaW5lCmJ5dGVzMiBjID0gaGV4IjEyIjsgLy8gbm90IGFsbG93ZWQKYnl0ZXMyIGQgPSBoZXgiMTIzIjsgLy8gbm90IGFsbG93ZWQKYnl0ZXMyIGUgPSAieCI7IC8vIG5vdCBhbGxvd2VkCmJ5dGVzMiBmID0gInh5eiI7IC8vIG5vdCBhbGxvd2Vk" target="_blank">open in Remix</a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span>hex<span class="s2">&quot;1234&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes2<span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;xy&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes2<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span>hex<span class="s2">&quot;12&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>d<span class="w"> </span><span class="o">=</span><span class="w"> </span>hex<span class="s2">&quot;123&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>e<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>f<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;xyz&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
</pre></div>
</div>
</section>
<section id="addresses">
<span id="index-35"></span><h3>Addresses<a class="headerlink" href="#addresses" title="Permalink to this heading"></a></h3>
<p>As described in <a class="reference internal" href="#address-literals"><span class="std std-ref">Address Literals</span></a>, hex literals of the correct size that pass the checksum
test are of <code class="docutils literal notranslate"><span class="pre">address</span></code> type. No other literals can be implicitly converted to the <code class="docutils literal notranslate"><span class="pre">address</span></code> type.</p>
<p>Explicit conversions to <code class="docutils literal notranslate"><span class="pre">address</span></code> are allowed only from <code class="docutils literal notranslate"><span class="pre">bytes20</span></code> and <code class="docutils literal notranslate"><span class="pre">uint160</span></code>.</p>
<p>An <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">a</span></code> can be converted explicitly to <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> via <code class="docutils literal notranslate"><span class="pre">payable(a)</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to version 0.8.0, it was possible to explicitly convert from any integer type (of any size, signed or unsigned) to  <code class="docutils literal notranslate"><span class="pre">address</span></code> or <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code>.
Starting with in 0.8.0 only conversion from <code class="docutils literal notranslate"><span class="pre">uint160</span></code> is allowed.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="structure-of-a-contract.html" class="btn btn-neutral float-left" title="Structure of a Contract" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="units-and-global-variables.html" class="btn btn-neutral float-right" title="Units and Globally Available Variables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, The Solidity Authors.
      <span class="commit">Revision <code>f704f362</code>.
      </span></p>
  </div>

  
    <p>
        <a href="credits-and-attribution.html">Credits and attribution</a>.
    </p>


</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book fa-element"> RTD </span>

    <span class="fa fa-element">
    <input class="container_toggle" type="checkbox" id="switch" name="mode">
    <label for="switch"></label>
    </span>

    <span class="fa fa-v fa-element"> v: v0.8.23 <span class="fa fa-caret-down"></span></span>

    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Downloads</dt> 
            <dd><a href="http://docs.soliditylang.org/_/downloads/en/v0.8.23/pdf/">pdf</a></dd>
            
            <dd><a href="http://docs.soliditylang.org/_/downloads/en/v0.8.23/epub/">epub</a></dd>
            
        </dl>
        <dl>
            <dt>Versions</dt> 
            <dd><a href="https://docs.soliditylang.org/en/latest/">latest</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/stable/">stable</a></dd>
            
            <dd><a href="index.html">v0.8.23</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.22/">v0.8.22</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.21/">v0.8.21</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.20/">v0.8.20</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.19/">v0.8.19</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.18/">v0.8.18</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.17/">v0.8.17</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.16/">v0.8.16</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.15/">v0.8.15</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.14/">v0.8.14</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.13/">v0.8.13</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.12/">v0.8.12</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.11/">v0.8.11</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.10/">v0.8.10</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.9/">v0.8.9</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.8/">v0.8.8</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.7/">v0.8.7</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.6/">v0.8.6</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.5/">v0.8.5</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.4/">v0.8.4</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.3/">v0.8.3</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.2/">v0.8.2</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.1/">v0.8.1</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.8.0/">v0.8.0</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.7.6/">v0.7.6</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.7.5/">v0.7.5</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.7.4/">v0.7.4</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.7.3/">v0.7.3</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.7.2/">v0.7.2</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.7.1/">v0.7.1</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.7.0/">v0.7.0</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.12/">v0.6.12</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.11/">v0.6.11</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.10/">v0.6.10</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.9/">v0.6.9</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.8/">v0.6.8</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.7/">v0.6.7</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.6/">v0.6.6</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.5/">v0.6.5</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.4/">v0.6.4</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.3/">v0.6.3</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.2/">v0.6.2</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.1/">v0.6.1</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.6.0/">v0.6.0</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.17/">v0.5.17</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.16/">v0.5.16</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.15/">v0.5.15</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.14/">v0.5.14</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.13/">v0.5.13</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.12/">v0.5.12</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.11/">v0.5.11</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.10/">v0.5.10</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.9/">v0.5.9</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.8/">v0.5.8</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.7/">v0.5.7</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.6/">v0.5.6</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.5/">v0.5.5</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.4/">v0.5.4</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.3/">v0.5.3</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.2/">v0.5.2</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.1/">v0.5.1</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.5.0/">v0.5.0</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.26/">v0.4.26</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.25/">v0.4.25</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.24/">v0.4.24</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.23/">v0.4.23</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.22/">v0.4.22</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.21/">v0.4.21</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.20/">v0.4.20</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.19/">v0.4.19</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.18/">v0.4.18</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.17/">v0.4.17</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.16/">v0.4.16</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.15/">v0.4.15</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.14/">v0.4.14</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.13/">v0.4.13</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.12/">v0.4.12</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.11/">v0.4.11</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.10/">v0.4.10</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.9/">v0.4.9</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.8/">v0.4.8</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.7/">v0.4.7</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.6/">v0.4.6</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.5/">v0.4.5</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.4/">v0.4.4</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.3/">v0.4.3</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.2/">v0.4.2</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.1/">v0.4.1</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.4.0/">v0.4.0</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.3.6/">v0.3.6</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.3.5/">v0.3.5</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.3.4/">v0.3.4</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.3.3/">v0.3.3</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.3.2/">v0.3.2</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.3.1/">v0.3.1</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.3.0/">v0.3.0</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.2.2/">v0.2.2</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.2.1/">v0.2.1</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.2.0/">v0.2.0</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.1.7/">v0.1.7</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.1.6/">v0.1.6</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.1.5/">v0.1.5</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.1.4/">v0.1.4</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.1.3/">v0.1.3</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/v0.1.2/">v0.1.2</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/develop/">develop</a></dd>
            
            <dd><a href="https://docs.soliditylang.org/en/breaking/">breaking</a></dd>
            
        </dl>
        <dl>
            
            <dt>On Read the Docs</dt>
            <dd>
                <a href="http://readthedocs.org/projects/solidity/?fromdocs=solidity">Project Home</a>
            </dd>
            <dd>
                <a href="http://readthedocs.org/builds/solidity/?fromdocs=solidity">Builds</a>
            </dd>
        </dl>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>

<!-- Mirrored from docs.soliditylang.org/en/v0.8.23/types.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 02 Jan 2024 20:36:16 GMT -->
</html>
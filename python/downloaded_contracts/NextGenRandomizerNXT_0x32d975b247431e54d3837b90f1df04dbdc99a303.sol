{"INextGenAdmins.sol":{"content":"// SPDX-License-Identifier: MIT\r\n\r\npragma solidity ^0.8.19;\r\n\r\ninterface INextGenAdmins {\r\n\r\n    // retrieve global admin\r\n    function retrieveGlobalAdmin(address _address) external view returns(bool);\r\n\r\n    // retrieve function admin\r\n    function retrieveFunctionAdmin(address _address, bytes4 _selector) external view returns(bool);\r\n\r\n    // retrieve collection admin\r\n    function retrieveCollectionAdmin(address _address, uint256 _collectionID) external view returns(bool);\r\n\r\n    // retrieve if the contract is admin contract\r\n    function isAdminContract() external view returns (bool);\r\n\r\n    // retrieve owner\r\n    function owner() external view returns (address);\r\n\r\n}"},"INextGenCore.sol":{"content":"// SPDX-License-Identifier: MIT\r\n\r\npragma solidity ^0.8.19;\r\n\r\ninterface INextGenCore {\r\n\r\n    function retrievewereDataAdded(uint256 _collectionID) external view returns(bool);\r\n\r\n    function viewTokensIndexMin(uint256 _collectionID) external view returns (uint256);\r\n\r\n    function viewTokensIndexMax(uint256 _collectionID) external view returns (uint256);\r\n\r\n    function viewCirSupply(uint256 _collectionID) external view returns (uint256);\r\n\r\n    function airDropTokens(uint256 mintIndex, address _recipient, string memory _tokenData, uint256 _saltfun_o, uint256 _collectionID) external;\r\n\r\n    function mint(uint256 mintIndex, address _mintingAddress , address _mintTo, string memory _tokenData, uint256 _saltfun_o, uint256 _collectionID, uint256 phase) external;\r\n\r\n    function collectionFreezeStatus(uint256 _collectionID) external view returns(bool);\r\n\r\n    function viewMaxAllowance(uint256 _collectionID) external view returns (uint256);\r\n\r\n    function retrieveTokensMintedALPerAddress(uint256 _collectionID, address _address) external view returns(uint256);\r\n\r\n    function retrieveTokensMintedPublicPerAddress(uint256 _collectionID, address _address) external view returns(uint256);\r\n\r\n    function viewColIDforTokenID(uint256 _tokenid) external view returns (uint256);\r\n\r\n    function burnToMint(uint256 mintIndex, uint256 _burnCollectionID, uint256 _tokenId, uint256 _mintCollectionID, uint256 _saltfun_o, address burner) external;\r\n\r\n    function retrieveArtistAddress(uint256 _collectionID) external view returns(address);\r\n\r\n    function setTokenHash(uint256 _collectionID, uint256 _mintIndex, bytes32 _hash) external;\r\n\r\n    function retrieveTokenHash(uint256 _tokenid) external view returns(bytes32);\r\n\r\n}"},"IXRandoms.sol":{"content":"// SPDX-License-Identifier: MIT\r\n\r\npragma solidity ^0.8.19;\r\n\r\ninterface IXRandoms {\r\n\r\n    function randomNumber() external view returns (uint256);\r\n\r\n    function randomWord() external view returns (string memory);\r\n    \r\n}"},"RandomizerNXT.sol":{"content":"// SPDX-License-Identifier: MIT\r\n\r\n/**\r\n *\r\n *  @title: NextGen 6529 - NXT Randomizer Contract\r\n *  @date: 20-December-2023\r\n *  @version: 1.5\r\n *  @author: 6529 team\r\n */\r\n\r\npragma solidity ^0.8.19;\r\n\r\nimport \"./IXRandoms.sol\";\r\nimport \"./INextGenAdmins.sol\";\r\nimport \"./INextGenCore.sol\";\r\n\r\ncontract NextGenRandomizerNXT {\r\n\r\n    IXRandoms public randoms;\r\n    INextGenAdmins private adminsContract;\r\n    INextGenCore public gencoreContract;\r\n    address gencore;\r\n\r\n    constructor(address _randoms, address _admin, address _gencore) {\r\n        randoms = IXRandoms(_randoms);\r\n        adminsContract = INextGenAdmins(_admin);\r\n        gencore = _gencore;\r\n        gencoreContract = INextGenCore(_gencore);\r\n    }\r\n\r\n    // certain functions can only be called by a global or function admin\r\n\r\n    modifier FunctionAdminRequired(bytes4 _selector) {\r\n      require(adminsContract.retrieveFunctionAdmin(msg.sender, _selector) == true || adminsContract.retrieveGlobalAdmin(msg.sender) == true , \"Not allowed\");\r\n      _;\r\n    }\r\n\r\n    // update contracts if needed\r\n\r\n    function updateRandomsContract(address _randoms) public FunctionAdminRequired(this.updateRandomsContract.selector) {\r\n        randoms = IXRandoms(_randoms);\r\n    }\r\n\r\n    function updateAdminContract(address _newadminsContract) public FunctionAdminRequired(this.updateAdminContract.selector) {\r\n        require(INextGenAdmins(_newadminsContract).isAdminContract() == true, \"Contract is not Admin\");\r\n        adminsContract = INextGenAdmins(_newadminsContract);\r\n    }\r\n\r\n    function updateCoreContract(address _gencore) public FunctionAdminRequired(this.updateCoreContract.selector) { \r\n        gencore = _gencore;\r\n        gencoreContract = INextGenCore(_gencore);\r\n    }\r\n\r\n    // function that calculates the random hash and returns it to the gencore contract\r\n    function calculateTokenHash(uint256 _collectionID, uint256 _mintIndex, uint256 _saltfun_o) public {\r\n        require(msg.sender == gencore);\r\n        bytes32 hash = keccak256(abi.encodePacked(_mintIndex, blockhash(block.number - 1), randoms.randomNumber(), randoms.randomWord()));\r\n        gencoreContract.setTokenHash(_collectionID, _mintIndex, hash);\r\n    }\r\n\r\n    // get randomizer contract status\r\n    function isRandomizerContract() external view returns (bool) {\r\n        return true;\r\n    }\r\n    \r\n}"}}